!function(a,b,c,d){"use strict";if(!a.qc||!a.qc.widget){var e=a.document,f=a.qc=a.qc||{};f.widget={};var g=f.widget.Default=a.QCDefault||{},h=g.Image=g.Image||{},i=g.Style=g.Style||{},j=g.Color=g.Color||{},k=g.Prototype=g.Prototype||{},l=g.Class=g.Class||{},m=Math,n=m.round,o=(m.floor,m.ceil),p=m.sqrt,q=m.max,r=m.min,s=m.abs,t=m.cos,u=(m.acos,m.sin),v=(m.pow,m.asin,m.PI,m.tan,m.atan2,m.random,a.parseInt,a.setTimeout),w=a.clearTimeout,x=b.getOwnPropertyDescriptor,y=function(a,c,d){x(a,c)||b.defineProperty(a,c,d)},z=function(a,b){for(var c in b)y(a,c,b[c])},A=a.navigator?a.navigator.userAgent.toLowerCase():"",B=function(a){return a.test(A)},C=(B(/msie/)||B(/trident/),B(/firefox/)),D=B(/mac/),E=B(/android/),F=g.isTouchable===d?e?"ontouchend"in e:!1:g.isTouchable,G=C?"DOMMouseScroll":"mousewheel",H=["touchstart","touchmove","touchend","input","keydown","keyup","keypress","mousedown","mousemove","mouseup","mouseout",G,"contextmenu","mouseleave","mouseenter"],I="px",J=[],K={x:0,y:0,width:0,height:0},L=function(){},M=function(){var a=1;return function(){return++a}}(),N=function(a,b,c){var e,f=V(a)?a:a.prototype;for(e in b)c&&f[e]!==d||(f[e]=b[e]);return a},O=function(a){if(!a)return c;if($(a))return a.slice(0);if(V(a)){var b,d={};for(b in a)d[b]=a[b];return d}return a},P=function(a,b){var c="_"+b;y(a,b,{get:function(){return this[c]},set:function(a){var d=this[c];this[c]=a,this.epc&&this.epc(b,d,a)}})},Q=function(a,b){b&&b["class"]&&(a=b["class"]),a=W(a)?l[a]:a;var c=new a;return R(c,b),c},R=function(a,b){for(var c in b)if("class"!==c){var d=b[c];"s"!==c&&"a"!==c||!Z(a[c])?a[c]=d:a[c](d)}};k.properties=function(a,b){for(var c=0;c<b.length;c++)P(a,b[c])},k.attr=function(a){P(a,"attrs"),a.a=function(a,b){var c=this;if(2===arguments.length)c.setAttr(a,b);else{if(!V(a))return c.getAttr(a);for(var d in a)c.setAttr(d,a[d])}return c},a.getAttr=function(a){return this._attrs?this._attrs[a]:d},a.setAttr=function(a,b){var c=this;c._attrs||(c._attrs={});var e=c._attrs[a];b===d?delete c._attrs[a]:c._attrs[a]=b;var f=c.epc("a:"+a,e,b);return f&&c.onAttrChange(f,a),c},a.onAttrChange=function(){},z(a,{serializableAttrs:{get:function(){var a,b={};for(a in this._attrs)b[a]=!0;return b}}})},k.style=function(a){P(a,"styles"),a.s=function(a,b){var c=this;if(2===arguments.length)c.setStyle(a,b);else{if(!V(a))return c.getStyle(a);for(var d in a)c.setStyle(d,a[d])}return c},a.getStyle=function(a,b){b===d&&(b=!0);var c=this._styles?this._styles[a]:d;return c===d&&b?i[a]:c},a.setStyle=function(a,b){var c=this;c._styles||(c._styles={});var e=c._styles[a];b===d?delete c._styles[a]:c._styles[a]=b;var f=c.epc("s:"+a,e,b);return f&&c.onStyleChange(f,a),c},a.onStyleChange=function(){},z(a,{serializableStyles:{get:function(){var a,b={};for(a in this._styles)b[a]=!0;return b}}})},k.view=function(d){P(d,"id"),d._disabled=!1,d._preferredSizeProperties=[],d.setDisabled=function(a,b){var c=this,d=c._disabled;d!==a&&(d&&(na(c._disabledDiv),delete c._disabledDiv),a&&(ma(c._view,c._disabledDiv=sa(b)),c.iv()),c._disabled=a,c.epc("disabled",d,a))},d.initView=function(a,b){var c=this;c._view=ga(!0),c._interactionDiv=ga(!1,c._view),a&&(c._contentDiv=ga(!1,c._interactionDiv)),b&&(c._canvas=ha(c._contentDiv))},d.findViewById=function(a){return this.id===a?this:void 0},d.addEventListener=function(a,b,c){this._interactionDiv.addEventListener(a,b,c)},d.removeEventListener=function(a,b,c){this._interactionDiv.removeEventListener(a,b,c)},d.lp=function(a){var b=this,c=b._interactionDiv.getBoundingClientRect(),d=Y(b.translateX)?b.translateX:0,e=Y(b.translateY)?b.translateY:0,f=b._zoom||1;return a=bb(a),{x:(a.clientX-c.left-d)/f,y:(a.clientY-c.top-e)/f}},d.addToDOM=function(b){var c=this;if(ma(e.body,c.view),b)ra(c,b);else{var d=function(){var a=la();ra(c,0,0,a.width,a.height)};a.addEventListener("orientationchange",d,!1),a.addEventListener("resize",d,!1),d()}c.iv(!0)},d.requestFocus=function(){pa(this._interactionDiv),this.endEditing&&this.endEditing()},d.iv=function(a){var b=this;a&&(b._forceLayout=!0),b._invalidate||(b._invalidate=!0,nb(b.validate,b))},d.checkChildPreferredSizeChange=function(a,d){var e,f=this,g=!1,h=function(){if(f._calcdPreferredSizeMap){var a=b.keys(f._calcdPreferredSizeMap)[0];return[a,f.getPreferredSize(a)]}return[null,f.getPreferredSize()]};d=d||f._preferredSizeProperties,d.indexOf(a)>=0&&(g=!0);var i="preferredSize"===a,j=i||!f._preferredSize&&g;if(f.parent&&j&&!i){var k=h(),l=k[0];e=k[1]}if(g&&(f._calcdPreferredSize=f._calcdPreferredSizeMap=c),f.parent&&j)if(i)f.parent.epc("childPreferredSize",0,1);else{var m=f.getPreferredSize(l);f.isSameSize(e,m)||f.parent.epc("childPreferredSize",0,1)}},d.isSameSize=function(a,b){return a===b?!0:a&&b?a.width===b.width&&a.height===b.height:void 0},d.validate=function(){var a=this;if(a._invalidate){delete a._invalidate;var b=a._view,c=a.clientWidth,d=a.clientHeight;ra(a._interactionDiv,0,0,c,d),ra(a._contentDiv,0,0,c,d),a.emit("viewChange",{kind:"beginValidate"}),a.validateImpl(),a.validateScrollBar&&a.validateScrollBar(),a.emit("viewChange",{kind:"endValidate"});var e=a._disabledDiv;e&&(b.lastChild!==e&&(na(e),ma(b,e)),ra(e,0,0,c,d)),Ga(a),delete a._forceLayout}},d.isInDOM=function(){for(var a=this.view;a;){if(a===e.body)return!0;a=a.parentNode}return!1},d.getPreferredSize=function(){return this._preferredSize||{width:100,height:100}},d.setPreferredSize=function(a,b){var d;d=b==c?a:{width:a,height:b};var e=this._preferredSize;this._preferredSize=d,this.epc("preferredSize",e,d)},z(d,{preferredSize:{get:function(){return this.getPreferredSize()},set:function(a){this.setPreferredSize(a)}},view:{get:function(){return this._view}},parent:{get:function(){return this._parent}},cursor:{get:function(){return this._interactionDiv.style.cursor},set:function(a){this._interactionDiv.style.cursor=a}},disabled:{get:function(){return this._disabled},set:function(a){this.setDisabled(a)}},contextMenu:{get:function(){return this._contextMenu},set:function(a){var b=this,c=b._contextMenu;c!==a&&(c&&c.dispose(),a&&a.addTo(this),b._contextMenu=a,b.epc("contextMenu",c,a))}},clientWidth:{get:function(){return this._view.clientWidth}},clientHeight:{get:function(){return this._view.clientHeight}},width:{get:function(){return this._width},set:function(a){var b=this,c=b._width;b._view.style.width=a+I,b._width=a,b.epc("width",c,a),c!==a&&(b.iv(),b.endEditing&&!E&&b.endEditing(),b.redraw&&b.redraw(),b.showScrollBar&&b.showScrollBar())}},height:{get:function(){return this._height},set:function(a){var b=this,c=b._height;b._view.style.height=a+I,b._height=a,b.epc("height",c,a),c!==a&&(b.iv(),b.endEditing&&!E&&b.endEditing(),b.redraw&&b.redraw(),b.showScrollBar&&b.showScrollBar())}},children:{get:function(){return c}}})},k.interactor=function(){var a=function(a,b){var c,d="__"+a;if(c="mouseenter"===a||"mouseleave"===a?function(c){b.withinElement(c)&&b["handle_"+a](c)}:function(c){b["handle_"+a](c)},!b[d]){b[d]=c;var e=a;"mouseenter"===e&&(e="mouseover"),"mouseleave"===e&&(e="mouseout"),b.view.addEventListener(e,c,!1)}},b=function(a,b){var c="__"+a,d=b[c];if(d){var e=a;"mouseenter"===e&&(e="mouseover"),"mouseleave"===e&&(e="mouseout"),b.view.removeEventListener(e,d,!1),delete b[c]}};return function(c){c.withinElement=function(a){for(var b=this.view.view,c=a.relatedTarget;c&&c!==b;)c=c.parentNode;return c!==b},c.addListeners=function(){for(var b=0;b<H.length;b++)this["handle_"+H[b]]&&a(H[b],this)},c.removeListeners=function(){for(var a=0;a<H.length;a++)this["handle_"+H[a]]&&b(H[a],this)},z(c,{cursor:{get:function(){return this.view.cursor},set:function(a){this.view.cursor=a}}})}}(),function(a,b){function c(a,b,c){return a.addEventListener?void a.addEventListener(b,c,!1):void 0}function d(a,b,c){return a.removeEventListener?void a.removeEventListener(b,c,!1):void 0}function e(a){if("keypress"==a.type){var b=String.fromCharCode(a.which);return a.shiftKey||(b=b.toLowerCase()),b}return s[a.which]?s[a.which]:t[a.which]?t[a.which]:String.fromCharCode(a.which).toLowerCase()}function g(a,b){return a.sort().join(",")===b.sort().join(",")}function h(a){var b=[];return a.shiftKey&&b.push("shift"),a.altKey&&b.push("alt"),a.ctrlKey&&b.push("ctrl"),a.metaKey&&b.push("meta"),b}function i(a){return a.preventDefault?void a.preventDefault():void(a.returnValue=!1)}function j(a){return a.stopPropagation?void a.stopPropagation():void(a.cancelBubble=!0)}function k(a){return"shift"==a||"ctrl"==a||"alt"==a||"meta"==a}function l(){if(!r){r={};for(var a in s)a>95&&112>a||s.hasOwnProperty(a)&&(r[s[a]]=a)}return r}function m(a,b,c){return c||(c=l()[a]?"keydown":"keypress"),"keypress"==c&&b.length&&(c="keydown"),c}function n(a){return"+"===a?["+"]:(a=a.replace(/\+{2}/g,"+plus"),a.split("+"))}function o(a,b){var c,d,e,f=[];for(c=n(a),e=0;e<c.length;++e)d=c[e],x[d]&&(d=x[d]),b&&"keypress"!=b&&u[d]&&(d=u[d],f.push("shift")),k(d)&&f.push(d);return b=m(d,f,b),{key:d,modifiers:f,action:b}}function p(a,c){return a===b?!1:a===c?!0:p(a.parentNode,c)}function q(a){function f(a){a=a||{};var b,c=!1;for(b in x)a[b]?c=!0:x[b]=0;c||(A=!1)}function l(a,b,c,d,e,f){var h,i,j=[],l=c.type;if(!t._callbacks[a])return[];for("keyup"==l&&k(a)&&(b=[a]),h=0;h<t._callbacks[a].length;++h)if(i=t._callbacks[a][h],(d||!i.seq||x[i.seq]==i.level)&&l==i.action&&("keypress"==l&&!c.metaKey&&!c.ctrlKey||g(b,i.modifiers))){var m=!d&&i.combo==e,n=d&&i.seq==d&&i.level==f;(m||n)&&t._callbacks[a].splice(h,1),j.push(i)}return j}function m(a,b,c,d){t.stopCallback(b,b.target||b.srcElement,c,d)||a(b,c)===!1&&(i(b),j(b))}function n(a){"number"!=typeof a.which&&(a.which=a.keyCode);var b=e(a);if(b)return"keyup"==a.type&&y===b?void(y=!1):void t.handleKey(b,h(a),a)}function p(){w(u),u=v(f,1e3)}function r(a,b,c,d){function g(b){return function(){A=b,++x[a],p()}}function h(b){m(c,b,a),"keyup"!==d&&(y=e(b)),v(f,10)}x[a]=0;for(var i=0;i<b.length;++i){var j=i+1===b.length,k=j?h:g(d||o(b[i+1]).action);s(b[i],k,d,a,i)}}function s(a,b,c,d,e){t._directMap[a+":"+c]=b,a=a.replace(/\s+/g," ");var f,g=a.split(" ");return g.length>1?void r(a,g,b,c):(f=o(a,c),t._callbacks[f.key]=t._callbacks[f.key]||[],l(f.key,f.modifiers,{type:f.action},d,a,e),void t._callbacks[f.key][d?"unshift":"push"]({callback:b,modifiers:f.modifiers,action:f.action,seq:d,level:e,combo:a}))}var t=this;if(a=a||b,!(t instanceof q))return new q(a);t.target=a,t._callbacks={},t._directMap={};var u,x={},y=!1,z=!1,A=!1;t._handleKey=function(a,b,c){var d,e=l(a,b,c),g={},h=0,i=!1;for(d=0;d<e.length;++d)e[d].seq&&(h=Math.max(h,e[d].level));for(d=0;d<e.length;++d)if(e[d].seq){if(e[d].level!=h)continue;i=!0,g[e[d].seq]=1,m(e[d].callback,c,e[d].combo,e[d].seq)}else i||m(e[d].callback,c,e[d].combo);var j="keypress"==c.type&&z;c.type!=A||k(a)||j||f(g),z=i&&"keydown"==c.type},t._bindMultiple=function(a,b,c){for(var d=0;d<a.length;++d)s(a[d],b,c)},c(a,"keypress",n),c(a,"keydown",n),c(a,"keyup",n),t.dispose=function(){d(a,"keypress",n),d(a,"keydown",n),d(a,"keyup",n)}}if(a.navigator){for(var r,s={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},t={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},u={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},x={option:"alt",command:"meta","return":"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(a.navigator.platform)?"meta":"ctrl"},y=1;20>y;++y)s[111+y]="f"+y;for(y=0;9>=y;++y)s[y+96]=y;q.prototype.bind=function(a,b,c){var d=this;return a=a instanceof Array?a:[a],d._bindMultiple.call(d,a,b,c),d},q.prototype.unbind=function(a,b){var c=this;return c.bind.call(c,a,function(){},b)},q.prototype.trigger=function(a,b){var c=this;return c._directMap[a+":"+b]&&c._directMap[a+":"+b]({},a),c},q.prototype.reset=function(){var a=this;return a._callbacks={},a._directMap={},a},q.prototype.stopCallback=function(a,b){var c=this;return(" "+b.className+" ").indexOf(" mousetrap ")>-1?!1:p(b,c.target)?!1:"INPUT"==b.tagName||"SELECT"==b.tagName||"TEXTAREA"==b.tagName||b.isContentEditable},q.prototype.handleKey=function(){var a=this;return a._handleKey.apply(a,arguments)},q.init=function(){var a=q(b);for(var c in a)"_"!==c.charAt(0)&&(q[c]=function(b){return function(){return a[b].apply(a,arguments)}}(c))},q.init(),f.widget.Mousetrap=q}}(a,e),l.Object=b;var S=function(a,b){if(W(a)&&(a=l[a]),W(b)&&(b=l[b]),!a||!b)return!1;for(var c=a.superClass;c&&c!==b;)c=c.superClass;return c===b},T=function(a,b){for(var d=c;!d&&a;)a=a.superClass,d=x(a.prototype,b);return d},U=function(c,e,f,g,h,i){if(e=e||b,W(e)&&(e=l[e],!e))throw"'"+e+"' not defined";var j=b.create(e.prototype);if(W(c)){if(l[c])throw"'"+c+"' alreay defined";for(var m=c.split("."),n=a,o=0;o<m.length-1;o++){var p=m[o];n[p]||(n[p]={}),n=n[p]}n[m[m.length-1]]=f,l[c]=f}i&&z(j,i);for(var q in h)k[q]&&k.hasOwnProperty(q)&&k[q](j,h[q]);for(var q in g)j[q]=g[q];return f.isSubClassOf=function(a){return S(f,a)},z(f,{className:{get:function(){return c}},superClass:{get:function(){return e}},superClassName:{get:function(){return e.prototype.className}}}),z(j,{"class":{get:function(){return f}},className:{get:function(){return c}},superClass:{get:function(){return e}},superClassName:{get:function(){return e.prototype.className}}}),j.constructor=f,f.prototype=j,f["super"]=e.prototype,f.getSuperProperty=function(a,b){var c=T(f,b);return c&&c.get?c.get.call(a):d},f.setSuperProperty=function(a,b,c){var d=T(f,b);return d&&d.set?d.set.call(a,c):void 0},f},V=function(a){return a&&"object"==typeof a},W=function(a){return"string"==typeof a||a instanceof String},X=function(a){return"boolean"==typeof a},Y=function(a){return"number"==typeof a},Z=function(a){return"function"==typeof a},$=function(a){return a instanceof Array},_=function(a){for(var b in a)return!1;return!0},aa=function(a,b,c){c>=0?a.splice(c,0,b):a.push(b)},ba=function(a,b){var c=a.indexOf(b);return c>=0&&a.splice(c,1),c},ca=function(a,b){for(var c=0,d=b.length;d>c;c++)a.push(b[c])},da=function(a,b,c){if(b){for(var d=[],e=0,f=a.length;f>e;e++){var g=a[e];b.call(c,g)&&d.push(g)}return d}return a.slice(0)},ea=function(a){var b=a.target.tagName;("DIV"===b||"CANVAS"===b)&&("keydown"===a.type&&[37,38,39,40].indexOf(a.keyCode)<0&&(65!==a.keyCode||!a.metaKey&&!a.ctrlKey)||(a.preventDefault(),a.preventManipulation&&a.preventManipulation()))},fa=function(a){g.popup&&g.popup.close(),g.popup=a},ga=function(a,b){var d=e.createElement("div"),f=d.style;return d.tabIndex=-1,d.onkeydown=g.preventDefault,f.msTouchAction="none",f.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",c),a&&(f.overflow="hidden"),ia(d,c,0),b&&ma(b,d),d},ha=function(a){var b=e.createElement("canvas"),d=b.style;return d.msTouchAction="none",ia(b,c,0),a&&ma(a,b),b},ia=function(a,b,c){var d=a.style;d.border=b?b+" solid 1px":0,d.outline=0,d.padding=c?"0 "+c+I:0,ja(a)},ja=function(a){var b=a.style;b.position="absolute",b.margin=0,b.setProperty("box-sizing","border-box",c),b.setProperty("-moz-box-sizing","border-box",c)},ka=function(a,b,d,e){e||(e=g.devicePixelRatio),b!=c&&(a.width=b*e,a.style.width=b+I),d!=c&&(a.height=d*e,a.style.height=d+I)},la=function(){var b=e.documentElement,c=b&&(b.scrollLeft||b.scrollTop)?b:e.body;return{target:c,left:c.scrollLeft,top:c.scrollTop,width:a.innerWidth||c.clientWidth,height:a.innerHeight||c.clientHeight}},ma=function(a,b,c){a.appendChild(b),c&&(b.style.position="absolute")},na=function(){var a;return function(b){if(b&&b.parentNode){if(a===b)return;a=b,b.parentNode.removeChild(b),a=c}}}(),oa=function(a,b){if(a)for(var c=Array.prototype.slice.call(a.childNodes),d=0;d<c.length;d++){var e=c[d];b&&b(e)&&a.removeChild(e)}},pa=function(a){if(e.activeElement!==a){var b=la(),c=b.target;a.focus(),c.scrollLeft=b.left,c.scrollTop=b.top}},qa=function(a){return a.view||a},ra=function(a,b,d,f,g,h){if(a){arguments.length<4&&(h=d,d=b.y,f=b.width,g=b.height,b=b.x);var i=qa(a),j=i.style;(e.fullscreenElement||e.mozFullScreenElement||e.webkitFullscreenElement||e.msFullscreenElement)!==i&&(b!=c&&(j.left=b+I),d!=c&&(j.top=d+I),f!=c&&(a.tagName?j.width=f+I:a.width=f),g!=c&&(a.tagName?j.height=g+I:a.height=g)),h&&a.iv&&a.iv(!0),a.validate&&a.validate(),a.emit&&a.emit("viewChange",{kind:"layout"})}},sa=function(a){var b=ga(),c=b.style;return c.backgroundColor=j.disabledBackground,a&&(c.backgroundImage="url("+a+")",c.backgroundPosition="50% 50%",c.backgroundRepeat="no-repeat no-repeat"),b},ta=function(a,b){b.split||(b+="");for(var c,d=b.split("\n"),e=0,f=d.length,g=0;f>g;g++){var h=wa(a.font,d[g]);h.width>e&&(e=h.width),c||(c=h.height)}return a.ss=d,{width:e,height:c*f}},ua=function(a,b,c,d,e,f){var g=b.length;if(1===g)va(a,b[0],c,d,e);else for(var h=c.height/g,i={x:c.x,y:c.y,width:c.width,height:h},j=0;j<b.length;j++)f?xa(a,b[j],d,e,i.x,i.y,i.width,i.height,f):va(a,b[j],i,d,e),i.y+=h},va=function(a,b,c,e,f){a.font=e?e:g.labelFont,a.fillStyle=f?f:"black",a.textAlign="center",a.textBaseline="middle";var h,i;c?c.width===d?(h=c.x,i=c.y):(h=c.x+c.width/2,i=c.y+c.height/2):(h=0,i=0),a.fillText(b,n(h),n(i))},wa=function(){var a={},b=e?ha().getContext("2d"):c;return function(d,e){b.font=d?d:g.labelFont;var f=a[b.font];return f||(f=2*b.measureText("e").width+4,a[b.font]=f),{width:e==c?0:b.measureText(e).width+4,height:f}}}(),xa=function(a,b,d,e,f,g,h,i,j,k){if(b!=c){var l,m={};k&&"middle"!==k?"top"===k?(l||(l=wa(d,b)),m.y=g+l.height/2):(l||(l=wa(d,b)),m.y=g+i-l.height/2):m.y=g+i/2,j&&"left"!==j?"right"===j?(l||(l=wa(d,b)),m.x=f+h-l.width/2):m.x=f+h/2:(l||(l=wa(d,b)),m.x=f+l.width/2),va(a,b,m,d,e)}},ya=function(a,b){return Aa(a,b?b:40)},za=function(a,b){return Aa(a,b?b:-40)},Aa=function(){var a={};return function(b,c){var d=b+"-"+c,e=a[d];if(e)return e;var f,g,h,i=Ba(b);return 0>c?(c=(100+c)/100,f=o(i[0]*c),g=o(i[1]*c),h=o(i[2]*c)):(c/=100,f=i[0],g=i[1],h=i[2],f+=(255-f)*c,g+=(255-g)*c,h+=(255-h)*c,f=r(o(f),255),g=r(o(g),255),h=r(o(h),255)),a[d]="rgb("+f+","+g+","+h+")"}}(),Ba=function(){var a,b={};return function(c){var d,e=b[c];return e||(a||(a=ha(),ka(a,1,1,1)),d=a.getContext("2d"),d.clearRect(0,0,1,1),d.fillStyle=c,d.beginPath(),d.rect(0,0,1,1),d.fill(),e=d.getImageData(0,0,1,1).data,e=b[c]=[e[0],e[1],e[2],e[3]]),e}}(),Ca=function(a){if(!W(a))return a;var b=Ba(a);return b.CA||(b.CA=[b[0]/255,b[1]/255,b[2]/255,b[3]/255]),b.CA},Da=function(a,b,c,d){var e=ha();e.width=c,e.height=d;var f=e.getContext("2d");f.drawImage(a,0,0,c,d);try{var g=f.getImageData(0,0,c,d),h=g.data,i=0,j=h.length;for(b=Ca(b);j>i;i+=4){var k=h[i+0],l=h[i+1],m=h[i+2];h[i+0]=b[0]*k,h[i+1]=b[1]*l,h[i+2]=b[2]*m}f.putImageData(g,0,0)}catch(n){return a}return e},Ea=c,Fa=c,Ga=function(a){Ea&&!a._loadingView_&&(Fa||(Fa={}),Fa[a._loadingView_=M()]=a)},Ha=function(b,d,e,f){Ea||(Ea={});var h=Ea[b];if(h){if(h.url===d)return;h.image.onload=L,h.image.onerror=L}var i=new a.Image;Ea[b]={image:i,url:d},i.onload=function(){e&&(i.width=e),f&&(i.height=f),g.onImageLoad(b,i),Ia(b,i)},i.onerror=function(){Ia(b,g.onImageError(b,d)||c)},i.src=d},Ia=function(a,b){if(h[a]=b,delete Ea[a],_(Ea)&&(Ea=c,Fa)){for(var d in Fa){var e=Fa[d];e.invalidateAll&&e.invalidateAll(),e.redraw&&e.redraw(),e.iv(),delete e._loadingView_}Fa=c}if(b&&Fa)for(var d in Fa){var e=Fa[d];e.invalidateAll&&e.invalidateAll(),e.redraw&&e.redraw(),e.iv()}},Ja=function(a,b,c,d){var e=arguments.length;4===e?Ha(a,b,c,d):2===e?W(b)?Ha(a,b):h[a]=b:1===e&&Ha(a,a)},Ka=function(a,b){var e;if(a==c)return c;if(V(a)?e=a:(e=h[a],a&&e===d&&(Ea&&Ea[a]||Ha(a,a))),b&&e&&e.tagName){e.colors||(e.colors={});var f=e.colors[b];return f||(f=Da(e,b,e.width,e.height),e.colors[b]=f),f}return e},La={},Ma=function(a){return a instanceof MouseEvent||0===a.type.indexOf("mouse")},Na=function(a,b){return a?a.keyCode===b:La[b]},Oa=function(a){return Ra(a)&&Na(a,65)},Pa=function(a){return Na(a,46)||Na(a,8)},Qa=function(a){return a?a.shiftKey:La[16]},Ra=function(a){return a?D?a.metaKey:a.ctrlKey:D?La[91]:La[17]},Sa=function(a){return Ma(a)?0===a.button:!0},Ta=function(a){return function(b){return b?b.keyCode===a:La[a]}},Ua=Ta(37),Va=Ta(38),Wa=Ta(39),Xa=Ta(40),Ya=Ta(32),Za=Ta(13),$a=Ta(27),_a=function(a){return Ma(a)?1:a.touches.length},ab=function(){var a=new Date,b=c;return function(c){if(Ma(c))return 2===c.detail;var e=c.type,f=e+"_isDoubleClick";if(c[f]===d&&"touchstart"===e){var g=new Date,h=cb(c);c[f]=b&&xb(b,h)<20&&g.getTime()-a.getTime()<500,a=g,b=h}return c[f]}}(),bb=function(a){if(!Ma(a)){var b=a.touches[0];if(b)return b;if(b=a.changedTouches,b&&b[0])return b[0]}return a},cb=function(a){return a=bb(a),{x:a.clientX,y:a.clientY}},db=function(a){return a=bb(a),{x:a.pageX,y:a.pageY}},eb=function(a){var b=a.touches[0],c=a.touches[1],d=b.clientX,e=b.clientY,f=c.clientX,g=c.clientY;return p((d-f)*(d-f)+(e-g)*(e-g))};a.addEventListener&&(a.addEventListener("keyup",function(a){91===a.keyCode?La={}:delete La[a.keyCode]},!0),a.addEventListener("keydown",function(a){La[a.keyCode]=!0},!0));var fb=c,gb=function(){return!!fb},hb=function(a){fb.handleWindowTouchMove(a)},ib=function(b){fb.handleWindowTouchEnd(b),a.removeEventListener("touchmove",hb,!1),a.removeEventListener("touchend",ib,!1),fb=c},jb=function(a){fb.handleWindowMouseMove(a)},kb=function(b){fb.handleWindowMouseUp(b),a.removeEventListener("mousemove",jb,!1),a.removeEventListener("mouseup",kb,!1),fb=c},lb=function(b,c){b!==fb&&(fb?Ma(c)?fb.handleWindowMouseUp(c):fb.handleWindowTouchEnd(c):Ma(c)?(a.addEventListener("mousemove",jb,!1),a.addEventListener("mouseup",kb,!1)):(a.addEventListener("touchmove",hb,!1),a.addEventListener("touchend",ib,!1)),fb=b)};!function(){for(var b=0,c=["ms","moz","webkit","o"],d=0;d<c.length&&!a.requestAnimationFrame;++d)a.requestAnimationFrame=a[c[d]+"RequestAnimationFrame"],a.cancelAnimationFrame=a[c[d]+"CancelAnimationFrame"]||a[c[d]+"CancelRequestAnimationFrame"];a.requestAnimationFrame||(a.requestAnimationFrame=function(c){var d=(new Date).getTime(),e=Math.max(0,16-(d-b)),f=a.setTimeout(function(){c(d+e)},e);return b=d+e,f}),a.cancelAnimationFrame||(a.cancelAnimationFrame=function(a){w(a)})}();var mb=a.requestAnimationFrame,nb=function(a,b,c,d){var e=function(){a.apply(b,c)};return d?v(e,d):mb(e)},ob=function(b,c){c?w(b):a.cancelAnimationFrame(b)},pb=function(){return a.performance&&a.performance.now?a.performance.now():Date.now()},qb=function(a){return a?V(a)?a:{}:!1},rb=function(){var a=function(a){a.duration&&(a.startTime=pb()),a.timeId=nb(a.tick,c,c,a.interval)};return function(b){return b=O(b),b.easing=b.easing||g.animEasing,b.duration||b.frames||(b.duration=g.animDuration),b.t=0,b.duration?b.interval=0:(b.frame=0,b.interval=b.interval||10),b.tick=function(){if(b.duration){var a=(pb()-b.startTime)/b.duration;a>1&&(a=1),b.t=a,b.action(b.easing(a),a),1===a?b.stop():b._isPaused||(b.timeId=nb(b.tick))}else b.frame++,a=b.t=b.frame/b.frames,b.action(b.easing(a),a),b.frame<b.frames?b._isPaused||(b.timeId=nb(b.tick,c,c,b.interval)):b.stop()},b.resume=function(){b._isPaused&&(delete b._isPaused,b.duration?b.t<1&&(b.startTime=pb()-b.duration*b.t,b.timeId=nb(b.tick)):b.frame<b.frames&&(b.timeId=nb(b.tick,c,c,b.interval)))},b.pause=function(){b._isPaused=!0},b.stop=function(a){b.isRunning()&&(b.duration?b.t<1&&a&&(b.t=1,b.action(b.easing(1))):b.frame<b.frames&&a&&(b.frame=b.frames,b.action(b.easing(1))),b.innerFunc&&b.innerFunc(),b.finishFunc&&b.finishFunc(),ob(b.timeId,!b.duration),delete b.timeId)},b.isRunning=function(){return b.timeId!=c},b.delay?nb(a,c,[b],b.delay):a(b),b}}(),sb=function(a,b){if(a===b)return 0;if(a==c&&b!=c)return 1;if(a!=c&&b==c)return-1;if(a==c&&b==c)return 0;var e,f=typeof a,g=typeof b;return"string"===f&&"string"===g?e=a.localeCompare(b):"number"===f&&"number"===g&&(e=a-b),e===d&&(e=(""+a).localeCompare(""+b)),e>0?1:0>e?-1:0},tb=1e-6,ub=function(a){this.s=u(a),this.c=t(a)};ub.prototype.tf=function(a,b){1===arguments.length&&(b=a.y,a=a.x);var c=this;return{x:c.c*a-c.s*b,y:c.s*a+c.c*b}};var vb=function(a,b){var c=F;a.target&&(c=!Ma(a),a=b.lp(a));var d=a.x,e=a.y;return c?{x:d-5,y:e-5,width:11,height:11}:{x:d-1,y:e-1,width:3,height:3}},wb=function(a,b){if(b){var c=new ub(b),d=a.width/2,e=a.height/2,f=Bb([c.tf(-d,-e),c.tf(d,-e),c.tf(d,e),c.tf(-d,e)]);return f.x+=a.x+d,f.y+=a.y+e,f}return a},xb=function(a,b){var c=b.x-a.x,d=b.y-a.y;return p(c*c+d*d)},yb=function(a){a.width<0&&(a.width=-a.width,a.x=a.x-a.width),a.height<0&&(a.height=-a.height,a.y=a.y-a.height)},zb=function(a,b,d){d==c&&(d=b),a.x-=b,a.y-=d,a.width=a.width+2*b,a.height=a.height+2*d},Ab=function(a,b){return a.x===b.x&&a.y===b.y&&a.width===b.width&&a.height===b.height},Bb=function(a,b){if(!a)return c;if(2===arguments.length)return a&&b?{x:r(a.x,b.x),y:r(a.y,b.y),width:s(a.x-b.x),height:s(a.y-b.y)}:c;var d=a,e=d.length;if(!e)return c;for(var f=1,g=d[0],h={x:g.x,y:g.y,width:0,height:0};e>f;f++){g=d[f];var i=r(h.x,g.x),j=q(h.x+h.width,g.x),k=r(h.y,g.y),l=q(h.y+h.height,g.y);h.x=i,h.y=k,h.width=j-i,h.height=l-k}return h},Cb=function(a,b){if(a&&!b)return O(a);if(!a&&b)return O(b);if(a&&b){var d={x:r(a.x,b.x),y:r(a.y,b.y)};return d.width=q(a.x+a.width,b.x+b.width)-d.x,d.height=q(a.y+a.height,b.y+b.height)-d.y,d}return c},Db=function(a,b){return!(!a||b.x<a.x||b.y<a.y||b.x>a.x+a.width||b.y>a.y+a.height)},Eb=function(a,b){if(!a||!b)return!1;var c=b.x,d=b.y,e=b.width,f=b.height,g=a.width,h=a.height;if(0>(g|h|e|f))return!1;var i=a.x,j=a.y;if(i>c||j>d)return!1;if(g+=i,e+=c,c>=e){if(g>=i||e>g)return!1}else if(g>=i&&e>g)return!1;if(h+=j,f+=d,d>=f){if(h>=j||f>h)return!1}else if(h>=j&&f>h)return!1;return!0},Fb=function(a,b){if(!a||!b)return!1;var c=b.width,d=b.height,e=a.width,f=a.height;if(0>=e||0>=f||0>=c||0>=d)return!1;var g=b.x,h=b.y,i=a.x,j=a.y;return e+=i,f+=j,c+=g,d+=h,e>g&&f>h&&c>i&&d>j},Gb=function(a,b){if(!a||!b)return c;var d=b.x,e=b.y,f=a.x,g=a.y,h=d,i=e,j=f,k=g;return h+=b.width,i+=b.height,j+=a.width,k+=a.height,f>d&&(d=f),g>e&&(e=g),h>j&&(h=j),i>k&&(i=k),h-=d,i-=e,0>=h||0>=i?c:{x:d,y:e,width:h,height:i}},Hb=function(a,b,c){return Ib(a.x,a.y,b.x,b.y,c.x,c.y,c.x+c.width,c.y,!0)||Ib(a.x,a.y,b.x,b.y,c.x+c.width,c.y,c.x+c.width,c.y+c.height,!0)||Ib(a.x,a.y,b.x,b.y,c.x+c.width,c.y+c.height,c.x,c.y+c.height,!0)||Ib(a.x,a.y,b.x,b.y,c.x,c.y+c.height,c.x,c.y,!0)},Ib=function(a,b,d,e,f,g,h,i,j){var k=(h-f)*(b-g)-(i-g)*(a-f),l=(i-g)*(d-a)-(h-f)*(e-b);if(0!==l){var m=k/l,n=a+m*(d-a),o=b+m*(e-b);return j&&(n+tb<r(a,d)||n-tb>q(a,d)||n+tb<r(f,h)||n-tb>q(f,h)||o+tb<r(b,e)||o-tb>q(b,e)||o+tb<r(g,i)||o-tb>q(g,i))?c:[n,o]}return c};N(j,{disabledBackground:"rgba(255,255,255,0.65)"},!0),N(g,{define:U,defineProperty:y,defineProperties:z,isSubClassOf:S,sortFunc:sb,setImage:Ja,getImage:Ka,drawText:xa,startAnim:rb,onImageLoad:L,onImageError:L,baseZIndex:d,isTouchable:F,mouseScroll:G,animDuration:200,animEasing:function(a){return a*a},labelFont:(F?"15":"12")+"px arial, sans-serif",devicePixelRatio:a.devicePixelRatio?a.devicePixelRatio:1,preventDefault:ea,zoomIncrement:1.3,scrollZoomIncrement:1.05,pinchZoomIncrement:1.08,maxZoom:20,minZoom:.01,closePopup:fa,callLater:nb,emptyArray:J,emptyRect:K,emptyFunc:L,createDiv:ga,createCanvas:ha,setCanvas:ka,setBorder:ia,toHTML:qa,layout:ra,getClientPoint:cb,getPagePoint:db,appendChild:ma,requestFocus:pa,removeHTML:na,clearHTML:oa,getWindowInfo:la,Mat2:ub,mixin:N,clone:O,createAnim:qb,addAccessor:P,createObject:Q,initObject:R,getTextSize:wa,getHitRect:vb,getTouchCount:_a,getPinchDist:eb,isNumber:Y,isString:W,isBoolean:X,isObject:V,isArray:$,isFunction:Z,addArray:aa,removeArray:ba,appendArray:ca,toArray:da,grow:zb,getDistance:xb,positiveRect:yb,isSameRect:Ab,unionPoint:Bb,unionRect:Cb,containsPoint:Db,containsRect:Eb,intersectsRect:Fb,intersection:Gb,intersectionLineRect:Hb,intersectionLineLine:Ib,getRotationRect:wb,getBreakableTextSize:ta,brighter:ya,darker:za,toColorData:Ba,toColorArray:Ca,drawBreakableText:ua,isDragging:gb,startDragging:lb,isEmptyObject:_,isDoubleClick:ab,isLeftButton:Sa,isCtrlDown:Ra,isShiftDown:Qa,isSelectAll:Oa,isDelete:Pa,isLeft:Ua,isUp:Va,isRight:Wa,isDown:Xa,isSpace:Ya,isEnter:Za,isEsc:$a,getId:M,isMouseEvent:Ma,checkTouch:bb,checkLoadingImageMap:Ga},!0),b.defineProperties(f.widget.Default,{version:{value:"1.0.0"}})}}(this,Object,null),function(a,b,c,d){"use strict";var e=a.qc,f="px",g=(b.getOwnPropertyDescriptor,Math),h=g.round,i=g.floor,j=g.ceil,k=g.sqrt,l=g.max,m=g.min,n=g.abs,o=g.cos,p=(g.acos,g.sin),q=(g.pow,g.asin,g.PI),r=2*q,s=q/2,t=(g.tan,g.atan2),u=(g.random,a.parseInt),v=a.setTimeout,w=e.widget.Default,x=w.Style,y=w.Color,z=w.Prototype,A=w.Shape=w.Shape||{},B=w.Gradient=w.Gradient||{},C=w.Vector=w.Vector||{},D=w.Renderer=w.Renderer||{},E=w.Editor=w.Editor||{},F=w.isTouchable,G=w.mixin,H=w.getId,I=w.labelFont,J=w.devicePixelRatio,K=w.preventDefault;G(y,{selectColor:"rgb(58, 152, 251)",labelColor:"#000",labelSelectColor:"#FFF",shadowColor:"rgba(0,0,0,0.5)",toolTipLabelColor:"black",toolTipBackground:"#FFFFE0",scrollBarColor:"rgba(0,0,0,0.35)",fadeColor:"rgba(255,255,255,0)",noteBackground:"#FFF060",shapeBackground:"#FFCB0A",shapeBorderColor:"#AE7200",gradientColor:"#FFF",imageBackground:"#3498DB",imageGradientColor:"#D9D9D9",iconBackground:"#868686",iconGradient:"#D9D9D9",lineColor:"#D9D9D9",tableHeaderBackground:"#ECF0F1",tableHeaderMoveBackground:"rgba(0,0,0,0.3)",tableHeaderInsertColor:"#1ABC9C",propertyTableBackground:"#ECF0F1"},!0);var L=y.selectColor,M=y.labelColor,N=y.labelSelectColor,O=y.shadowColor,P=y.toolTipLabelColor,Q=y.toolTipBackground,R=y.scrollBarColor,S=y.fadeColor,T=y.noteBackground,U=y.shapeBackground,V=y.shapeBorderColor,W=y.gradientColor,X=y.iconBackground,Y=(y.iconGradient,y.imageBackground),Z=y.imageGradientColor,$=y.lineColor;G(w,{lineJoin:"round",lineCap:"butt",imageGradient:"linear.northeast",indent:F?30:20,rowHeight:F?30:20,headerHeight:F?32:22,titleHeight:F?34:24,scrollBarColor:R,scrollBarSize:7,scrollBarTimeout:1e3,scrollBarMinLength:20,scrollBarActiveSize:F?32:16,toolTipDelay:800,toolTipContinuous:!1,toolTipPadding:5,toolTipLabelFont:I,toolTipLabelColor:P,toolTipBackground:Q,toolTipShadowColor:O},!0);{var _=w.define,aa=(w.defineProperty,w.defineProperties),ba=(w.sortFunc,w.setImage),ca=w.getImage,da=w.drawImage,ea=w.drawText,fa=w.startAnim,ga=(w.emptyFunc,w.emptyFunc,w.baseZIndex,w.mouseScroll),ha=(w.animDuration,w.animEasing,w.lineJoin),ia=w.lineCap,ja=w.imageGradient,ka=(w.zoomIncrement,w.scrollZoomIncrement,w.pinchZoomIncrement,w.maxZoom,w.minZoom,w.toolTipDelay,w.toolTipContinuous,w.toolTipPadding,w.toolTipLabelFont,w.toolTipLabelColor,w.toolTipBackground,w.toolTipShadowColor,w.scrollBarColor,w.scrollBarSize,w.scrollBarTimeout,w.scrollBarMinLength,w.scrollBarActiveSize,w.closePopup,w.hideToolTip),la=w.showToolTip,ma=w.callLater,na=w.emptyArray,oa=w.emptyRect,pa=(w.emptyFunc,w.createDiv),qa=w.createCanvas,ra=w.setCanvas,sa=w.setBorder,ta=w.toHTML,ua=w.layout,va=w.getClientPoint,wa=w.getPagePoint,xa=w.appendChild,ya=w.requestFocus,za=w.removeHTML,Aa=w.clearHTML,Ba=w.getWindowInfo,Ca=w.Mat2,Da=w.clone,Ea=w.createAnim,Fa=w.addAccessor,Ga=w.createObject,Ha=w.initObject,Ia=w.getTextSize,Ja=w.getHitRect,Ka=w.getTouchCount,La=w.getPinchDist,Ma=w.isNumber,Na=w.isString,Oa=w.isBoolean,Pa=w.isObject,Qa=w.isArray,Ra=w.isFunction,Sa=w.addArray,Ta=w.removeArray,Ua=w.appendArray,Va=w.toArray,Wa=w.toCurvePoints,Xa=w.getLineOffsetInfo,Ya=w.getLineCacheInfo,Za=w.grow,$a=w.getDistance,_a=w.positiveRect,ab=w.isSameRect,bb=w.unionPoint,cb=w.unionRect,db=w.containsPoint,eb=w.containsRect,fb=w.intersectsRect,gb=w.intersection,hb=(w.intersectionLineRect,w.intersectionLineLine,w.getRotationRect),ib=w.getBreakableTextSize,jb=w.brighter,kb=w.darker,lb=w.toColorData,mb=w.toColorArray,nb=w.drawShape,ob=w.fillShape,pb=w.fillPattern,qb=w.fillRect,rb=w.drawBorder,sb=w.drawArc,tb=w.drawRoundRect,ub=w.draw3dRect,vb=w.draw3dBorder,wb=w.drawPoints,xb=w.drawBreakableText,yb=w.isDragging,zb=w.startDragging,Ab=w.isEmptyObject,Bb=w.isDoubleClick,Cb=w.isLeftButton,Db=w.isCtrlDown,Eb=w.isShiftDown,Fb=w.isSelectAll,Gb=w.isDelete,Hb=w.isLeft,Ib=w.isUp,Jb=w.isRight,Kb=w.isDown,Lb=w.isSpace,Mb=w.isEnter,Nb=w.isEsc,Ob=w.isMouseEvent,Pb=w.checkTouch,Qb=w.checkLoadingImageMap,Rb=function(a,b,c,d,e){
var f=a.getContext("2d");return f.save(),b=b||0,c=c||0,d=d||1,Ub(f,b*J,c*J),d*=J,1!==d&&f.scale(d,d),e&&(f.beginPath(),f.rect(e.x,e.y,e.width,e.height),f.clip(),f.clearRect(e.x,e.y,e.width,e.height)),f},Sb=function(a,b,c){return b&&a.setLineDash?(a.setLineDash(b),c&&(a.lineDashOffset=c),a):void 0},Tb=function(a,b){b&&a.setLineDash&&(a.setLineDash(na),a.lineDashOffset=0)},Ub=function(a,b,c){a.translate(b,c)},Vb=function(a,b){a.rotate(b)},da=function(a,b,d,e,f,g,i,j,k,l,n){if(Na(b)&&(b=ca(b,l)),b!=c){var o,p=Zb(b,j),q=$b(b,j);if("uniform"===d?(o=m(g/p,i/q),p*=o,q*=o,e+=h((g-p)/2),f+=h((i-q)/2),g=p,i=q):("centerUniform"===d||d==c)&&((p>g||q>i)&&(o=m(g/p,i/q),p*=o,q*=o),e+=h((g-p)/2),f+=h((i-q)/2),g=p,i=q),"center"===d){var r=n!==!1&&(p>g||q>i);r&&(a.save(),a.beginPath(),a.rect(e,f,g,i),a.clip()),gc(a,b,e+g/2-p/2,f+i/2-q/2,p,q,j,k,l),r&&a.restore()}else gc(a,b,e,f,g,i,j,k,l)}},nb=function(a,b,c,d,e,f){a.beginPath(),A[b](a,c.x,c.y,c.width,c.height,d,e,f)},ob=function(a,b,c,d,e,f,g){var h=B[c];a.fillStyle=h?h(a,b,d||W,e.x,e.y,e.width,e.height,f,g):b},pb=function(a,b){a.fillStyle=a.createPattern(b,"repeat")},qb=function(a,b,c,d,e,f){f&&(a.fillStyle=f),a.beginPath(),a.rect(b,c,d,e),a.fill()},rb=function(a,b,c,d,e,f,g,i){b&&(i||(i={left:1,right:1,top:1,bottom:1}),c=h(c),d=h(d),g||(g=1),a.fillStyle=b,a.beginPath(),i.left&&a.rect(c,d,g,f),i.top&&a.rect(c,d,e,g),i.bottom&&a.rect(c,d+f-g,e,g),i.right&&a.rect(c+e-g,d,g,f),a.fill())},vb=function(a,b,c,d){var e,f,g,h=lb(b),i=d,k=h[0],l=h[1],n=h[2];if(c){var o=lb(c);e=o[0]-k,f=o[1]-l,g=o[2]-n}else e=255-k,f=255-l,g=255-n;for(var p=d>10?1:.5;(d-=p)>0;){var q=1-d/i,r=k+e*q,s=l+f*q,t=n+g*q;r=m(j(r),255),s=m(j(s),255),t=m(j(t),255),a.strokeStyle="rgb("+r+","+s+","+t+")",a.lineWidth=d,a.stroke()}},sb=function(a,b,c,d,e,f,g,h){var i,k,l,m,r,s,t,u,v,w,x;if(n(e)>2*q&&(e=2*q),r=j(n(e)/(q/4)),i=e/r,k=-i,l=-d,r>0){s=b+o(d)*f,t=c+p(-d)*g,h?a.lineTo(s,t):a.moveTo(s,t);for(var y=0;r>y;y++)l+=k,m=l-k/2,u=b+o(l)*f,v=c+p(l)*g,w=b+o(m)*(f/o(k/2)),x=c+p(m)*(g/o(k/2)),a.quadraticCurveTo(w,x,u,v)}},tb=function(a,b,d,e,f,g,h,i,j){h==c&&(h=g),i==c&&(i=g),j==c&&(j=g);var k=b+e,l=d+f,m=f>e?2*e:2*f;g=m>g?g:m,h=m>h?h:m,i=m>i?i:m,j=m>j?j:m;var n=.29*j,o=.58*j;a.moveTo(k,l-j),a.quadraticCurveTo(k,l-o,k-n,l-n),a.quadraticCurveTo(k-o,l,k-j,l),n=.29*i,o=.58*i,a.lineTo(b+i,l),a.quadraticCurveTo(b+o,l,b+n,l-n),a.quadraticCurveTo(b,l-o,b,l-i),n=.29*g,o=.58*g,a.lineTo(b,d+g),a.quadraticCurveTo(b,d+o,b+n,d+n),a.quadraticCurveTo(b+o,d,b+g,d),n=.29*h,o=.58*h,a.lineTo(k-h,d),a.quadraticCurveTo(k-o,d,k-n,d+n),a.quadraticCurveTo(k,d+o,k,d+h),a.lineTo(k,l-j)},ub=function(a,b,c,d){var e=d.x,f=d.y,g=d.width,h=d.height;if(!(!b||!c||0>=g||0>=h)){var i,j=jb(b),k=kb(b),l=c>0;1===c||-1===c?(a.fillStyle=l?j:k,a.beginPath(),a.rect(e,f,1,h),a.rect(e,f,g,1),a.fill(),a.fillStyle=l?k:j,a.beginPath(),a.rect(e,f+h-1,g,1),a.rect(e+g-1,f,1,h),a.fill()):(c=m(n(c),m(g/2,h/2)),i=a.createLinearGradient(e,f,e+c,f),i.addColorStop(0,l?j:k),i.addColorStop(1,b),a.fillStyle=i,a.beginPath(),a.moveTo(e,f),a.lineTo(e+c,f+c),a.lineTo(e+c,f+h-c),a.lineTo(e,f+h),a.lineTo(e,f),a.fill(),i=a.createLinearGradient(e,f,e,f+c),i.addColorStop(0,l?j:k),i.addColorStop(1,b),a.fillStyle=i,a.beginPath(),a.moveTo(e,f),a.lineTo(e+c,f+c),a.lineTo(e+g-c,f+c),a.lineTo(e+g,f),a.lineTo(e,f),a.fill(),i=a.createLinearGradient(e,f+h,e,f+h-c),i.addColorStop(0,l?k:j),i.addColorStop(1,b),a.fillStyle=i,a.beginPath(),a.moveTo(e,f+h),a.lineTo(e+c,f+h-c),a.lineTo(e+g-c,f+h-c),a.lineTo(e+g,f+h),a.lineTo(e,f+h),a.fill(),i=a.createLinearGradient(e+g,f,e+g-c,f),i.addColorStop(0,l?k:j),i.addColorStop(1,b),a.fillStyle=i,a.beginPath(),a.moveTo(e+g,f),a.lineTo(e+g-c,f+c),a.lineTo(e+g-c,f+h-c),a.lineTo(e+g,f+h),a.lineTo(e+g,f),a.fill())}},wb=function(a,b,c,d){if(a.beginPath(),c&&c.length){for(var e,f,g,h,i=0,j=0,k=c.length;k>j;j++)e=c[j],1===e?(f=b[i++],a.moveTo(f.x,f.y)):2===e?(f=b[i++],a.lineTo(f.x,f.y)):3===e?(f=b[i++],g=b[i++],a.quadraticCurveTo(f.x,f.y,g.x,g.y)):4===e?(f=b[i++],g=b[i++],h=b[i++],a.bezierCurveTo(f.x,f.y,g.x,g.y,h.x,h.y)):5===e&&a.closePath();d&&5!==e&&a.closePath()}else{var l,m,n,o=b.length;if(o>0){for(l=b[0],a.moveTo(l.x,l.y),m=1;o>m;m++)n=b[m],a.lineTo(n.x,n.y);d&&a.closePath()}}},Wb=w.CompStack=[],Xb=/^style@/,Yb=/^attr@/,Zb=function(a,b){return Na(a)&&(a=ca(a)),a?_b(a.width,b):0},$b=function(a,b){return Na(a)&&(a=ca(a)),a?_b(a.height,b):0},_b=function(a,b,e){if(!a||!a.func)return a;var f,g=a.func,h=a.value;return Ra(g)?f=g(b,e):b?Xb.test(g)?f=b.s(g.slice(6)):Yb.test(g)?f=b.a(g.slice(5)):(f=b[g],Ra(f)&&(f=f(e))):f=h,h!==d&&f==c?h:f},ac=function(a,b,c,d){var e=_b(a,b,c);if(d&&e){var f=mb(d);return e=lb(e),"rgba("+i(e[0]*f[0])+","+i(e[1]*f[1])+","+i(e[2]*f[2])+","+e[3]+")"}return e},bc=function(a,b,c,d){var e=_b(a.rect,c,d);if(e){var f=e.length,g=_b(a.relative,c,d),h=b.width,i=b.height;if(4===f)e={x:e[0],y:e[1],width:e[2],height:e[3]},g&&(e.x*=h,e.y*=i,e.width*=h,e.height*=i);else if(3===f){var j=e[0];e={width:e[1],height:e[2]},g&&(e.width*=h,e.height*=i),j=Jc(j,b,e),e.x=j.x-e.width/2,e.y=j.y-e.height/2}var k=_b(a.offsetX,c,d);k&&(e.x+=k),k=_b(a.offsetY,c,d),k&&(e.y+=k);var l=_b(a.anchorPosition,c,d);if(l)e.anchorPosition={x:l[0]*(g?b.width:1),y:l[1]*(g?b.height:1)};else{var m=_b(a.anchor,c,d),n=m?m[0]:.5,o=m?m[1]:.5;e.anchorPosition={x:e.x+e.width*n,y:e.y+e.height*o}}}return e},cc=function(a,b,d,e,f){var g=_b(b.position,e,f);if(g){var h=g[0],i=g[1],j=_b(b.relative,e,f),k=_b(b.width,e,f),l=_b(b.height,e,f),m=_b(b.anchor,e,f),n=m?m[0]:.5,o=m?m[1]:.5;if(j&&(h*=d.width,i*=d.height,Ma(k)&&(k*=d.width),Ma(l)&&(l*=d.height)),k==c||l==c){if("text"===a){var p=Ia(_b(b.font,e,f),_b(b.text,e,f));k==c&&(k=p.width),l==c&&(l=p.height)}else if("image"===a){var q=ca(_b(b.name,e,f));k==c&&(k=Zb(q,e)),l==c&&(l=$b(q,e))}k==c&&(k=0),l==c&&(l=0)}var r=_b(b.offsetX,e,f);r&&(h+=r),r=_b(b.offsetY,e,f),r&&(i+=r);var s={x:-k*n+h,y:-l*o+i,width:k,height:l},t=_b(b.anchorPosition,e,f);return s.anchorPosition=t?{x:t[0]*(j?d.width:1),y:t[1]*(j?d.height:1)}:{x:h,y:i},s}return c},dc=function(a,b,d,e,f){if("shape"===a){var g=_b(b.points,e,f);if(g){if(!g._rect_){for(var h=_b(b.relative,e,f),i=[],j=g.length,k=0;j>k;k+=2)i.push({x:g[k]*(h?d.width:1),y:g[k+1]*(h?d.height:1)});var l=bb(i);if(l){var m=_b(b.anchorPosition,e,f);if(m)l.anchorPosition={x:m[0]*(h?d.width:1),y:m[1]*(h?d.height:1)};else{var n=_b(b.anchor,e,f),o=n?n[0]:.5,p=n?n[1]:.5;l.anchorPosition={x:l.x+l.width*o,y:l.y+l.height*p}}return l.points=i,g._rect_=l}}return g._rect_}}return c},ec=function(a,b,c,d,e,f,g){var h=ac(d.background,e,f,g),i=ca(_b(d.repeatImage,e,f),g),j=_b(d.info,e,f);i?pb(a,i):h&&ob(a,h,_b(d.gradient,e,f),ac(d.gradientColor,e,f,g),c),nb(a,b,c,j,e,f),(i||h)&&a.fill();var k=_b(d.borderWidth,e,f);if(k){var l=ac(d.borderColor,e,f,g),m=_b(d.borderDashPattern,e,f);Sb(a,m,_b(d.borderDashOffset,e,f)),a.lineWidth=k,a.strokeStyle=l,a.stroke(),_b(d.borderGradient,e,f)&&vb(a,l,ac(d.borderGradientColor,e,f,g),k),Tb(a,m)}if(k=_b(d.border2Width,e,f)){var l=ac(d.border2Color,e,f,g),m=_b(d.border2DashPattern,e,f);Sb(a,m,_b(d.border2DashOffset,e,f)),a.lineWidth=k,a.strokeStyle=l,a.stroke(),_b(d.border2Gradient,e,f)&&vb(a,l,ac(d.border2GradientColor,e,f,g),k),Tb(a,m)}"rect"===b&&j&&ub(a,h,j.depth,c)},fc=function(a,b,d,e,f,g){var h=_b(b.alpha,d,e),i=_b(b.join,d,e)||ha,j=_b(b.cap,d,e)||ia,k=_b(b.shadow,d,e),l=_b(b.rotation,d,e),m=_b(b.scale,d,e),n=_b(b.type,d,e),o=_b(b.clip,d,e);Ma(m)&&(m=[m,m]);var p=l||o||!m||1!==m[0]||1!==m[1];if(h!=c){var q=a.globalAlpha;a.globalAlpha*=h}var r=a.lineJoin,s=a.lineCap;if(a.lineJoin=i,a.lineCap=j,k){var t=a.shadowOffsetX,u=a.shadowOffsetY,v=a.shadowBlur,w=a.shadowColor,x=_b(b.shadowOffsetX,d,e),y=_b(b.shadowOffsetY,d,e),z=_b(b.shadowBlur,d,e),B=_b(b.shadowColor,d,e);a.shadowOffsetX=x==c?3:x,a.shadowOffsetY=y==c?3:y,a.shadowBlur=z==c?6:z,a.shadowColor=B||O}var D=dc(n,b,g,d,e)||bc(b,g,d,e)||cc(n,b,g,d,e);if(D){if(p){var E=D.anchorPosition;a.save(),Ub(a,E.x,E.y),l&&Vb(a,l),m&&a.scale(m[0],m[1]),Ub(a,-E.x,-E.y),o&&(Ra(o)?o(a,D,d,e,b):(a.beginPath(),a.rect(D.x,D.y,D.width,D.height),a.clip()))}var F=b.bottomShape;if(F){var G=D;F.padding&&(G=Da(G),Za(G,F.padding)),ec(a,_b(F.type,d,e),G,F,d,e,f)}Ra(n)?n(a,D,b,d,e,f):C[n]?C[n](a,D,b,d,e,f):A[n]&&ec(a,n,D,b,d,e,f);var H=b.topShape;if(H){var I=D;H.padding&&(I=Da(I),Za(I,H.padding)),ec(a,_b(H.type,d,e),I,H,d,e,f)}p&&a.restore()}k&&(a.shadowOffsetX=t,a.shadowOffsetY=u,a.shadowBlur=v,a.shadowColor=w),a.lineJoin=r,a.lineCap=s,h!=c&&(a.globalAlpha=q)},gc=function(a,b,d,e,f,g,h,i,j){if(!(!b||0>=f||0>=g)){if(b.tagName)return void a.drawImage(b,d,e,f,g);if(_b(b.visible,h,i)!==!1){j||(j=_b(b.blendColor,h,i));var k=Zb(b,h),l=$b(b,h),m={x:0,y:0,width:k,height:l},n=_b(b.clip,h,i),o=_b(b.alpha,h,i);a.save(),Ub(a,d,e),(k!==f||l!==g)&&a.scale(f/k,g/l),n&&(Ra(n)?n(a,m,h,i,b):(a.beginPath(),a.rect(0,0,k,l),a.clip())),o!=c&&(a.globalAlpha*=o),_b(b.comps,h,i).forEach(function(b){_b(b.visible,h,i)!==!1&&(Wb.splice(0,0,b),fc(a,b,h,i,j,m),Wb.splice(0,1))}),a.restore()}}},hc=e.widget.TWEEN=function(){var b=[];return{getAll:function(){return b},removeAll:function(){b=[]},add:function(a){b.push(a)},remove:function(a){var c=b.indexOf(a);-1!==c&&b.splice(c,1)},update:function(c){if(0===b.length)return!1;var e=0;for(c=c!==d?c:"undefined"!=typeof a&&a.performance!==d&&a.performance.now!==d?a.performance.now():Date.now();e<b.length;)b[e].update(c)?e++:b.splice(e,1);return!0}}}();e.widget.Tween=function(b){var c=b,e={},f={},g={},h=1e3,i=0,j=!1,k=!1,l=!1,m=0,n=null,o=hc.Easing.Linear.None,p=hc.Interpolation.Linear,q=[],r=null,s=!1,t=null,u=null,v=null;for(var w in b)e[w]=parseFloat(b[w],10);this.to=function(a,b){return b!==d&&(h=b),f=a,this},this.start=function(b){hc.add(this),k=!0,s=!1,n=b!==d?b:"undefined"!=typeof a&&a.performance!==d&&a.performance.now!==d?a.performance.now():Date.now(),n+=m;for(var h in f){if(f[h]instanceof Array){if(0===f[h].length)continue;f[h]=[c[h]].concat(f[h])}e[h]=c[h],e[h]instanceof Array==!1&&(e[h]*=1),g[h]=e[h]||0}return this},this.stop=function(){return k?(hc.remove(this),k=!1,null!==v&&v.call(c),this.stopChainedTweens(),this):this},this.stopChainedTweens=function(){for(var a=0,b=q.length;b>a;a++)q[a].stop()},this.delay=function(a){return m=a,this},this.repeat=function(a){return i=a,this},this.yoyo=function(a){return j=a,this},this.easing=function(a){return o=a,this},this.interpolation=function(a){return p=a,this},this.chain=function(){return q=arguments,this},this.onStart=function(a){return r=a,this},this.onUpdate=function(a){return t=a,this},this.onComplete=function(a){return u=a,this},this.onStop=function(a){return v=a,this},this.update=function(a){var b;if(n>a)return!0;s===!1&&(null!==r&&r.call(c),s=!0);var d=(a-n)/h;d=d>1?1:d;var k=o(d);for(b in f){var v=e[b]||0,w=f[b];w instanceof Array?c[b]=p(w,k):("string"==typeof w&&(w=v+parseFloat(w,10)),"number"==typeof w&&(c[b]=v+(w-v)*k))}if(null!==t&&t.call(c,k),1==d){if(i>0){isFinite(i)&&i--;for(b in g){if("string"==typeof f[b]&&(g[b]=g[b]+parseFloat(f[b],10)),j){var x=g[b];g[b]=f[b],f[b]=x}e[b]=g[b]}return j&&(l=!l),n=a+m,!0}null!==u&&u.call(c);for(var y=0,z=q.length;z>y;y++)q[y].start(a);return!1}return!0}}}hc.Easing={Linear:{None:function(a){return a}},Quadratic:{In:function(a){return a*a},Out:function(a){return a*(2-a)},InOut:function(a){return(a*=2)<1?.5*a*a:-.5*(--a*(a-2)-1)}},Cubic:{In:function(a){return a*a*a},Out:function(a){return--a*a*a+1},InOut:function(a){return(a*=2)<1?.5*a*a*a:.5*((a-=2)*a*a+2)}},Quartic:{In:function(a){return a*a*a*a},Out:function(a){return 1- --a*a*a*a},InOut:function(a){return(a*=2)<1?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2)}},Quintic:{In:function(a){return a*a*a*a*a},Out:function(a){return--a*a*a*a*a+1},InOut:function(a){return(a*=2)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)}},Sinusoidal:{In:function(a){return 1-Math.cos(a*Math.PI/2)},Out:function(a){return Math.sin(a*Math.PI/2)},InOut:function(a){return.5*(1-Math.cos(Math.PI*a))}},Exponential:{In:function(a){return 0===a?0:Math.pow(1024,a-1)},Out:function(a){return 1===a?1:1-Math.pow(2,-10*a)},InOut:function(a){return 0===a?0:1===a?1:(a*=2)<1?.5*Math.pow(1024,a-1):.5*(-Math.pow(2,-10*(a-1))+2)}},Circular:{In:function(a){return 1-Math.sqrt(1-a*a)},Out:function(a){return Math.sqrt(1- --a*a)},InOut:function(a){return(a*=2)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)}},Elastic:{In:function(a){var b,c=.1,d=.4;return 0===a?0:1===a?1:(!c||1>c?(c=1,b=d/4):b=d*Math.asin(1/c)/(2*Math.PI),-(c*Math.pow(2,10*(a-=1))*Math.sin(2*(a-b)*Math.PI/d)))},Out:function(a){var b,c=.1,d=.4;return 0===a?0:1===a?1:(!c||1>c?(c=1,b=d/4):b=d*Math.asin(1/c)/(2*Math.PI),c*Math.pow(2,-10*a)*Math.sin(2*(a-b)*Math.PI/d)+1)},InOut:function(a){var b,c=.1,d=.4;return 0===a?0:1===a?1:(!c||1>c?(c=1,b=d/4):b=d*Math.asin(1/c)/(2*Math.PI),(a*=2)<1?-.5*c*Math.pow(2,10*(a-=1))*Math.sin(2*(a-b)*Math.PI/d):c*Math.pow(2,-10*(a-=1))*Math.sin(2*(a-b)*Math.PI/d)*.5+1)}},Back:{In:function(a){var b=1.70158;return a*a*((b+1)*a-b)},Out:function(a){var b=1.70158;return--a*a*((b+1)*a+b)+1},InOut:function(a){var b=2.5949095;return(a*=2)<1?.5*a*a*((b+1)*a-b):.5*((a-=2)*a*((b+1)*a+b)+2)}},Bounce:{In:function(a){return 1-hc.Easing.Bounce.Out(1-a)},Out:function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},InOut:function(a){return.5>a?.5*hc.Easing.Bounce.In(2*a):.5*hc.Easing.Bounce.Out(2*a-1)+.5}}},hc.Interpolation={Linear:function(a,b){var c=a.length-1,d=c*b,e=Math.floor(d),f=hc.Interpolation.Utils.Linear;return 0>b?f(a[0],a[1],d):b>1?f(a[c],a[c-1],c-d):f(a[e],a[e+1>c?c:e+1],d-e)},Bezier:function(a,b){var c,d=0,e=a.length-1,f=Math.pow,g=hc.Interpolation.Utils.Bernstein;for(c=0;e>=c;c++)d+=f(1-b,e-c)*f(b,c)*a[c]*g(e,c);return d},CatmullRom:function(a,b){var c=a.length-1,d=c*b,e=Math.floor(d),f=hc.Interpolation.Utils.CatmullRom;return a[0]===a[c]?(0>b&&(e=Math.floor(d=c*(1+b))),f(a[(e-1+c)%c],a[e],a[(e+1)%c],a[(e+2)%c],d-e)):0>b?a[0]-(f(a[0],a[0],a[1],a[1],-d)-a[0]):b>1?a[c]-(f(a[c],a[c],a[c-1],a[c-1],d-c)-a[c]):f(a[e?e-1:0],a[e],a[e+1>c?c:e+1],a[e+2>c?c:e+2],d-e)},Utils:{Linear:function(a,b,c){return(b-a)*c+a},Bernstein:function(a,b){var c=hc.Interpolation.Utils.Factorial;return c(a)/c(b)/c(a-b)},Factorial:function(){var a=[1];return function(b){var c,d=1;if(a[b])return a[b];for(c=b;c>1;c--)d*=c;return a[b]=d}}(),CatmullRom:function(a,b,c,d,e){var f=.5*(c-a),g=.5*(d-b),h=e*e,i=e*h;return(2*(b-c)+f+g)*i+(-3*(b-c)-2*f-g)*h+f*e+b}}},a.setTimeout&&!function(){function a(){requestAnimationFrame(a),hc.update()}a()}();var ic=function(a,b){b.push(a),a.children.forEach(function(a){ic(a,b)})},jc=function(a){return a==c?a:parseFloat(a.toFixed(3))},kc=function(a,b,c,d,e){b&&qb(a,c,d,1,e,b)},lc=function(a,b,d,e,f,g,h,i,j,k,l,m,n){g||(l=0);var o,p=Ia(i,h).width;o="center"===k?b+(e-p-l)/2:"right"===k?b+e-p-l:b,l&&da(a,g,c,o,d,l,f,m,n),ea(a,h,i,j,o+l,d,p,f,"center")},mc=function(a,b,c){return b||(b=zc),new w.Class[b[a]||a](c)},nc=function(a,b){for(var c=[],d=0;d<b.length;d++){var e=b[d],f=e.type,g=mc(f);c.push(g),sc(g,e)}a.setItems(c)},oc=function(a,b){for(var c=[],d=0;d<b.length;d++){var e=b[d],f=e.type,g=mc(f);c.push(g),sc(g,e)}a.setItems(c)},pc=function(a,b){for(var b=JSON.parse(JSON.stringify(b)),c=0;c<b.length;c++)for(var d=b[c].cells,e=0;e<d.length;e++){var f=d[e],g=f.elementConfig,h=g.type,i=mc(h);f.element=i,sc(i,g)}a.setItems(b)},qc=function(a,b){for(var b=JSON.parse(JSON.stringify(b)),c=0;c<b.length;c++){var d=b[c].elementConfig,e=d.type,f=mc(e);b[c].element=f,sc(f,d)}a.setItems(b)},rc=qc,sc=function(a,b){for(var c in b)if(["layout","contextMenu"].indexOf(c)>=0)if("layout"===c){var d,e=b.layout;if(Na(e))d=mc(e,Ac,a);else{d=mc(e.type,Ac,a);for(var f in e)"type"!==f&&Ic(d,"property",f,e[f])}a.layout=d}else{var g=mc(b[c].type);sc(g,b[c]),Ic(a,"property",c,g)}else if("children"===c){var e=b.layout;!e||"table"!==e&&"table"!==e.type?!e||"border"!==e&&"border"!==e.type?"tabs"===b.type?rc(a,b[c]):"toolbar"===b.type?oc(a,b[c]):nc(a,b[c]):qc(a,b[c]):pc(a,b[c])}else Ic(a,"property",c,b[c])},tc=function(a){Na(a)&&(a=JSON.parse(a));var b=a.type,c=mc(b);return sc(c,a),c};ba("sortDesc",{width:16,height:16,comps:[{type:"triangle",rect:[4,4,8,7],background:X,rotation:q}]}),ba("sortAsc",{width:16,height:16,comps:[{type:"triangle",rect:[4,4,8,7],background:X}]}),ba("expand",{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:X,rotation:q}]}),ba("collapse",{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:X,rotation:s}]}),ba("check",{width:16,height:16,comps:[{type:"rect",rect:[1,1,14,14],background:L},{type:"border",rect:[1,1,14,14],borderWidth:1,borderColor:X},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:"#FFF"}]}),ba("uncheck",{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],borderWidth:1,borderColor:X}]}),ba("radioon",{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:X,background:"#FFF"},{type:"circle",rect:[4,4,8,8],background:L}]}),ba("radiooff",{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:X}]});var uc={translateX:1,sortColumn:1},vc={translateX:!0,translateY:!0,scrollBarMode:!0},wc={dataModel:1,sortColumn:1,sortFunc:1,visibleFunc:1,rootData:1,rootVisible:1},xc={sortable:1,sortOrder:1,sortFunc:1},yc={dataModel:1,sortFunc:1,visibleFunc:1,categorizable:1},zc={container:"qc.widget.Container",panel:"qc.widget.Panel",dialog:"qc.widget.Dialog",combobox:"qc.widget.ComboBox",slider:"qc.widget.Slider",colorchooser:"qc.widget.ColorChooser",button:"qc.widget.Button",togglebutton:"qc.widget.ToggleButton",checkbox:"qc.widget.CheckBox",radiobutton:"qc.widget.RadioButton",table:"qc.widget.Table",list:"qc.widget.List",tree:"qc.widget.Tree",propertytable:"qc.widget.PropertyTable",treetable:"qc.widget.TreeTable",graphview:"qc.widget.graph.GraphView",label:"qc.widget.Label",toolbar:"qc.widget.Toolbar",textfield:"qc.widget.TextField",textarea:"qc.widget.TextArea",tablepane:"qc.widget.TablePane",tabs:"qc.widget.Tabs",contextmenu:"qc.widget.ContextMenu",menu:"qc.widget.Menu","|":"qc.widget.toolbar.Separator",separator:"qc.widget.toolbar.Separator",buttongroup:"qc.widget.ButtonGroup"},Ac={fit:"qc.widget.layout.FitLayout",vbox:"qc.widget.layout.VBoxLayout",hbox:"qc.widget.layout.HBoxLayout",accordion:"qc.widget.layout.AccordionLayout",table:"qc.widget.layout.TableLayout",border:"qc.widget.layout.BorderLayout"},Bc=c,Cc=c,Dc=c,Ec=function(){Dc&&(clearTimeout(Dc.timeout),Dc=c)},Fc=function(){Dc&&la(Dc.event,Dc.content)},Gc=function(){return Bc&&Bc.parentNode?!0:Cc&&Cc.parentNode?!0:!1},ka=function(){za(Bc),za(Cc),Ec()},la=function(a,b){if(!a||b==c)return void ka();var d,e;Bc||(Bc=pa(),Cc=pa(),e=Bc.style,w.baseZIndex!=c&&(e.zIndex=u(w.baseZIndex)+3+"",Cc.style=e.zIndex),e.whiteSpace="nowrap",e.color=w.toolTipLabelColor,e.background=w.toolTipBackground,e.font=w.toolTipLabelFont,e.padding=w.toolTipPadding+f,e.boxShadow="0px 0px 3px "+w.toolTipShadowColor),b.html?(b=b.html,d=Cc,za(Bc)):(d=Bc,za(Cc)),e=d.style,d.innerHTML=b,d.parentNode||xa(document.body,d);var g=wa(a),h=Ba(),i=g.x,j=g.y,k=Ob(a)?12:60;if(Ob(a)){e.left=i+k+f,e.top=j+k+f;var l=d.getBoundingClientRect();l.left+l.width>h.width&&(e.left=i-k-l.width+f),l.top+l.height>h.height&&(e.top=j-k-l.height+f),l.left<0&&(e.left=i+k+f),l.top<0&&(e.top=j+k+f)}else{var l=d.getBoundingClientRect();e.left=i-l.width/2+f,e.top=j-l.height-k<h.top?j+k+f:j-l.height-k+f}Ec()};a.addEventListener&&(a.addEventListener("mouseout",function(a){var b=a.relatedTarget;(!b||Dc&&!Dc.view.contains(b))&&(Ec(),ka())},!1),a.addEventListener(ga,function(){Ec(),ka()},!1));var Hc=function(a,b,c){if(a&&c){if("style"===b)return a.getStyle(c);if("attr"===b)return a.getAttr(c);var e=a[c];return Ra(e)?e():e}return d},Ic=function(a,b,c,d){a&&c&&("style"===b?a.s(c,d):"attr"===b?a.a(c,d):Ra(a[c])?a[c](d):a[c]=d)},Jc=function(){var a={1:function(a,b){return{x:a.x-b.width/2,y:a.y-b.height/2}},2:function(a,b){return{x:a.x+b.width/2,y:a.y-b.height/2}},3:function(a,b){return{x:a.x+a.width/2,y:a.y-b.height/2}},4:function(a,b){return{x:a.x+a.width-b.width/2,y:a.y-b.height/2}},5:function(a,b){return{x:a.x+a.width+b.width/2,y:a.y-b.height/2}},6:function(a){return{x:a.x,y:a.y}},7:function(a){return{x:a.x+a.width/2,y:a.y}},8:function(a){return{x:a.x+a.width,y:a.y}},9:function(a,b){return{x:a.x-b.width/2,y:a.y+b.height/2}},10:function(a,b){return{x:a.x+b.width/2,y:a.y+b.height/2}},11:function(a,b){return{x:a.x+a.width/2,y:a.y+b.height/2}},12:function(a,b){return{x:a.x-b.width/2+a.width,y:a.y+b.height/2}},13:function(a,b){return{x:a.x+a.width+b.width/2,y:a.y+b.height/2}},14:function(a,b){return{x:a.x-b.width/2,y:a.y+a.height/2}},15:function(a){return{x:a.x,y:a.y+a.height/2}},16:function(a,b){return{x:a.x+b.width/2,y:a.y+a.height/2}},17:function(a){return{x:a.x+a.width/2,y:a.y+a.height/2}},18:function(a,b){return{x:a.x+a.width-b.width/2,y:a.y+a.height/2}},19:function(a){return{x:a.x+a.width,y:a.y+a.height/2}},20:function(a,b){return{x:a.x+a.width+b.width/2,y:a.y+a.height/2}},21:function(a,b){return{x:a.x-b.width/2,y:a.y+a.height-b.height/2}},22:function(a,b){return{x:a.x+b.width/2,y:a.y+a.height-b.height/2}},23:function(a,b){return{x:a.x+a.width/2,y:a.y+a.height-b.height/2}},24:function(a,b){return{x:a.x+a.width-b.width/2,y:a.y+a.height-b.height/2}},25:function(a,b){return{x:a.x+a.width+b.width/2,y:a.y+a.height-b.height/2}},26:function(a){return{x:a.x,y:a.y+a.height}},27:function(a){return{x:a.x+a.width/2,y:a.y+a.height}},28:function(a){return{x:a.x+a.width,y:a.y+a.height}},29:function(a,b){return{x:a.x-b.width/2,y:a.y+a.height+b.height/2}},30:function(a,b){return{x:a.x+b.width/2,y:a.y+a.height+b.height/2}},31:function(a,b){return{x:a.x+a.width/2,y:a.y+a.height+b.height/2}},32:function(a,b){return{x:a.x+a.width-b.width/2,y:a.y+a.height+b.height/2}},33:function(a,b){return{x:a.x+a.width+b.width/2,y:a.y+a.height+b.height/2}},34:function(a,b){return{x:a.x,y:a.y-b.height/2}},35:function(a,b){return{x:a.x+a.width,y:a.y-b.height/2}},36:function(a,b){return{x:a.x,y:a.y+a.height+b.height/2}},37:function(a,b){return{x:a.x+a.width,y:a.y+a.height+b.height/2}},38:function(a,b){return{x:a.x+a.width/4,y:a.y-b.height/2}},39:function(a,b){return{x:a.x+3*a.width/4,y:a.y-b.height/2}},40:function(a){return{x:a.x+a.width/4,y:a.y}},41:function(a){return{x:a.x+3*a.width/4,y:a.y}},42:function(a,b){return{x:a.x+a.width/4,y:a.y+b.height/2}},43:function(a,b){return{x:a.x+3*a.width/4,y:a.y+b.height/2}},44:function(a,b){return{x:a.x+a.width/2,y:a.y+a.height/2-b.height/2}},45:function(a){return{x:a.x+a.width/4,y:a.y+a.height/2}},46:function(a,b){return{x:a.x+a.width/2-b.width/2,y:a.y+a.height/2}},47:function(a,b){return{x:a.x+a.width/2+b.width/2,y:a.y+a.height/2}},48:function(a){return{x:a.x+3*a.width/4,y:a.y+a.height/2}},49:function(a,b){return{x:a.x+a.width/2,y:a.y+a.height/2+b.height/2}},50:function(a,b){return{x:a.x+a.width/4,y:a.y+a.height-b.height/2}},51:function(a,b){return{x:a.x+3*a.width/4,y:a.y+a.height-b.height/2}},52:function(a){return{x:a.x+a.width/4,y:a.y+a.height}},53:function(a){return{x:a.x+3*a.width/4,y:a.y+a.height}},54:function(a,b){return{x:a.x+a.width/4,y:a.y+a.height+b.height/2}},55:function(a,b){return{x:a.x+3*a.width/4,y:a.y+a.height+b.height/2}}};return function(b,c,d){return a[b](c,d?d:oa)}}();z.emitter=function(a){a.on=function(a,b,c,d){var e=this;return e._emitter||(e._emitter=new Kc),e._emitter.on(a,b,c,d),e},a.off=function(a,b,c){var d=this;return d._emitter&&d._emitter.off(a,b,c),d},a.emit=function(a,b){var c=this;return c._emitter&&c._emitter.emit(a,b),c},a.onPropertyChange=function(){},a.epc=function(a,b,c){if(b===c)return!1;var d={property:a,oldValue:b,newValue:c,source:this};return this.emit("propertyChange",d),this.onPropertyChange(d),d}},z.bnb=function(a){a.getBodyColor=function(a){return a.s("body.color")},a.getBorderColor=function(a){return a.s("border.color")}},z.sm=function(a){a.removeSelection=function(){var a=this.dataModel;Da(this.selectionModel.selection).forEach(a.remove,a)},a.selectAll=function(){var a=this;a.selectionModel.selection=Va(a.dataModel.datas,a.isVisible,a)},a.isSelected=function(a){return this.selectionModel.isSelected(a)},a.isSelectable=function(a){return this.selectionModel.isSelectable(a)},aa(a,{selectionModel:{get:function(){return this._selectionModel?this._selectionModel:this.dataModel.selectionModel}},selectableFunc:{get:function(){return this.selectionModel.filterFunc},set:function(a){this.selectionModel.filterFunc=a}},selectionModelShared:{get:function(){return!this._selectionModel},set:function(a){var b=this,d=!b._selectionModel,e=b.handleSelectionChange,f=b.dataModel;d!==a&&(b.invalidateSelection&&b.invalidateSelection(),a?(f.selectionModel.on("selectionChange",e,b),b._selectionModel.off("selectionChange",e,b),b._selectionModel.dispose(),b._selectionModel=c):(f.selectionModel.off("selectionChange",e,b),b._selectionModel=new Nc(f),b._selectionModel.on("selectionChange",e,b)),b.invalidateSelection&&b.invalidateSelection(),b.redraw&&b.redraw(),b.epc("selectionModelShared",d,a))}}})},z.painter=function(a){a.addTopPainter=function(a){var b=this;b._topPainters||(b._topPainters=[]),b._topPainters.indexOf(a)<0&&(b._topPainters.push(a),b.redraw?b.redraw():b.iv())},a.removeTopPainter=function(a){var b=this;b._topPainters&&(Ta(b._topPainters,a),b.redraw?b.redraw():b.iv())},a.addBottomPainter=function(a){var b=this;b._bottomPainters||(b._bottomPainters=[]),b._bottomPainters.indexOf(a)<0&&(b._bottomPainters.push(a),b.redraw?b.redraw():b.iv())},a.removeBottomPainter=function(a){var b=this;b._bottomPainters&&(Ta(b._bottomPainters,a),b.redraw?b.redraw():b.iv())},a.drawBottomPainters=function(a,b){var c=this;c._bottomPainters&&c._bottomPainters.forEach(function(d){d.draw?d.draw(a,b):d.call(c,a,b)})},a.drawTopPainters=function(a,b){var c=this;c._topPainters&&c._topPainters.forEach(function(d){d.draw?d.draw(a,b):d.call(c,a,b)})}},z.toolTip=function(a){Fa(a,"toolTipDelay"),Fa(a,"toolTipContinuous"),a._toolTipDelay=w.toolTipDelay,a._toolTipContinuous=w.toolTipContinuous,a.enableToolTip=function(){var a=this;a._handleToolTip||(a._handleToolTip=function(b){var d=a.getToolTipAt(b);d!=c?a.toolTipContinuous&&Gc()?la(b,d):(ka(),Dc={timeout:v(Fc,a.toolTipDelay),event:b,content:d,view:a.view}):ka()},a.addEventListener("mousemove",a._handleToolTip,!1))},a.disableToolTip=function(){var a=this;a._handleToolTip&&(a.removeEventListener("mousemove",a._handleToolTip,!1),delete a._handleToolTip)},a.getToolTipAt=function(a){var b=this;if(b.getDataAt){var c=b.getDataAt(a);return c?c.toolTip:d}return d}},z.scrollBar=function(a){Fa(a,"autoScrollSize"),Fa(a,"scrollBarColor"),Fa(a,"scrollBarSize"),Fa(a,"scrollBarTimeout"),Fa(a,"scrollBarMinLength"),Fa(a,"scrollBarActiveSize"),a._autoScrollSize=16,a._scrollBarColor=w.scrollBarColor,a._scrollBarSize=w.scrollBarSize,a._scrollBarTimeout=w.scrollBarTimeout,a._scrollBarMinLength=w.scrollBarMinLength,a._scrollBarActiveSize=w.scrollBarActiveSize,a._viewRect=oa,a._scrollHeight=0,a._scrollWidth=0,a._translateX=0,a._translateY=0,a._scrollBarMode="off",a.showScrollBar=function(){this.showVScrollBar(),this.showHScrollBar()},a.validateScrollBar=function(){this.validateVScrollBar(),this.validateHScrollBar()},a.autoScroll=function(a,b){var c=this,d=c._autoScrollSize,e=d/(c._zoom||1),f=d/4,g=c._viewRect,h=c.lp(a),i={x:c.translateX,y:c.translateY};return d>0&&(h.x-g.x<e?c.translate(f,0):g.x+g.width-h.x<e&&c.translate(-f,0),h.y-g.y<e?c.translate(0,f):g.y+g.height-h.y<e&&c.translate(0,-f)),i.x=c.translateX-i.x,i.y=c.translateY-i.y,b&&(b.x+=i.x,b.y+=i.y),i},a.isCloseToHScrollBar=function(a){var b=this,c=b._viewRect,d=b._zoom||1;return b.hScrollable&&(c.y+c.height-b.lp(a).y)*d<b.scrollBarActiveSize},a.isCloseToVScrollBar=function(a){var b=this,c=b._viewRect,d=b._zoom||1;return b.vScrollable&&(c.x+c.width-b.lp(a).x)*d<b.scrollBarActiveSize},a.showVScrollBar=function(){var a=this;a.vScrollable&&"on"!==a._scrollBarMode&&(a._vScrollBarTimer||(v(function(){a.handleVScrollBarTimeout()},a.scrollBarTimeout),a.iv()),a._vScrollBarTimer=new Date)},a.handleVScrollBarTimeout=function(){var a=this;if(a._vScrollBarTimer){var b=new Date;b.getTime()-a._vScrollBarTimer.getTime()>=a.scrollBarTimeout?(delete a._vScrollBarTimer,a.iv()):v(function(){a.handleVScrollBarTimeout()},a.scrollBarTimeout)}},a.validateVScrollBar=function(){var a=this,b=a._vScrollBar;if(a._scrollBarDiv){if("auto"===a._scrollBarMode&&!a._vScrollBarTimer)return void(b.style.visibility="hidden");var c=a._zoom||1,d=a.scrollBarSize,e=a.scrollBarMinLength,g=a.viewRect,h=a.scrollRect,i=g.height*c,j=h.height*c,k=g.width*c-d-2,l=i*((g.y-h.y)*c/j),m=i*(i/j),n=b.style;j>i?(e>m&&(l=l+m/2-e/2,0>l&&(l=0),l+e>i&&(l=i-e),m=e),ua(b,k,l,d,m),n.visibility="visible",n.background=a.scrollBarColor,n.borderRadius=d/2+f):n.visibility="hidden"}},a.showHScrollBar=function(){var a=this;a.hScrollable&&"on"!==a._scrollBarMode&&(a._hScrollBarTimer||(v(function(){a.handleHScrollBarTimeout()},a.scrollBarTimeout),a.iv()),a._hScrollBarTimer=new Date)},a.handleHScrollBarTimeout=function(){var a=this;if(a._hScrollBarTimer){var b=new Date;b.getTime()-a._hScrollBarTimer.getTime()>=a.scrollBarTimeout?(delete a._hScrollBarTimer,a.iv()):v(function(){a.handleHScrollBarTimeout()},a.scrollBarTimeout)}},a.validateHScrollBar=function(){var a=this,b=a._hScrollBar;if(a._scrollBarDiv){if("auto"===a._scrollBarMode&&!a._hScrollBarTimer)return void(b.style.visibility="hidden");var c=a._zoom||1,d=a.scrollBarSize,e=a.scrollBarMinLength,g=a.viewRect,h=a.scrollRect,i=g.width*c,j=h.width*c,k=g.height*c-d-2,l=i*((g.x-h.x)*c/j),m=i*(i/j),n=b.style;j>i?(e>m&&(l=l+m/2-e/2,0>l&&(l=0),l+e>i&&(l=i-e),m=e),ua(b,l,k,m,d),n.visibility="visible",n.background=a.scrollBarColor,n.borderRadius=d/2+f):n.visibility="hidden"}},a.setTranslate=function(a,b,c){var d=this;if(c=Ea(c)){d._translateAnim&&d._translateAnim.stop(!0);var e=d.translateX,f=d.translateY;c.action=function(c){d.setTranslate(e+(a-e)*c,f+(b-f)*c)},c.innerFunc=function(){delete d._translating,delete d._translateAnim},d._translating=!0,d._translateAnim=fa(c)}else d.translateX=a,d.translateY=b},a.adjustTranslateX=function(a){var b=this.clientWidth-this._scrollWidth;return b>a&&(a=b),a>0?0:h(a)},a.adjustTranslateY=function(a){var b=this.clientHeight-this._scrollHeight;return b>a&&(a=b),a>0?0:h(a)},a.translate=function(a,b,c){this.setTranslate(this.translateX+a,this.translateY+b,c)},aa(a,{scrollBarMode:{get:function(){return this._scrollBarMode},set:function(a){var b=this,c=b._scrollBarMode;c!==a&&(b._scrollBarMode=a,"off"===a?(za(b._scrollBarDiv),delete b._scrollBarDiv,delete b._vScrollBar,delete b._hScrollBar):b._scrollBarDiv||(b._scrollBarDiv=pa(!1,b._interactionDiv),b._vScrollBar=pa(!1,b._scrollBarDiv),b._hScrollBar=pa(!1,b._scrollBarDiv)),this.epc("scrollBarMode",c,a))}},translateX:{get:function(){return this._translateX},set:function(a){var b=this,c=b._translateX;a=b.adjustTranslateX(a),b._translateX=a,b.epc("translateX",c,a)}},translateY:{get:function(){return this._translateY},set:function(a){var b=this,c=b._translateY;a=b.adjustTranslateY(a),b._translateY=a,b.epc("translateY",c,a)}},viewRect:{get:function(){return this._viewRect}},scrollRect:{get:function(){var a=this,b=a._viewRect;return a.contentRect?cb(a.contentRect,b):{x:0,y:0,width:l(b.width,a._scrollWidth),height:l(b.height,a._scrollHeight)}}},vScrollable:{get:function(){return"off"!==this._scrollBarMode&&this._viewRect.height<this.scrollRect.height}},hScrollable:{get:function(){return"off"!==this._scrollBarMode&&this._viewRect.width<this.scrollRect.width}}})},z.element=function(a){a.addElement=function(a,b,c,d,e){if(a){var f=this,g=f._elements,h=pa(!0);f._columnLineVisible&&(d-=1),f._rowLineVisible&&(e-=1),0>=d||0>=e||(f._elements||(g=f._elements=[]),ua(h,f.translateX+b,f.translateY+c,d,e),xa(h,a),xa(f._contentDiv,h),a.onAdd&&a.onAdd(h),g.push(h))}},a.removeElements=function(){this._elements&&(this._elements.forEach(function(a){za(a)}),this._elements.length=0)}},z.property=function(a){Fa(a,"editable"),Fa(a,"batchEditable"),a._editable=!0,a._batchEditable=!1,
a.getValue=function(a,b){return b.getValue(a,this)},a.setValue=function(a,b,c){var d=this;d._batchEditable&&b._batchEditable&&d.isSelected(a)?d.selectionModel.forEach(function(a){b.setValue(a,c,d)}):b.setValue(a,c,d)},a.getRenderer=function(a,b){var c=b.renderer;if(!c){var d=b.rendererClass;if(!d){var e=b.valueType;d=D[e],d||(d=Xc)}c=Ga(d),b.renderer=c}return c},a.getEditor=function(a,b){var c=b.editor;if(!c){var d=b.editorClass;if(!d){var e=b.valueType;d=E[e],d||(d=Pc)}c=Ga(d),b.editor=c}return c},a.isCellRenderable=function(a,b){var c=this._currentEditor;return c&&c.property===b&&c.data===a?!1:!0},a.isCellEditable=function(a,b){return b.editable&&this.editable},a.drawCell=function(a,b,c,d,e,f,g){var h=this;if(f&&h.isCellRenderable(b,c)){a.save(),a.beginPath(),a.rect(d,e,f,g),a.clip();var i=h.getRenderer(b,c);if(i){i.table=h,i.property=c,i.data=b;var j=h.getValue(b,c),k=i.draw(a,j,d,e,f,g);k&&h.addElement(k,d,e,f,g)}a.restore()}},a.endEditing=function(){var a=this,b=a._currentEditor;if(b){try{b.endEditing(),this.setValue(b.data,b.property,b.getEditorValue())}catch(c){console.log(c)}za(ta(b.getView())),delete a._currentEditor,a.iv()}},a.cancelEditing=function(){var a=this,b=a._currentEditor;b&&(b.cancelEditing(),za(ta(b.getView())),delete a._currentEditor,a.iv())},a.beginEditing=function(a,b,c,d,e,f){var g=this;g.endEditing();var h=g.getEditor(a,b);if(h){h.table=g,h.data=a,h.property=b,h.event=d,h.point=e,h.rect=f;var i=g.getValue(a,b),j=h.getView();h.setValue(i),j&&(xa(g._editorDiv,ta(j)),ua(j,c,!0),j.requestFocus?j.requestFocus():ya(j),h.beginEditing(),g._currentEditor=h,g.iv())}}},z.list=function(a){Fa(a,"focusData"),Fa(a,"checkMode"),Fa(a,"autoMakeVisible"),Fa(a,"visibleFunc"),Fa(a,"sortFunc"),Fa(a,"labelColor"),Fa(a,"labelSelectColor"),Fa(a,"labelFont"),Fa(a,"selectBackground"),Fa(a,"indent"),Fa(a,"rowHeight"),Fa(a,"rowLineVisible"),Fa(a,"rowLineColor"),Fa(a,"selectBackgroundFunc"),Fa(a,"iconFunc"),Fa(a,"labelFunc"),Fa(a,"labelFontFunc"),Fa(a,"labelColorFunc"),a._checkMode=c,a._autoMakeVisible=!0,a._visibleFunc=c,a._sortFunc=c,a._labelColor=M,a._labelSelectColor=N,a._labelFont=I,a._selectBackground=L,a._indent=w.indent,a._rowHeight=w.rowHeight,a._rowLineVisible=!1,a._rowLineColor=$,a.initList=function(a){var b=this;b._rows=[],b._rowMap={},b._beginRowIndex=0,b._endRowIndex=0,b.initView(!0,!0),b.dataModel=a?a:new Mc,b.scrollBarMode="auto"},a.onDataDoubleClick=function(){},a.onDataClick=function(){},a.getSelectBackground=function(a){return this.selectBackgroundFunc?this.selectBackgroundFunc(a):this.selectBackground},a.getIcon=function(a){return this.iconFunc?this.iconFunc(a):a.icon},a.drawIcon=function(a,b,d,e,f,g){if(f){var h,i=this,h=i.getBodyColor(b),j=i.getIcon(b);j&&(g-=i.rowLineVisible?1:0,da(a,j,c,d,e+1,f,g-2,b,i,h),rb(a,i.getBorderColor(b),d,e,f,g))}},a.drawLabel=function(a,b,c,d,e){var f=this;ea(a,f.getLabel(b),f.getLabelFont(b),f.getLabelColor(b),c,d,0,e)},a.getCheckIcon=function(a){var b=this.selectionModel,c=b.isSelected(a);return"single"===b.selectionMode?c?"radioon":"radiooff":c?"check":"uncheck"},a.checkData=function(a){var b=this.selectionModel,c=b.isSelected(a);"single"===b.selectionMode&&c||(this._checkingData=!0,c?b.removeSelection(a):b.appendSelection(a),delete this._checkingData)},a.getDataAt=function(a){return a.target&&(a=this.lp(a)),this._rows[i(a.y/this._rowHeight)]},a.onPropertyChange=function(a){var b=this,c=a.property;b.checkChildPreferredSizeChange(c),wc[c]?b.ivm():b.iv(),vc[c]&&(b.showScrollBar(),b.endEditing&&b.endEditing()),"focusData"===c&&b.makeVisible(b._focusData)},a.getLabel=function(a){return this.labelFunc?this.labelFunc(a):a.displayName==c?a.name:a.displayName},a.getLabelFont=function(a,b){return this.labelFontFunc?this.labelFontFunc(a,b):this._labelFont},a.getLabelColor=function(a,b){var c=this;return c.labelColorFunc?c.labelColorFunc(a,b):a&&(c.checkMode&&c._focusData===a||c.isSelected(a))?c._labelSelectColor:c._labelColor},a.getRowIndex=function(a){return this._rowMap[a.uuid]},a.isVisible=function(a){return this._visibleFunc?this._visibleFunc(a):!0},a.getSortFunc=function(){return this._sortFunc},a.validateModel=function(){var a=this;a._rows.length=0,a._rowMap={},a.buildChildren(a._dataModel._roots);var b=a._rows=Va(a._rows,a.isVisible,a),c=0,d=a.getSortFunc(),e=b.length;for(d&&b.sort(d);e>c;c++)a._rowMap[b[c].uuid]=c},a.buildChildren=function(a){var b=this;a.forEach(function(a){b._rows.push(a),b.buildChildren(a._children)})},a.handleDataModelChange=function(){this.ivm()},a.handleDataPropertyChange=function(a){"parent"===a.property?this.ivm():this.iv()},a.handleHierarchyChange=function(){this.ivm()},a.handleSelectionChange=function(a){var b=this;b.iv(),!b.autoMakeVisible||1!==b.selectionModel.length||"set"!==a.kind&&"append"!==a.kind||b._checkingData||b.makeVisible(b.selectionModel.lastData)},a.makeVisible=function(a){this._makeVisibleData=a,this.iv()},a.scrollToIndex=function(a){var b=this,c=b._viewRect,d=c.height,e=b._rowHeight,f=e*a;a>=0&&a<b._rows.length&&d>0&&(f+e>c.y+d?b.translateY=-f+d-e:f<c.y&&(b.translateY=-f))},a.ivm=function(){this._invalidateModel||(this._invalidateModel=!0,this.iv())},a.drawRowBackground=function(a,b,c,d,e,f){var g=this,h=g.checkMode;(b===g._focusData&&h||g.isSelected(b)&&!h)&&qb(a,c,d,e,f,g.getSelectBackground(b))},a.drawData=function(a,b,c){var d=this,e=d._rowHeight,f=e*c,g=d._viewRect,h=g.x,i=g.width;a.save(),a.beginPath(),a.rect(h,f,i,e),a.clip(),d.addElement(d.drawRow(a,b,h,f,i,e),h,f,i,e),a.restore(),d._rowLineVisible&&qb(a,h,f+e-1,i,1,d._rowLineColor)},a.validateImpl=function(){var a=this,b=a._canvas,c=a.clientWidth,d=a.clientHeight,e=a._rowHeight;(c!==b.clientWidth||d!==b.clientHeight)&&ra(b,c,d),a._invalidateModel&&(a.validateModel(),delete a._invalidateModel);var f={x:-a.translateX,y:-a.translateY,width:c,height:d},g=a._rows.length;a._viewRect=f,a._scrollHeight=g*e,a._beginRowIndex=i(f.y/e),a._endRowIndex=j((f.y+f.height)/e),a._beginRowIndex<0&&(a._beginRowIndex=0),a._endRowIndex>g&&(a._endRowIndex=g),a.validateColumnInfos&&a.validateColumnInfos();var h=Rb(b,a.translateX,a.translateY,1,f);a.removeElements(),a.drawBottomPainters(h);for(var k=a._beginRowIndex;k<a._endRowIndex;k++)a.drawData(h,a._rows[k],k);a.drawTopPainters(h),h.restore(),a._makeVisibleData&&(a.scrollToIndex(a.getRowIndex(a._makeVisibleData)),delete a._makeVisibleData),a.translateX=a.translateX,a.translateY=a.translateY},aa(a,{beginRowIndex:{get:function(){return this._getBeginRowIndex}},endRowIndex:{get:function(){return this._endRowIndex}},rowDatas:{get:function(){return this._rows}},dataModel:{get:function(){return this._dataModel},set:function(a){var b=this,c=b._dataModel,d=b._selectionModel;c!==a&&(c&&(c.off("dataModelChange",b.handleDataModelChange,b),c.off("dataPropertyChange",b.handleDataPropertyChange,b),c.off("hierarchyChange",b.handleHierarchyChange,b),d||c.selectionModel.off("selectionChange",b.handleSelectionChange,b)),b._dataModel=a,a.on("dataModelChange",b.handleDataModelChange,b),a.on("dataPropertyChange",b.handleDataPropertyChange,b),a.on("hierarchyChange",b.handleHierarchyChange,b),d?d._setDataModel(a):a.selectionModel.on("selectionChange",b.handleSelectionChange,b),b.epc("dataModel",c,a))}}})},z.tree=function(a){Fa(a,"rootVisible"),Fa(a,"rootData"),Fa(a,"expandIcon"),Fa(a,"collapseIcon"),Fa(a,"loader"),a._rootVisible=!0,a._rootData=c,a._expandIcon="expand",a._collapseIcon="collapse",a._loader=c,a.initTree=function(){this._expandMap={},this._levelMap={}},a.validateModel=function(){var a=this,b=a._rootData;a._rows.length=0,a._levelMap={},a._rowMap={},b&&!this.dataModel.contains(b)&&(b=a._rootData=null),a._currentLevel=0,b?a._rootVisible?a.buildData(b):a.buildChildren(b):a.buildChildren(),delete a._currentLevel},a.buildData=function(a){var b=this,c=a.uuid,d=b._rows;b.isVisible(a)&&(b._rowMap[c]=d.length,d.push(a),b._levelMap[c]=b._currentLevel,b.isExpanded(a)&&(b._currentLevel++,b.buildChildren(a),b._currentLevel--))},a.buildChildren=function(a){var b=this,c=a?a._children:b._dataModel._roots,d=b.getSortFunc();d&&b.isChildrenSortable(a)?Da(c).sort(d).forEach(b.buildData,b):c.forEach(b.buildData,b)},a.getLevel=function(a){return this._levelMap[a.uuid]},a.getToggleIcon=function(a){var b=this;return b._loader&&!b._loader.isLoaded(a)?b._collapseIcon:a.length?b.isExpanded(a)?b._expandIcon:b._collapseIcon:c},a.isChildrenSortable=function(){return!0},a.handleDataModelChange=function(a){var b=this;"remove"===a.kind?delete b._expandMap[a.data.uuid]:"clear"===a.kind&&(b._expandMap={}),b.ivm()},a.toggle=function(a){var b=this;b.isExpanded(a)?b.collapse(a):b.expand(a)},a.isExpanded=function(a){return this._expandMap[a.uuid]===!0},a.expand=function(a){var b=this,c=b._loader;b.isExpanded(a)||(c&&!c.isLoaded(a)&&c.load(a),b._expandMap[a.uuid]=!0,b.ivm(),b.onExpand(a))},a.onExpand=function(){},a.collapse=function(a){var b=this;b.isExpanded(a)&&(delete b._expandMap[a.uuid],b.ivm(),b.onCollapse(a))},a.onCollapse=function(){},a.expandAll=function(){var a=this;a._dataModel.forEach(function(b){b.length&&(a._expandMap[b.uuid]=!0)}),a.ivm()},a.collapseAll=function(){this._expandMap={},this.ivm()},a.makeVisible=function(a){if(a){var b=this;if(!b._rootData||a.isDescendantOf(b._rootData)){for(var c=a._parent;c;)b.expand(c),c=c._parent;b._makeVisibleData=a,b.iv()}}},a.checkData=function(a){var b,c=this,d=c._checkMode,e=c.selectionModel,f=e.isSelected(a);if("single"!==e.selectionMode||!f){if(c._checkingData=!0,"check"===d)f?e.removeSelection(a):e.appendSelection(a);else if("children"===d)b=[a],Ua(b,a._children);else if("descendant"===d)b=[],ic(a,b);else if("all"===d&&(b=[],ic(a,b),!f))for(var g=a._parent;g;)b.push(g),g=g._parent;b&&(f?e.removeSelection(b):e.appendSelection(b)),delete c._checkingData}},a.drawTree=function(a,b,d,e,f,g){var h=this,i=h._indent,j=h.getLevel(b),k=h.getIcon(b)?i:0,l=h.getToggleIcon(b);l?(d+=i*j,da(a,l,c,d,e,i,g,b,h),d+=i):d+=i*(j+1),h._checkMode&&(da(a,h.getCheckIcon(b),c,d,e,i,g,b,h),d+=i),h.drawIcon(a,b,d,e,k,g),h.drawLabel(a,b,d+k,e,g)}},z.table=function(a){Fa(a,"columnLineVisible"),Fa(a,"columnLineColor"),Fa(a,"sortColumn"),Fa(a,"sortMode"),a._rowLineVisible=!0,a._columnLineVisible=!0,a._columnLineColor=$,a._sortColumn=c,a._sortMode="tristate",a.initTable=function(){var a=this,b=a._columnModel=new Mc;a._columnInfos=[],b.on("dataModelChange",a.handleColumnModelChange,a),b.on("dataPropertyChange",a.handleColumnPropertyChange,a),b.on("hierarchyChange",a.handleColumnHierarchyChange,a)},a.onColumnClick=function(){},a.setColumns=function(a){this._columnModel.clear(),this.addColumns(a)},a.addColumns=function(a){a&&a.forEach(function(a){a instanceof md||(a=Ga(md,a)),this._columnModel.add(a)},this)},a.getColumnInfo=function(a){for(var b,d=0,e=this._columnInfos;d<e.length;d++)if(b=e[d],b.column===a)return b;return c},a.getColumnAt=function(a){var b=this.getColumnInfoAt(a);return b?b.column:c},a.getColumnInfoAt=function(a){for(var b=this.lp(a).x,d=this._columnInfos,e=0;e<d.length;e++){var f=d[e];if(b>=f.beginX&&b<f.endX)return f}return c},a.getToolTipAt=function(a){var b=this,d=b.getDataAt(a),e=b.getColumnAt(a);return d&&e?e.getToolTip(d,b):c},a.getSortFunc=function(){var a=this,b=a._sortColumn;if(b&&b.sortable){var c=b.sortFunc,d="asc"===b.sortOrder?1:-1;return c||(c=w.sortFunc),function(e,f){return c.call(a,a.getValue(e,b),a.getValue(f,b),e,f)*d}}return a._sortFunc},a.validateColumnInfos=function(){var a=this,b=a._viewRect,c=a._columnInfos;c.length=0,a._scrollWidth=0,a._columnModel._roots.forEach(function(d){if(d.visible){var e=a._scrollWidth+d.width;a._scrollWidth<=b.x+b.width&&e>=b.x&&c.push({column:d,beginX:a._scrollWidth,endX:e}),a._scrollWidth=e}})},a.drawData=function(a,b,c){var d=this,e=d._rowHeight,f=e*c,g=d._viewRect,h=g.x,i=g.width;d.drawRowBackground(a,b,h,f,i,e),d._columnInfos.forEach(function(c){var g=c.column,h=c.beginX,i=g.width;i>0&&(d.drawCell(a,b,g,h,f,i,e),d._columnLineVisible&&qb(a,h+i-1,f,1,e,d._columnLineColor))}),d._rowLineVisible&&qb(a,h,f+e-1,i,1,d._rowLineColor)},a.handleColumnModelChange=function(){this.ivm()},a.handleColumnPropertyChange=function(a){var b=this;a.data===b._sortColumn&&xc[a.property]?b.ivm():b.iv(),b.showScrollBar()},a.handleColumnHierarchyChange=function(){this.iv()},a.checkEditing=function(a,b){if(Cb(b))for(var c=this,d=c.lp(b),e=c._columnInfos,f=c._rowHeight,g=c._viewRect,h=g.x,i=g.y,j=g.width,k=g.height,l=0;l<e.length;l++){var m=e[l],n=m.beginX,o=m.column,p=o.width;if(o!==c._checkColumn&&o!==c._treeColumn&&c.isCellEditable(a,o)&&d.x>=n&&d.x<m.endX){var q={x:n,y:c.getRowIndex(a)*f,width:p,height:f},r={x:q.x+c.translateX,y:q.y+c.translateY,width:q.width,height:q.height},s=0,t=0;return q.x<h?s=q.x-h:q.x+q.width>h+j&&(s=q.x+q.width-h-j),s&&(c.translateX=c.translateX-s,r.x-=s),q.y<i?t=q.y-i:q.y+f>i+k&&(t=q.y+f-i-k),t&&(c.translateY=c.translateY-t,r.y-=t),void c.beginEditing(a,o,r,b,d,q)}}},aa(a,{columnModel:{get:function(){return this._columnModel}}})},z.tablePane=function(a){a.init=function(a){var b=this;b._table=a,b._tableHeader=new e.widget.TableHeader(a),b.initView(),xa(b._interactionDiv,b._tableHeader.view),xa(b._interactionDiv,b._table.view),b._tableHeader.on("propertyChange",function(a){"viewHeight"===a.property&&b.iv()}),b.iv()},a.getTable=function(){return this._table},a.getTableHeader=function(){return this._tableHeader},a.validateImpl=function(){var a=this,b=a._tableHeader,c=b.height,d={x:0,y:0,width:a.clientWidth,height:c};ua(b,d,a._forceLayout),d.y=c,d.height=l(0,a.clientHeight-c),ua(a._table,d,a._forceLayout)}};var Kc=_("qc.widget.Emitter",b,function(){},{on:function(a,b,c,d){var e=this,f=e._types;f||(f=e._types={});var g=f[a];g||(g=f[a]=[]);var h=g.length;d=d||0;do h--;while(h>=0&&g[h].priority<d);return g.splice(h+1,0,{listener:b,scope:c,priority:d}),e},off:function(a,b,c){var d=this._types;if(d){var e=d[a];if(e){for(var f=0,g=e.length;g>f;f++)if(e[f].listener===b&&e[f].scope===c){e.splice(f,1);break}return e.length||delete d[a],this}}},emit:function(a,b){var c=this._types;if(c){var d=c[a];if(d){d=Da(d);for(var e=0,f=d.length;f>e;e++){var g=d[e];g.listener.call(g.scope||this,b)}return this}}}}),Lc=_("qc.widget.Data",b,function(a){aa(this,{uuid:{value:H()}}),Ha(this,a)},{_children:na,iv:function(){return this.epc("iv",!1,!0),this},addChild:function(a,b){var c=this;if(a!==c&&(c._children===na&&(c._children=[],c._childMap={}),b===d&&(b=c._children.length),!c._childMap[a.uuid]&&!c.isDescendantOf(a)))return a._parent&&a._parent.removeChild(a),(0>b||b>c._children.length)&&(b=this._children.length),c._children.splice(b,0,a),c._childMap[a.uuid]=a,a.parent=this,c.onChildAdd(a,b),c.epc("children",d,a),c},onChildAdd:function(){},removeChild:function(a){var b=this;if(b._childMap&&b._childMap[a.uuid]){var c=b._children.indexOf(a);return b._children.splice(c,1),delete b._childMap[a.uuid],b.epc("children",a,d),a.parent=d,b.onChildRemove(a,c),b}},onChildRemove:function(){},clearChildren:function(){var a=this;return Da(a._children).forEach(function(b){a.removeChild(b)}),a},onParentChange:function(){},isDescendantOf:function(a){if(!a||0===a.length)return!1;for(var b=this._parent;b;){if(a===b)return!0;b=b._parent}return!1},_setDataModel:function(a){if(a&&this._dataModel)throw"Data already in another DataModel";this._dataModel=a},onPropertyChange:function(){},epc:function(a,b,c){var d=this;if(b===c)return!1;var e={property:a,oldValue:b,newValue:c,source:d,data:d};return d._dataModel&&d._dataModel.handleDataPropertyChange(e),d.onPropertyChange(e),this.emit("propertyChange",e),e}},{properties:["id","name","displayName","icon","toolTip"],attr:!0,style:!0,emitter:!0},{dataModel:{get:function(){return this._dataModel}},uiClass:{get:function(){return c}},length:{get:function(){return this._children.length}},parent:{get:function(){return this._parent},set:function(a){var b=this;if(!(b._updatingParent||b._parent===a||b===a||a&&a.isDescendantOf(b))){var c=b._parent;return b._parent=a,b._updatingParent=!0,c&&c.removeChild(b),a&&a.addChild(b),delete b._updatingParent,b.epc("parent",c,a),b.onParentChange(c,a),b}}},siblings:{get:function(){var a=this;return a._parent?a._parent._children:a._dataModel?a._dataModel._roots:d}},children:{get:function(){return this._children}},serializableProperties:{get:function(){return{id:!0,name:!0,displayName:!0,icon:!0,toolTip:!0,parent:!0}}}}),Mc=_("qc.widget.DataModel",b,function(){var a=this;a._datas=[],a._dataMap={},a._roots=[],a._rootMap={},a._idMap={},a._emitter=new Kc,a._selectionModel=new Nc(a)},{getDataById:function(a){return this._idMap[a]},add:function(a,b){var d=this,e=a.uuid;if(d._dataMap[e])throw"Data already in this DataModel";return a.id!=c&&(d._idMap[a.id]=a),d._dataMap[e]=a,d._datas.push(a),a._parent||(d._rootMap[e]=a,Sa(d._roots,a,b)),a._setDataModel(d),d.onAdd(a),d.emit("dataModelChange",{kind:"add",data:a}),d},onAdd:function(){},remove:function(a){if(a){var b=this,d=a.uuid;if(a._dataModel===b)return b.prepareRemove(a),Da(a.children).forEach(b.remove,b),a._parent&&a._parent.removeChild(a),Ta(b._datas,a),delete b._dataMap[d],a.id!=c&&delete b._idMap[a.id],b._rootMap[d]&&(delete b._rootMap[d],Ta(b._roots,a)),a._setDataModel(c),b.onRemove(a),b.emit("dataModelChange",{kind:"remove",data:a}),b}},onRemove:function(){},prepareRemove:function(){},clear:function(){var a=this;return a._datas.length&&(a._datas.forEach(function(a){a._setDataModel(c)}),a._datas.length=0,a._dataMap={},a._roots.length=0,a._rootMap={},a._idMap={},a.onClear(),a.emit("dataModelChange",{kind:"clear"})),a},onClear:function(){},contains:function(a){return a&&a._dataModel===this},handleDataPropertyChange:function(a){var b=this,d=a.source,e=a.property;if("parent"===e){var f=d.uuid,g=b._rootMap;d._parent?g[f]&&(delete g[f],Ta(b._roots,d)):g[f]||(g[f]=d,b._roots.push(d))}else"id"===e&&(a.oldValue!=c&&delete b._idMap[a.oldValue],a.newValue!=c&&(b._idMap[a.newValue]=d));b.onDataPropertyChange(a),b.emit("dataPropertyChange",a)},onDataPropertyChange:function(){},forEach:function(a,b){this._datas.forEach(a,b)}},{attr:!0,emitter:!0},{length:{get:function(){return this._datas.length}},selectionModel:{get:function(){return this._selectionModel}},roots:{get:function(){return this._roots}},datas:{get:function(){return this._datas}}}),Nc=_("qc.widget.SelectionModel",b,function(a){var b=this;b._selectionMode="multiple",b._map={},b._list=[],b._setDataModel(a)},{_setDataModel:function(a){var b=this,c=b._dataModel;c!==a&&(c&&(b.clearSelection(),c.off("dataModelChange",b.handleDataModelChange,b)),b._dataModel=a,a.on("dataModelChange",b.handleDataModelChange,b),b.epc("dataModel",c,a))},dispose:function(){var a=this;a.clearSelection(),a._dataModel.off("dataModelChange",a.handleDataModelChange,a)},handleDataModelChange:function(a){var b=this;if("remove"===a.kind){var c=a.data;b.isSelected(c)&&(Ta(b._list,c),delete b._map[c.uuid],b.esc("remove",[c]))}else"clear"===a.kind&&b.clearSelection()},esc:function(a,b,c,d){c&&(this._list.forEach(function(a){d[a.uuid]?Ta(c,a):c.push(a)}),b=Da(c)),this.emit("selectionChange",{kind:a,datas:Da(b)})},filterArray:function(a,b){var c=this;a?a instanceof Lc&&(a=[a]):a=[];for(var d,e=0,f=Da(a);e<f.length;e++)d=f[e],(c._selectableFunc&&!c._selectableFunc(d)||b&&c.isSelected(d)||!b&&!c.isSelected(d)||!c._dataModel.contains(d))&&(f.splice(e,1),e--);return f},appendSelection:function(a){var b=this;if("none"===b._selectionMode)return b;var c,d,e=b._list,f=b.filterArray(a,!0);return f.length?("single"===b._selectionMode&&(c=Da(e),d=b._map,e.length=0,b._map={},f=[f[f.length-1]]),f.forEach(function(a){e.push(a),b._map[a.uuid]=a}),b.esc("append",f,c,d),b):b},removeSelection:function(a){var b=this,c=b.filterArray(a),d=0,e=c.length;if(0===e)return b;for(;e>d;d++){var f=c[d];Ta(b._list,f),delete b._map[f.uuid]}return b.esc("remove",c),b},forEach:function(a,b){this._list.forEach(a,b)},clearSelection:function(){var a=this;if(a.length){var b=Da(a._list);a._list.length=0,a._map={},a.esc("clear",b)}return a},selectAll:function(){var a=this;if("none"===a._selectionMode)return a;var b,d,e=Da(a._dataModel.datas);if(a._selectableFunc)for(b=0;b<e.length;b++)a._selectableFunc(e[b])||(e.splice(b,1),b--);var f=Da(a._list),g=a._map;for(a._list.length=0,a._map={},"single"===a._selectionMode&&e.length>1&&(e=[e[e.length-1]]),b=0;b<e.length;b++)d=e[b],a._list.push(d),a._map[d.uuid]=d;return a.esc("all",c,f,g),a},isSelected:function(a){return this._map[a.uuid]!=c},isSelectable:function(a){return a&&"none"!==this._selectionMode?this._selectableFunc?this._selectableFunc(a):!0:!1},onPropertyChange:function(a){var b=a.property;("selectionMode"===b||"selectableFunc"===b)&&this.clearSelection()}},{properties:["selectionMode","selectableFunc"],emitter:!0},{length:{get:function(){return this._list.length}},firstData:{get:function(){return this._list[0]}},lastData:{get:function(){return this._list[this._list.length-1]}},selection:{get:function(){return this._list},set:function(a){var b=this,d=b._list;if("none"===b._selectionMode)return b;if(0===d.length&&!a)return b;if(1===d.length&&b.lastData===a)return b;var e=Da(d),f=b._map;d.length=0,b._map={};var g=b.filterArray(a,!0);return"single"===b._selectionMode&&g.length>1&&(g=[g[g.length-1]]),g.forEach(function(a){d.push(a),b._map[a.uuid]=a}),b.esc("set",c,e,f),b}},topSelection:{get:function(){var a=this,b=[];return a._list.forEach(function(d){for(var e=d.parent;e;){if(a.isSelected(e)){d=c;break}e=e.parent}d&&b.push(d)}),b}}}),Oc=_("qc.widget.editor.Editor",b,function(a){Ha(this,a)},{getView:function(){},setValue:function(){},beginEditing:function(){},endEditing:function(){},getEditorValue:function(){},cancelEditing:function(){}},{properties:["table","property","data","event","point","rect"]}),Pc=_("qc.widget.editor.StringEditor",Oc,function(a){Pc["super"].constructor.call(this,a)},{getView:function(){var a=this,b=a._view;if(!b){var c=a._data,d=a._table,e=new zd,f=e.getInput();b=a._view=e,f.onblur=function(){d.endEditing()},f.onkeydown=function(a){Mb(a)?d.endEditing():Nb(a)&&d.cancelEditing()},a.onViewCreate(b),sa(f,d.getSelectBackground(c),2),f.style.font=d.getLabelFont(c)}return b},setValue:function(a){var b=this;a=b.formatValue(a),b._view.value=a==c?"":a},beginEditing:function(){this._view.getInput().focus()},getEditorValue:function(){return this.formatValue(this._view.value)},onViewCreate:function(){},formatValue:function(a){return a}}),Qc=_("qc.widget.editor.BooleanEditor",Oc,function(a){Qc["super"].constructor.call(this,a)},{setValue:function(a){Oa(a)&&this.table.setValue(this.data,this.property,!a)}}),Rc=e.widget.Default.define("qc.widget.editor.ColorEditor",e.widget.editor.Editor,function(a){Rc["super"].constructor.call(this,a),a=a||{},a.dropDown="qc.widget.ColorChooserDropDown";var b=this,c=b._view=new e.widget.ComboBox(a);c.onClose=function(){b._table.endEditing()},b.instant&&c.on("propertyChange",function(a){b.table.setValue(b.data,b.property,a.newValue)})},{getView:function(){return this._view},setValue:function(a){if(a&&a.indexOf("(")<0&&a.indexOf("#")<0){var b=lb(a);a="rgba("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]/255+")"}this._view.value=a},beginEditing:function(){this._view.toggle()},endEditing:function(){this._view.close()},getEditorValue:function(){return this._view.value},cancelEditing:function(){this._view.close()}}),Sc=e.widget.Default.define("qc.widget.editor.EnumEditor",e.widget.editor.Editor,function(a){Sc["super"].constructor.call(this,a);var b=this,c=b._view=new e.widget.ComboBox(a);c.onClose=function(){b._table.endEditing()}},{getView:function(){return this._view},setValue:function(a){this._view.data=this["enum"],this._view.value=a},beginEditing:function(){this._view.toggle()},endEditing:function(){this._view.close()},getEditorValue:function(){return this._view.value},cancelEditing:function(){this._view.close()}},{properties:["enum"]}),Tc=_("qc.widget.editor.IntEditor",Pc,function(a){Tc["super"].constructor.call(this,a)},{formatValue:function(a){var b=u(a);return isNaN(b)?"":b},onViewCreate:function(a){a.maskRe=/[\d\-]/}}),Uc=_("qc.widget.editor.NumberEditor",Pc,function(a){Uc["super"].constructor.call(this,a)},{_digits:3,formatValue:function(a){var b=parseFloat(a);return isNaN(b)?"":parseFloat(b.toFixed(this.digits))},onViewCreate:function(a){a.maskRe=/[\d\-\.]/}},{properties:["digits"]}),Vc=_("qc.widget.editor.SliderEditor",e.widget.editor.Editor,function(a){Vc["super"].constructor.call(this,a);var b=this,c=b._view=new e.widget.Slider(a);c.on("propertyChange",function(a){b.table.setValue(b.data,b.property,a.newValue)})},{getView:function(){return this._view},setValue:function(a){this._view.value=a},getEditorValue:function(){return this._view.value}}),Wc=_("qc.widget.renderer.Renderer",b,function(a){Ha(this,a)},{draw:function(){}},{properties:["table","property","data"]}),Xc=_("qc.widget.renderer.StringRenderer",Wc,function(a){Xc["super"].constructor.call(this,a)},{_align:"left",draw:function(a,b,c,d,e,f){b=this.formatValue(b),this._background&&qb(a,c,d,e,f,this._background),this.drawLabel(a,b,c,d,e,f)},drawLabel:function(a,b,c,d,f,g,h){var i=this,j=i._table,k=i._data,l=i._property,m=i._color,n=i._selectColor,o=i._font||j.getLabelFont(k,l),p=!1;j instanceof e.widget.PropertyTable?j.isPropertySelected(l)&&(p=!0):j.isSelected(k)&&(p=!0),m=p?n||j.getLabelColor(k,l):m||j.getLabelColor(k,l),ea(a,b,o,m,c,d,f,g,h||i._align)},formatValue:function(a){return a}},{properties:["align","font","color","selectColor","background"]}),Yc=_("qc.widget.renderer.BooleanRenderer",Wc,function(a){Yc["super"].constructor.call(this,a)},{draw:function(a,b,c,d,e,f){this._background&&qb(a,c,d,e,f,this._background),Oa(b)&&da(a,b?"check":"uncheck","centerUniform",c,d,e,f)}},{properties:["background"]}),Zc=_("qc.widget.renderer.ColorRenderer",Xc,function(a){Zc["super"].constructor.call(this,a)},{_align:"center",_labelVisible:!0,draw:function(a,b,c,d,e,f){this._background&&qb(a,c,d,e,f,this._background),b&&qb(a,c,d,e,f,b),this._labelVisible&&this.drawLabel(a,b,c,d,e,f)}},{properties:["labelVisible"]}),$c=_("qc.widget.renderer.EnumRenderer",Wc,function(a){$c["super"].constructor.call(this,a)},{_align:"left",_indent:e.widget.Default.indent,draw:function(a,b,d,e,f,g){var h=this.getLabel(b),i=this.getIcon(b),j=this.indent;i!=c&&(da(a,i,null,d,e,this.indent,g,this._data,this._table),d+=j,f-=j),this.drawLabel(a,h,d,e,f,g)},drawLabel:function(a,b,c,d,e,f){var g=this,h=g._table,i=g._data,j=g._property,k=h.getLabelFont(i,j),l=h.getLabelColor(i,j);ea(a,b,k,l,c,d,e,f,g._align)},getLabel:function(a){var b=this,c=b._labelMap,d=b["enum"],e=d.length;if(!c){c={};for(var f=0;e>f;f++){var g,h,i,j=d[f];Qa(j)?(g=j[0],h=j[1],i=j[2]):(g=j.icon,h=j.label,i=j.value),c[i]=h}b._labelMap=c}return c[a]},getIcon:function(a){var b=this,c=b._iconMap,d=b["enum"],e=d.length;if(!c){c={};for(var f=0;e>f;f++){var g,h,i,j=d[f];Qa(j)?(g=j[0],h=j[1],i=j[2]):(g=j.icon,h=j.label,i=j.value),c[i]=g}b._iconMap=c}return c[a]}},{properties:["align","font","color","background","enum","indent"]}),_c=_("qc.widget.renderer.IntRenderer",Xc,function(a){_c["super"].constructor.call(this,a)},{formatValue:function(a){return a==c?a:u(a)}}),ad=_("qc.widget.renderer.NumberRenderer",Xc,function(a){ad["super"].constructor.call(this,a)},{_digits:3,formatValue:function(a){return Na(a)&&(a=parseFloat(a)),a==c?a:parseFloat(a.toFixed(this._digits))}},{properties:["digits"]}),bd=_("qc.widget.renderer.IconRenderer",Wc,function(a){bd["super"].constructor.call(this,a)},{_stretch:"centerUniform",draw:function(a,b,c,d,e,f){var g=this;g._background&&qb(a,c,d,e,f,g._background),da(a,b,g._stretch,c,d,e,f,g._data,g._table)}},{properties:["stretch","background"]}),cd=function(a,b,c){for(var d=b.length,e=0;d>e;e++)if(cd(a,b.children[e],c)===!1)return!1;return a.call(c,b)===!1?!1:!0},dd=function(a,b,c){for(var d=0;d<c.length;d++){var e=c[d];a.isSelected(e)&&b.push(e)}for(d=0;d<c.length;d++)dd(a,b,e=c[d]._children)},ed=function(a,b,c){for(var d=0;d<c.length;d++){var e=c[c.length-1-d];a.isSelected(e)&&b.push(e)}for(d=0;d<c.length;d++)ed(a,b,c[d]._children)},fd=function(a,b,c){for(var d=!1,e=0;e<c.length;e++){var f=c[e];a.isSelected(f)?d&&b.push(f):d=!0}for(e=0;e<c.length;e++)fd(a,b,c[e]._children)},gd=function(a,b,c){for(var d=!1,e=0;e<c.length;e++){var f=c[c.length-1-e];a.isSelected(f)?d&&b.push(f):d=!0}for(e=0;e<c.length;e++)gd(a,b,c[e]._children)};G(Mc,{forEachByDepthFirst:function(a,b,c){var d=this;if(b)cd(a,b,c);else for(var e=0,f=d._roots.length;f>e;e++)if(cd(a,d._roots[e],c)===!1)return d;return d},forEachByBreadthFirst:function(a,b,c){var d=this,e=[];for(b?e.push(b):Ua(e,d._roots);e.length;)if(b=e.splice(0,1)[0],Ua(e,b.children),a.call(c,b)===!1)return d;return d},moveTo:function(a,b){var c=a.siblings,d=c.indexOf(a);return d===b||0>d?this:(b>=0&&b<=c.length&&(Ta(c,a),b>c.length&&b--,Sa(c,a,b),this.emit("hierarchyChange",{data:a,oldIndex:d,newIndex:b})),this)},moveUp:function(a){return this.moveTo(a,a.siblings.indexOf(a)-1),this},moveDown:function(a){return this.moveTo(a,a.siblings.indexOf(a)+1),this},moveToTop:function(a){return this.moveTo(a,0),this},moveToBottom:function(a){return this.moveTo(a,a.siblings.length),this},moveSelectionUp:function(a){var b=this,c=[];return fd(a||b.selectionModel,c,b._roots),c.forEach(b.moveUp,b),b},moveSelectionDown:function(a){var b=this,c=[];return gd(a||b.selectionModel,c,b._roots),c.forEach(b.moveDown,this),b},moveSelectionToTop:function(a){var b=this,c=[];return ed(a||b.selectionModel,c,b._roots),c.forEach(b.moveToTop,b),b},moveSelectionToBottom:function(a){var b=this,c=[];return dd(a||b.selectionModel,c,b._roots),c.forEach(b.moveToBottom,b),b}}),G(D,{color:Zc,"int":_c,number:ad,"boolean":Yc,icon:bd},!0),G(E,{color:Rc,"int":Tc,number:Uc,"boolean":Qc},!0);var hd=function(a,b,c,d,e,f,g){var h=a.createLinearGradient(d,e,f,g);return h.addColorStop(0,c),h.addColorStop(1,b),h},id=function(a,b,c,d,e,f,g){var h=a.createLinearGradient(d,e,f,g);return h.addColorStop(0,b),h.addColorStop(.5,c),h.addColorStop(1,b),h},jd=function(a,b,c,d,e,f,g){var h=a.createLinearGradient(d,e,f,g);return h.addColorStop(0,b),h.addColorStop(1/3,c),h.addColorStop(2/3,b),h.addColorStop(1,c),h},kd=function(a,b,c,d,e,f,g,h,i){var j=a.createRadialGradient(d+f*h,e+g*i,m(f,g)/24,d+f/2,e+g/2,l(f,g)/2);return j.addColorStop(0,c),j.addColorStop(1,b),j};G(B,{"linear.southwest":function(a,b,c,d,e,f,g){return hd(a,b,c,d,e+g,d+f,e)},"linear.southeast":function(a,b,c,d,e,f,g){return hd(a,b,c,d+f,e+g,d,e)},"linear.northwest":function(a,b,c,d,e,f,g){return hd(a,b,c,d,e,d+f,e+g)},"linear.northeast":function(a,b,c,d,e,f,g){return hd(a,b,c,d+f,e,d,e+g)},"linear.north":function(a,b,c,d,e,f,g){return hd(a,b,c,d,e,d,e+g)},"linear.south":function(a,b,c,d,e,f,g){return hd(a,b,c,d,e+g,d,e)},"linear.west":function(a,b,c,d,e,f){return hd(a,b,c,d,e,d+f,e)},"linear.east":function(a,b,c,d,e,f){return hd(a,b,c,d+f,e,d,e)},"radial.center":function(a,b,c,d,e,f,g){return kd(a,b,c,d,e,f,g,.5,.5)},"radial.southwest":function(a,b,c,d,e,f,g){return kd(a,b,c,d,e,f,g,.25,.75)},"radial.southeast":function(a,b,c,d,e,f,g){return kd(a,b,c,d,e,f,g,.75,.75)},"radial.northwest":function(a,b,c,d,e,f,g){return kd(a,b,c,d,e,f,g,.25,.25)},"radial.northeast":function(a,b,c,d,e,f,g){return kd(a,b,c,d,e,f,g,.75,.25)},"radial.north":function(a,b,c,d,e,f,g){return kd(a,b,c,d,e,f,g,.5,.25)},"radial.south":function(a,b,c,d,e,f,g){return kd(a,b,c,d,e,f,g,.5,.75)},"radial.west":function(a,b,c,d,e,f,g){return kd(a,b,c,d,e,f,g,.25,.5)},"radial.east":function(a,b,c,d,e,f,g){return kd(a,b,c,d,e,f,g,.75,.5)},"spread.horizontal":function(a,b,c,d,e,f){return id(a,b,c,d,e,d+f,e)},"spread.vertical":function(a,b,c,d,e,f,g){return id(a,b,c,d,e,d,e+g)},"spread.north":function(a,b,c,d,e,f,g){return jd(a,b,c,d,e-g/4,d,e+g+g/4)},"spread.south":function(a,b,c,d,e,f,g){return jd(a,c,b,d,e-g/4,d,e+g+g/4)},"spread.west":function(a,b,c,d,e,f){return jd(a,b,c,d-f/4,e,d+f+f/4,e)},"spread.east":function(a,b,c,d,e,f){return jd(a,c,b,d-f/4,e,d+f+f/4,e)}},!0),G(A,{polygon:function(a,b,d,e,f,g){var h=g?g.side:6;(h==c||3>h)&&(h=6);var i=g?g.beginAngle:0;i==c&&(i=0);for(var j,k,l=m(e,f)/2,n=b+e/2,r=d+f/2,s=2*q/h,t=0;h>t;t++)j=n+o(i)*l,
k=r+p(i)*l,0===t?a.moveTo(j,k):a.lineTo(j,k),i+=s;a.closePath()},arc:function(a,b,d,e,f,g){var h,i,j,k;g&&(h=g.beginAngle,i=g.endAngle,j=g.closePath,k=g.oval),h==c&&(h=q),i==c&&(i=r),j==c&&(j=!0),k==c&&(k=!1);var l=b+e/2,n=d+f/2;j&&a.moveTo(l,n),k?(h=-h,i=-i,sb(a,l,n,h,i-h,e/2,f/2,!0)):a.arc(l,n,m(e,f)/2,h,i),j&&a.closePath()},roundRect:function(a,b,d,e,f,g){g=g||{};var h=g.cornerRadius;h==c&&(h=m(m(e,f)/4,8));var i=g.topLeftRadius;i==c&&(i=h);var j=g.topRightRadius;j==c&&(j=h);var k=g.bottomLeftRadius;k==c&&(k=h);var l=g.bottomRightRadius;l==c&&(l=h),tb(a,b,d,e,f,i,j,k,l)},rect:function(a,b,c,d,e){a.rect(b,c,d,e)},circle:function(a,b,c,d,e){a.arc(b+d/2,c+e/2,m(d,e)/2,0,r,!0)},oval:function(a,b,c,d,e){sb(a,b+d/2,c+e/2,0,r,d/2,e/2,!1)},star:function(a,b,c,d,e){var f=2*d,g=2*e,h=b+d/2,i=c+e/2;a.moveTo(h-f/4,i-g/12),a.lineTo(b+.306*d,c+.579*e),a.lineTo(h-f/6,i+g/4),a.lineTo(b+d/2,c+.733*e),a.lineTo(h+f/6,i+g/4),a.lineTo(b+.693*d,c+.579*e),a.lineTo(h+f/4,i-g/12),a.lineTo(b+.611*d,c+.332*e),a.lineTo(h+0,i-g/4),a.lineTo(b+.388*d,c+.332*e),a.closePath()},triangle:function(a,b,c,d,e){a.moveTo(b+d/2,c),a.lineTo(b+d,c+e),a.lineTo(b,c+e),a.closePath()}},!0),G(C,{image:function(a,b,c,d,e,f){var g=ca(_b(c.name,d,e),h);if(g){var h=_b(c.blendColor,d,e)||f;da(a,g,_b(c.stretch,d,e),b.x,b.y,b.width,b.height,d,e,h,!1)}},text:function(a,b,d,e,f,g){var h=_b(d.text,e,f);h!=c&&ea(a,h,_b(d.font,e,f),ac(d.color,e,f,g),b.x,b.y,b.width,b.height,_b(d.align,e,f),_b(d.vAlign,e,f))},border:function(a,b,c,d,e,f){var g=ac(c.borderColor,d,e,f),h=_b(c.borderWidth,d,e),i=_b(c.borderDepth,d,e);h&&rb(a,g,b.x,b.y,b.width,b.height,h),i&&ub(a,g,i,b)},shape:function(a,b,c,d,e,f){var g=ac(c.background,d,e,f),h=ca(_b(c.repeatImage,d,e),f);h?pb(a,h):g&&ob(a,g,_b(c.gradient,d,e),ac(c.gradientColor,d,e,f),b),wb(a,b.points,_b(c.segments,d,e),_b(c.closePath,d,e)),(h||g)&&a.fill();var i=_b(c.borderWidth,d,e);if(i){var j=ac(c.borderColor,d,e,f),k=_b(c.borderDashPattern,d,e);Sb(a,k,_b(c.borderDashOffset,d,e)),a.lineWidth=i,a.strokeStyle=j,a.stroke(),_b(c.borderGradient,d,e)&&vb(a,j,ac(c.borderGradientColor,d,e,f),i),Tb(a,k)}if(i=_b(c.border2Width,d,e)){var j=ac(c.border2Color,d,e,f),k=_b(c.border2DashPattern,d,e);Sb(a,k,_b(c.border2DashOffset,d,e)),a.lineWidth=i,a.strokeStyle=j,a.stroke(),_b(c.border2Gradient,d,e)&&vb(a,j,ac(c.border2GradientColor,d,e,f),i),Tb(a,k)}}},!0);var ld=_("qc.widget.Property",Lc,function Be(a){Be["super"].constructor.call(this,a)},{_icon:c,_color:c,_font:c,_align:c,_renderer:c,_rendererClass:c,_editor:c,_editorClass:c,_categoryName:c,_visible:!0,_accessType:"property",_valueType:c,_editable:!1,_batchEditable:!0,getValue:function(a){return Hc(a,this._accessType,this._name)},setValue:function(a,b){Ic(a,this._accessType,this._name,b)},getToolTip:function(a,b){return b.getValue(a,this)}},{properties:["font","color","align","renderer","rendererClass","editor","editorClass","categoryName","visible","accessType","valueType","editable","batchEditable"]}),md=_("qc.widget.Column",ld,function Ce(a){Ce["super"].constructor.call(this,a)},{_width:80,_sortOrder:"asc",_sortFunc:c,_sortable:!0},{properties:["sortOrder","sortFunc","sortable"]},{width:{get:function(){return this._width},set:function(a){16>a&&(a=16);var b=this._width;this._width=a,this.epc("width",b,a)}}}),nd=_("qc.widget.Tab",Lc,function De(){De["super"].constructor.call(this)},{_icon:c,_closable:!1,_disabled:!1},{properties:["view","closable","disabled"]});_("qc.widget.List",b,function(a,b){this.initList(a),new Hd(this),Ha(this,b)},{_rowLineVisible:!1,drawRow:function(a,b,d,e,f,g){var h=this,i=0,j=h._indent,k=h.getIcon(b)?j:0;h.drawRowBackground(a,b,d,e,f,g),h._checkMode&&(da(a,h.getCheckIcon(b),c,i,e,j,g,b,h),i+=j),h.drawIcon(a,b,i,e,k,g),h.drawLabel(a,b,i+k,e,g)}},{view:!0,scrollBar:!0,element:!0,emitter:!0,toolTip:!0,painter:!0,bnb:!0,sm:!0,list:!0}),_("qc.widget.Table",b,function(a,b){var c=this;c.initTable(),c.initList(a),c._editorDiv=pa(!1,c._view),new Id(c),Ha(c,b)},{onCheckColumnClick:function(){}},{view:!0,scrollBar:!0,element:!0,emitter:!0,toolTip:!0,painter:!0,bnb:!0,sm:!0,list:!0,table:!0,property:!0},{checkMode:{set:function(a){var b=this,c=b._columnModel,d=b.checkColumn,e=b._checkMode;a!==e&&(a?c.contains(d)||c.add(d,0):c.contains(d)&&c.remove(d),b._checkMode=a,b.epc("checkMode",e,a))},get:function(){return this._checkMode}},checkColumn:{get:function(){var a=this;if(!a._checkColumn){var b=a._checkColumn=new md;b.editable=!0,b.width=40,b.valueType="boolean",b.getValue=function(b){return a.isSelected(b)},b.setValue=function(b){a.checkData(b)}}return a._checkColumn}}}),_("qc.widget.Tree",b,function(a,b){this.initTree(),this.initList(a),new Jd(this),Ha(this,b)},{drawRow:function(a,b,c,d,e,f){this.drawRowBackground(a,b,c,d,e,f),this.drawTree(a,b,0,d,e,f)}},{view:!0,scrollBar:!0,element:!0,emitter:!0,toolTip:!0,painter:!0,bnb:!0,sm:!0,list:!0,tree:!0}),_("qc.widget.TreeTable",b,function(a,b){var c=this,d=c._treeColumn=new md;c.initTree(),c.initTable(),c.initList(a),c._editorDiv=pa(!1,c._view),d.editable=!0,d.width=180,d.getValue=function(a){return a.name},d.renderer=new Wc({draw:function(a,b,d,e,f,g){c.drawTree(a,this.data,d,e,f,g)}}),c._columnModel.add(d),new Kd(this),Ha(c,b)},{getTreeColumn:function(){return this._treeColumn}},{view:!0,scrollBar:!0,element:!0,emitter:!0,toolTip:!0,painter:!0,bnb:!0,sm:!0,list:!0,tree:!0,table:!0,property:!0});var od="_NONE_";_("qc.widget.PropertyTable",b,function(a,b){var c=this;c._rows=[],c._categories=[],c._categoryMap={},c._historyMap={};var d=c._propertyModel=new Mc;d.on("dataModelChange",c.ivm,c),d.on("dataPropertyChange",c.ivm,c),d.on("hierarchyChange",c.ivm,c),c.initView(!0,!0),c.scrollBarMode="auto",c._editorDiv=pa(!1,c._view),c.dataModel=a?a:new Mc,new Ld(c),Ha(c,b)},{_batchEditable:!0,_categorizable:!0,_expandIcon:"expand",_collapseIcon:"collapse",_selectRowIndex:-1,_selectBackground:L,_background:y.propertyTableBackground,_labelColor:M,_labelSelectColor:N,_labelFont:I,_indent:w.indent,_rowHeight:w.rowHeight,_rowLineVisible:!0,_rowLineColor:$,_columnLineVisible:!0,_columnLineColor:$,_columnLineX:0,_columnPosition:.5,ivm:function(){this._invalidateModel||(this._invalidateModel=!0,this.iv())},getRows:function(){return this._rows},isPropertySelected:function(a){var b=this._selectRowIndex,c=this._rows;if(b>=0&&b<c.length){var d=c[b];if(d.property===a)return!0}return!1},getSelectBackground:function(){return this.selectBackground},getColumnPosition:function(){return this._columnPosition},setColumnPosition:function(a){0>a&&(a=0),a>1&&(a=1);var b=this,c=b._columnPosition;b._columnPosition=a,b.epc("columnPosition",c,a)},getLabelFont:function(a,b){return this.labelFontFunc?this.labelFontFunc(a,b):this._labelFont},getLabelColor:function(a,b){var c=this;return c.labelColorFunc?c.labelColorFunc(a,b):c.isPropertySelected(b)?c._labelSelectColor:c._labelColor},getPropertyName:function(a){return a.displayName==c?a.name:a.displayName},getPropertyFont:function(a){return a.font||this._labelFont},getPropertyColor:function(a){return this.isPropertySelected(a)?this._labelSelectColor:a.color||this._labelColor},getCategoryFont:function(){return this._labelFont},getCategoryColor:function(){return this._labelColor},isExpanded:function(a){if(!a)return!0;var b=this._categoryMap[a];return b?b.isExpanded:!(this._historyMap[a]===!1)},toggle:function(a){var b=this;b.isExpanded(a)?b.collapse(a):b.expand(a)},expandAll:function(){this.validate();for(var a in this._categoryMap)this.expand(a)},expand:function(a){if(a&&a!==od){var b=this,c=b._categoryMap[a];c&&!c.isExpanded&&(c.isExpanded=!0,b.onExpand(a),b.ivm())}},onExpand:function(){},collapseAll:function(){this.validate();for(var a in this._categoryMap)this.collapse(a)},collapse:function(a){if(a&&a!==od){var b=this,c=b._categoryMap[a];c&&c.isExpanded&&(c.isExpanded=!1,b.onCollapse(a),b.ivm())}},onCollapse:function(){},getCategoryName:function(a){if(!this.categorizable)return od;var b=a.categoryName;return b?b:od},isVisible:function(a){return this._visibleFunc?this._visibleFunc(a):!0},onPropertyChange:function(a){var b=this,c=a.property;b.checkChildPreferredSizeChange(c),yc[c]?b.ivm():b.iv(),vc[c]&&(b.showScrollBar(),b.endEditing()),"selectRowIndex"===c&&b.scrollToIndex(b._selectRowIndex)},handleDataPropertyChange:function(a){this._currentData===a.data&&this.iv()},redraw:function(){this.iv()},validateModel:function(){var a=this,b=a._rows,c=a._categories,e={},f=[],g=a._currentData;a._currentData=a.selectionModel.lastData,g!==a._currentData&&a.endEditing(),b.length=0,c.length=0;var h=a._currentData?a._propertyModel._roots:na;h.forEach(function(b){if(a.isVisible(b)){f.push(b);var g=a.getCategoryName(b);e[g]||(Sa(c,g,g===od?0:d),e[g]={isExpanded:a.isExpanded(g),properties:[]})}}),a._sortFunc&&f.sort(a._sortFunc);for(var i in a._categoryMap)a._historyMap[i]=a.isExpanded(i);a._categoryMap=e,c.forEach(function(c){c!==od&&b.push(c);var d=e[c];d.isExpanded&&f.forEach(function(e){a.getCategoryName(e)===c&&(d.properties.push(e),b.push({property:e,data:a._currentData}))})})},validateImpl:function(){var a=this;a.removeElements(),a._invalidateModel&&(a.validateModel(),delete a._invalidateModel);var b=a._canvas,d=a.clientWidth,e=a.clientHeight,f=-a.translateY,g=a._rowHeight,h=a._indent,k=d,l=a._rows,m=l.length,n=a._columnLineX=k*a._columnPosition,o=a._scrollHeight=m*g;ra(b,d,e),a._viewRect={x:0,y:f,width:d,height:e},a._beginRowIndex=i(f/g),a._endRowIndex=j((f+e)/g),a._beginRowIndex<0&&(a._beginRowIndex=0),a._endRowIndex>m&&(a._endRowIndex=m);var p=Rb(b,0,-f,1,{x:0,y:f,width:d,height:e});a.drawBottomPainters(p);for(var q=a._beginRowIndex;q<a._endRowIndex;q++){var r=l[q],f=g*q;if(!Na(r)){var s=r.property,t=r.data;a.drawRowBackground(p,r,0,f,k,g,q),da(p,s.icon,c,0,f,h,g),p.save(),p.beginPath(),p.rect(h,f,n-h,g),p.clip(),a.drawPropertyName(p,s,q,h,f,n-h,g),p.restore(),a.drawCell(p,t,s,n+1,f,d-n-1,g)}a._rowLineVisible&&qb(p,0,f+g-1,k,1,a._rowLineColor)}a._columnLineVisible&&(qb(p,n,0,1,o,a._columnLineColor),qb(p,d-1,0,1,o));for(var q=a._beginRowIndex;q<a._endRowIndex;q++){var r=l[q],f=g*q;if(Na(r)){a.drawRowBackground(p,r,0,f,k,g);var u=a.isExpanded(r)?a._expandIcon:a._collapseIcon;da(p,u,c,0,f,h,g),p.save(),p.beginPath(),p.rect(h,f,k,g),p.clip(),a.drawCategoryName(p,r,h,f,k,g),p.restore()}}a.drawTopPainters(p),p.restore(),a.translateY=a.translateY},drawRowBackground:function(a,b,d,e,f,g,h){{var i=this,j=i._background;i._indent}if(Na(b))j&&qb(a,d,e,f,g,j);else{var k=i._selectRowIndex===h?i.selectBackground:c;k?qb(a,d,e,f,g,k):qb(a,d,e,f,g,"white")}},drawCategoryName:function(a,b,c,d,e,f){ea(a,b,this.getCategoryFont(b),this.getCategoryColor(b),c,d,e,f)},drawPropertyName:function(a,b,c,d,e,f,g){ea(a,this.getPropertyName(b),this.getPropertyFont(b),this.getPropertyColor(b),d,e,f,g)},setProperties:function(a){this._propertyModel.clear(),this.addProperties(a)},addProperties:function(a){a&&a.forEach(function(a){a instanceof ld||(a=Ga(ld,a)),this._propertyModel.add(a)},this)},getRowIndexAt:function(a){var b=this,c=i(b.lp(a).y/b._rowHeight);return c>=0&&c<b._rows.length?c:-1},getPropertyAt:function(a){var b=this,d=b.getRowIndexAt(a);return d>=0?b._rows[d].property:c},getToolTip:function(a){var b=this,d=b.getPropertyAt(a),e=b._currentData;return d&&e?b.lp(a).x<b._columnLineX?b.getPropertyName(d):d.getToolTip(e,b):c},scrollToIndex:function(a){var b=this,c=b._viewRect,d=c.height,e=b._rowHeight,f=e*a;a>=0&&a<b._rows.length&&d>0&&(f+e>c.y+d?b.translateY=-f+d-e:f<c.y&&(b.translateY=-f))}},{properties:["categorizable","expandIcon","collapseIcon","selectRowIndex","selectBackground","background","labelColor","labelColorFunc","labelSelectColor","labelFont","labelFontFunc","indent","rowHeight","rowLineVisible","rowLineColor","columnLineVisible","columnLineColor","columnPosition"],view:!0,scrollBar:!0,element:!0,emitter:!0,toolTip:!0,painter:!0,sm:!0,property:!0},{dataModel:{get:function(){return this._dataModel},set:function(a){var b=this,c=b._dataModel;c!==a&&(c&&(c.off("dataPropertyChange",b.handleDataPropertyChange,b),b._selectionModel||c.selectionModel.off("selectionChange",b.ivm,b)),b._dataModel=a,a.on("dataPropertyChange",b.handleDataPropertyChange,b),b._selectionModel?b._selectionModel._setDataModel(a):a.selectionModel.on("selectionChange",b.ivm,b),b.epc("dataModel",c,a))}},propertyModel:{get:function(){return this._propertyModel}},currentData:{get:function(){return this._currentData}}}),_("qc.widget.TableHeader",b,function(a,b){var c=this,d=a.columnModel;c.initView(!0,!0),c._table=a,c._columnInfos=[],d.on("dataModelChange",c.iv,c),d.on("dataPropertyChange",c.iv,c),d.on("hierarchyChange",c.iv,c),c._view.style.background=y.tableHeaderBackground,c.height=w.headerHeight,a.on("propertyChange",function(a){uc[a.property]&&c.iv()},c),new Md(c),Ha(c,b)},{_labelColor:M,_labelFont:I,_align:"left",_indent:w.indent,_checkIcon:"uncheck",_sortDescIcon:"sortDesc",_sortAscIcon:"sortAsc",_columnLineVisible:!0,_columnLineColor:$,_moveBackground:y.tableHeaderMoveBackground,_insertColor:y.tableHeaderInsertColor,_resizable:!0,_movable:!0,_movingColumnInfo:c,getTable:function(){return this._table},getLabel:function(a){return a.displayName==c?a.name:a.displayName},getLabelFont:function(a){return a.font||this._labelFont},getLabelColor:function(a){return a.color||this._labelColor},getAlign:function(a){return a.align||this._align},onPropertyChange:function(a){this.checkChildPreferredSizeChange(a.property),this.iv()},isMultiCheckableColumn:function(a){return this._table._checkColumn===a&&"multiple"===this._table.selectionModel.selectionMode},validateImpl:function(){var a=this,b=a._canvas,c=a.clientWidth,d=a.clientHeight,e=a._columnInfos,f=a._movingColumnInfo,g=-a._table.translateX,h=0;(c!==b.clientWidth||d!==b.clientHeight)&&ra(b,c,d),e.length=0,a._table._columnModel._roots.forEach(function(a){if(a.visible){var b=h+a.width;g+c>=h&&b>=g&&e.push({column:a,beginX:h,endX:b}),h=b}});var i=Rb(b,-g,0,1,{x:g,y:0,width:c,height:d});if(e.forEach(function(b){var c=b.column,e=b.beginX,g=c.width;g&&(i.save(),i.beginPath(),i.rect(e,0,g,d),i.clip(),f&&f.column===c||a.drawColumn(i,c,e,0,g,d),a._columnLineVisible&&qb(i,e+g-1,0,1,d,a._columnLineColor),i.restore())}),f){var j=f.column,h=f.beginX,k=j.width;i.save(),i.beginPath(),i.rect(h,0,k,d),i.clip(),i.fillStyle=a._moveBackground,i.fill(),a.drawColumn(i,j,h,0,k,d),i.restore(),kc(i,a._insertColor,f.position,0,d)}i.restore()},drawColumn:function(a,b,d,e,f,g){var h=this,i=h.getAlign(b);if(h.isMultiCheckableColumn(b)?da(a,h._checkIcon,c,d,e,f,g):lc(a,d,e,f,g,b.icon,h.getLabel(b),h.getLabelFont(b),h.getLabelColor(b),i,h._indent),b.sortable&&h._table.sortColumn===b){var j="asc"===b.sortOrder?h._sortAscIcon:h._sortDescIcon,k=Zb(j);da(a,j,c,"right"===i?d+2:d+f-2-k,e,k,g)}}},{view:!0,emitter:!0,properties:["labelColor","labelFont","align","indent","checkIcon","sortDescIcon","sortAscIcon","columnLineVisible","columnLineColor","moveBackground","insertColor","resizable","movable","movingColumnInfo"]},{translateX:{get:function(){return this._table.translateX},set:function(a){this._table.translateX=a}}}),_("qc.widget.TablePane",b,function(a,b){this.init(new e.widget.Table(a)),Ha(this,b)},{},{view:!0,emitter:!0,tablePane:!0}),_("qc.widget.TreeTablePane",b,function(a,b){this.init(new e.widget.TreeTable(a)),Ha(this,b)},{},{view:!0,emitter:!0,tablePane:!0});var pd=_("qc.widget.layout.BorderLayout",b,function(a,b){this.container=a,this._interactor=new Rd(this),this._toggleIcon={width:30,height:30,comps:[{type:"rect",rect:[17,1,1],relative:1,background:{func:function(a,b){return b.toggleIconBackground}}},{type:"triangle",rect:[17,1,1],background:{func:function(a,b){return b.toggleIconForecolor}}}]},Ha(this,b)},{_splitterColor:"rgb(165, 165, 165)",_leftResizable:!0,_rightResizable:!0,_topResizable:!0,_bottomResizable:!0,_leftToggleVisible:!0,_rightToggleVisible:!0,_topToggleVisible:!0,_bottomToggleVisible:!0,_leftSplitterVisible:!0,_rightSplitterVisible:!0,_topSplitterVisible:!0,_bottomSplitterVisible:!0,_minSize:10,_toggleIconBackground:"rgb(206, 206, 206)",_toggleIconForecolor:"rgb(165, 165, 165)",_leftViewExpanded:!0,_rightViewExpanded:!0,_topViewExpanded:!0,_bottomViewExpanded:!0,_splitterSize:6,_preferredSizeProperties:["minSize","splitterSize","topViewExpanded","bottomViewExpanded","leftViewExpanded","rightViewExpanded","leftSplitterVisible","rightSplitterVisible","topSplitterVisible","bottomSplitterVisible","topView","bottomView","leftView","rightView","centerView"],getPreferredSize:function(){var a=this,b=a._container,c=b._preferredSize||b._calcdPreferredSize;if(!c){var d=function(b){var c,d=a["_"+b+"View"];return c=d?d.getPreferredSize():{width:0,height:0},{width:c.width,height:c.height}},e=a.splitterSize,f=d("left"),g=d("right"),h=d("top"),i=d("bottom"),j=d("center");a.leftView&&(f.width+=a.leftSplitterVisible?e:0),a.rightView&&(g.width+=a.rightSplitterVisible?e:0),a.topView&&(h.height+=a.topSplitterVisible?e:0),a.bottomView&&(i.height+=a.bottomSplitterVisible?e:0),b._calcdPreferredSize=c={width:f.width+g.width+j.width,height:h.height+j.height+i.height}}return c},isExpanded:function(a){var b=this;return b["_"+a+"View"]?!!this["_"+a+"ViewExpanded"]:void 0},setExpanded:function(a,b){var c=this.isExpanded(a);this["_"+a+"ViewExpanded"]=b,this.epc(a+"ViewExpanded",c,b)},onPropertyChange:function(a){var b=this._container,c=a.property;b.checkChildPreferredSizeChange(c,this._preferredSizeProperties),["leftView","rightView","topView","bottomView","centerView"].indexOf(c)>=0&&b.iv(!0),b.iv()},setContent:function(a,b){var d=this,e="_"+a,f=d._container._interactionDiv,g=d[e+"View"],h=d[e+"Splitter"];if(g!==b){if(g&&(g._parent=c,za(g.view),za(h)),b&&!b.view){var i=new rd;i.layout.htmlFill=!0,i.setItems(b),b=i}if(d[e+"View"]=b,b&&(b._parent=d.container,xa(f,b.view,1),"center"!==a)){var h=d[e+"Splitter"]=pa(!1,f),j=h.style;d[e+"SplitterCover"]=pa(!1,h);var k=d[e+"Toggle"]=qa(h),l=k.style;l.msTouchAction="auto",l.pointerEvents="auto",j.zIndex="1",j.background=d.splitterColor}d.epc(a+"View",g,b)}},resetItems:function(a){var b=this;b.leftView=c,b.rightView=c,b.topView=c,b.bottomView=c,b.centerView=c,a&&a.forEach(function(a){var c=a.region;"left"===c?(b.leftView=a.element,b.leftWidth=a.width):"right"===c?(b.rightView=a.element,b.rightWidth=a.width):"top"===c?(b.topView=a.element,b.topHeight=a.height):"bottom"===c?(b.bottomView=a.element,b.bottomHeight=a.height):"center"===c&&(b.centerView=a.element)})},doLayout:function(){var a=this,b=a._container,d=a.topView,e=a.bottomView,f=a.leftView,g=F?16:8,i=a.rightView,j=a.centerView,k=a.splitterSize,l=b.clientWidth,m=b.clientHeight,n=a.minSize,o=20,p=a._toggleIcon,q=0,r=0,s=l,t=m,u=0,v=0,w=0,x=0;if(b.width!=c&&b.height!=c&&b.isInDOM()){if(d){var y=a.topSplitterVisible?k:0,z=a.isExpanded("top");if(z){if(u=a._topHeight,u==c){var A=d.getPreferredSize();u=a._topHeight=A.height}r=u+y}else u=0,r=y}if(e){var B=a.bottomSplitterVisible?k:0,z=a.isExpanded("bottom");if(z){if(v=a._bottomHeight,v==c){var A=e.getPreferredSize();v=a._bottomHeight=A.height}t=m-v-B}else v=0,t=m-B}if(f){var C=a.leftSplitterVisible?k:0,z=a.isExpanded("left");if(z){if(w=a._leftWidth,w==c){var A=f.getPreferredSize();w=a._leftWidth=A.width}q=w+C}else w=0,q=C}if(i){var D=a.rightSplitterVisible?k:0,z=a.isExpanded("right");if(z){if(x=a._rightWidth,x==c){var A=i.getPreferredSize();x=a._rightWidth=A.width}s=l-x-D}else x=0,s=l-D}var E=s-q,G=t-r,H=!1;if(n>E&&(a.leftView||a.rightView)){var I=-(E-n);if(a.leftView){var J;J=w-I>n?I:w-n,w-=J,q-=J,I-=J}if(a.rightView&&I>0){var K;K=x-I>n?I:x-n,x-=K,s+=K,I-=K}if(I>0)return;a.leftWidth=w,a.rightWidth=x,H=!0}if(n>G&&(a.topView||a.bottomView)){var I=-(G-n);if(a.topView){var L;L=u-I>n?I:u-n,u-=L,r-=L,I-=L}if(a.bottomView&&I>0){var M;M=v-I>n?I:v-n,v-=M,t+=M,I-=M}if(I>0)return;a.topHeight=u,a.bottomHeight=v,H=!0}if(!H){var N,O=function(d,e,f,g,h,i,j,l){var m=a["_"+d+"View"],n=a["_"+d+"Splitter"],o=a["_"+d+"SplitterVisible"],q=a["_"+d+"SplitterCover"],r=a["_"+d+"Toggle"],s=a["_"+d+"Resizable"],t=a["_"+d+"ToggleVisible"];if(ua(m,e,b._forceLayout),ua(n,f),ua(q,g),0!==k&&o)if(n.style.display="block",s&&t){r.style.display="block",ra(r,h.width,h.height),ua(r,h);var u=Rb(r,0,0,1,{x:0,y:0,width:h.width,height:h.height});u.beginPath();var v=i;a.isExpanded(d)===!1&&(v=j),p.comps[1].rotation=v,da(u,p,null,l.x,l.y,l.width,l.height,c,a),u.restore()}else r.style.display="none";else n.style.display="none"};d&&(p.width=o,p.height=y,p.comps[1].rect=[17,y,y],N=h(y/2-g/2),O("top",{x:0,y:0,width:l,height:u},{x:0,y:u,width:l,height:y},{x:0,y:N,width:l,height:g},{x:l/2-o/2,y:N,width:o,height:g},0,Math.PI,{x:0,y:-N,width:o,height:y})),e&&(p.width=o,p.height=B,p.comps[1].rect=[17,B,B],N=h(B/2-g/2),O("bottom",{x:0,y:t+B,width:l,height:v},{x:0,y:t,width:l,height:B},{x:0,y:N,width:l,height:g},{x:l/2-o/2,y:N,width:o,height:g},-Math.PI,0,{x:0,y:-N,width:o,height:B})),f&&(N=h(C/2-g/2),p.width=C,p.height=o,p.comps[1].rect=[17,C,C],O("left",{x:0,y:r,width:w,height:G},{x:w,y:r,width:C,height:G},{x:N,y:0,width:g,height:G},{x:N,y:G/2-o/2,width:g,height:o},-Math.PI/2,Math.PI/2,{x:-N,y:0,width:C,height:o})),i&&(N=h(D/2-g/2),p.width=D,p.height=o,p.comps[1].rect=[17,D,D],O("right",{x:s+D,y:r,width:x,height:G},{x:s,y:r,width:D,height:G},{x:N,y:0,width:g,height:G},{x:N,y:G/2-o/2,width:g,height:o},Math.PI/2,-Math.PI/2,{x:-N,y:0,width:D,height:o})),j&&ua(j,q,r,E,G,b._forceLayout)}}},findViewById:function(a){for(var b=this,c=[b._leftView,b._rightView,b._topView,b._bottomView,b._centerView],d=0;d<c.length;d++){var e=c[d];if(e&&e.id===a)return e}for(var d=0;d<c.length;d++){var e=c[d];if(e){var f=e.findViewById(a);if(f)return f}}}},{emitter:!0,properties:["container","splitterColor","leftToggleVisible","rightToggleVisible","topToggleVisible","bottomToggleVisible","leftSplitterVisible","rightSplitterVisible","topSplitterVisible","bottomSplitterVisible","leftResizable","rightResizable","topResizable","bottomResizable","splitterSize","leftWidth","rightWidth","topHeight","bottomHeight","minSize","toggleIconBackground","toggleIconForecolor"]},{leftView:{set:function(a){this.setContent("left",a)},get:function(){return this._leftView}},rightView:{set:function(a){this.setContent("right",a)},get:function(){return this._rightView}},topView:{set:function(a){this.setContent("top",a)},get:function(){return this._topView}},bottomView:{set:function(a){this.setContent("bottom",a)},get:function(){return this._bottomView}},centerView:{set:function(a){this.setContent("center",a)},get:function(){return this._centerView}},preferredSize:{get:function(){return this.getPreferredSize()}},children:{get:function(){var a=[],b=this;return[b.leftView,b.rightView,b.topView,b.bottomView,b.centerView].forEach(function(b){b&&a.push(b)}),a}}});_("qc.widget.layout.AccordionLayout",b,function(a,b){var d=this;d.container=a,d._titleMap={},d._titleList=[],d._currentTitle=c,d._currentView=c,d._currentElement=c,d._interactor=new Qd(d),Ha(d,b)},{_expandIcon:null,_collapseIcon:null,_titleHeight:24,_labelColor:"black",_labelFont:"12px Arial",_titleBackground:"rgb(238, 238, 238)",_titleGradientColor:"rgb(211, 211, 211)",_titleActiveBackground:"rgb(223, 223, 223)",_titleActiveGradientColor:"rgb(233, 233, 233)",_selectBackground:"red",_selectWidth:0,_orientation:"v",_separatorColor:"rgb(195, 195, 195)",_preferredSizeProperties:[],getPreferredSize:function(){var a=this._container,b=a._preferredSize||a._calcdPreferredSize;return b||(a._calcdPreferredSize=b={width:100,height:100}),b},onPropertyChange:function(a){var b=this._container,c=a.property;b.checkChildPreferredSizeChange(c,this._preferredSizeProperties),"components"===c&&b.iv(!0),b.iv()},getTitles:function(){return this._titleList},getCurrentTitle:function(){return this._currentTitle},getTitle:function(a){var b=a.target,c=this._titleMap;for(var d in c){var e=c[d];if(e.div.contains(b))return d}},add:function(a,b,d,e){var f=this,g=pa(),h=f._container;if(b.view&&(b._parent=h),f._titleMap[a])throw a+" already exists";g.onmousedown=K,g.style.cursor="pointer",xa(h._interactionDiv,g),f._titleMap[a]={element:b,div:g,canvas:qa(g),icon:e},f._titleList.push(a),d&&f.expand(a),f.epc("components",c,f._titleList)},remove:function(a){var b=this,d=b._titleMap[a];if(d){var e=d.element;e.view&&(e._parent=c),za(d.div),delete b._titleMap[a],Ta(b._titleList,a),b.epc("components",c,b._titleList)}},clear:function(){var a=this,b=a._titleMap;if(b)for(var d in b){var e=b[d];e.element.view&&(e.element._parent=c)}a._titleMap={},a._titleList=[],a.epc("components",c,a._titleList)},isExpanded:function(a){return this._currentTitle===a},expand:function(a){var b=this;b._titleMap[a]&&b._currentTitle!==a&&(b._currentTitle=a,b.onExpanded(a),b._container.iv())},onExpanded:function(){},collapse:function(){var a=this;a._currentTitle&&(a.onCollapsed(a._currentTitle),delete a._currentTitle,a._container.iv())},onCollapsed:function(){},initCanvas:function(a,b,c){ra(a,b,c);var d=Rb(a,0,0,1,{x:0,y:0,width:b,height:c});return d},getStateTitleBackground:function(a){var b=this,c=b.isExpanded(a),d=[];if(c){var e=b.titleActiveBackground;if(e){d.push(e);var f=b.titleActiveGradientColor;f&&d.push(f)}}else{var g=b.titleBackground;if(g){d.push(g);var h=b.titleGradientColor;h&&d.push(h)}}return d},drawTitle:function(a,b,c,d,e){var f=this,g=ca(e.icon),h=f.isExpanded(b),i=f._titleHeight,j=f._titleBackground,k=f._selectWidth,l=f._separatorColor,m=f.titleBackgroundGradient||"linear.north",n=ca(h?f._expandIcon:f._collapseIcon),o=k+4;a.beginPath();var p=f.getStateTitleBackground(b);2===p.length?ob(a,p[1],m,p[0],{x:0,y:0,width:c,height:d}):a.fillStyle=p[0],a.rect(0,0,c,d),a.fill(),h&&k&&qb(a,0,0,k,d,f._selectBackground),(h||f._titleList[f._titleList.length-1]!==b)&&qb(a,0,d-1,c,1,l?l:jb(j)),g&&(da(a,g,null,o+Zb(g)/2,i/2),o+=Zb(g)+2),ea(a,b,f.labelFontFunc?f.labelFontFunc(b):f.labelFont,f.labelColorFunc?f.labelColorFunc(b):f.labelColor,o,0,0,i),n&&da(a,n,null,c-Zb(n)/2-4,i/2)},doLayout:function(){var a=this,b=a._container,c=0,d=0,e=b.clientWidth,f=b.clientHeight,g=a._orientation,h=a._titleHeight,i=a._titleList.length*h,j=a._currentElement,k=a._currentView;delete a._currentElement,delete a._currentView;var m=function(){var c=a._currentView;j&&j!==a._currentElement&&j.endEditing&&j.endEditing(),c&&c!==k&&xa(b._interactionDiv,c)};a._titleList.forEach(function(j){var k,n,o=a._titleMap[j],p=o.element,q=a._currentTitle===j;"horizontal"===g||"h"===g?(ua(o.div,c,0,h,f),k=a.initCanvas(o.canvas,h,f),Ub(k,0,f),Vb(k,-s),a.drawTitle(k,j,f,h,o),k.restore(),q?(n=l(0,e-i),p&&(a._currentElement=p,a._currentView=ta(p),m(),ua(p,c+h,0,n,f,b._forceLayout)),c+=h+n):c+=h):(ua(o.div,0,d,e,h),k=a.initCanvas(o.canvas,e,h),a.drawTitle(k,j,e,h,o),k.restore(),q?(n=l(0,f-i),p&&(a._currentElement=p,a._currentView=ta(p),m(),ua(p,0,d+h,e,n,b._forceLayout)),d+=h+n):d+=h)}),k&&k!==a._currentView&&za(k)},resetItems:function(a){var b=this;b.clear(),a&&a.forEach(function(a){b.add(a.title,a.element,a.expand,a.icon)})},findViewById:function(a){var b=this,c=b._titleMap;for(var d in c){var e=c[d].element;if(e.id===a)return e}for(var d in c){var e=c[d].element,f=e.findViewById(a);if(f)return f}}},{emitter:!0,properties:["container","expandIcon","collapseIcon","titleHeight","labelColor","labelFont","labelColorFunc","labelFontFunc","titleBackgroundGradient","titleBackground","titleGradientColor","titleActiveBackground","titleActiveGradientColor","selectWidth","selectBackground","orientation","separatorColor"]},{preferredSize:{get:function(){return this.getPreferredSize()}},children:{get:function(){var a=this,b=a._titleMap,c=[];for(var d in b)c.push(b[d].element);return c}}}),_("qc.widget.layout.FitLayout",b,function(a,b){var c=this;c.container=a,Ha(c,b)},{_htmlFill:!1,_preferredSizeProperties:["content","htmlFill"],getPreferredSize:function(a){var b,d=this,e=d._container;if(e._preferredSize)return e._preferredSize;if(e._calcdPreferredSizeMap||(e._calcdPreferredSizeMap={}),b=a==c?e._calcdPreferredSizeMap.nw:e._calcdPreferredSizeMap[a],!b){var f=d._contentObj,g=d.content;if(f&&g){var h=document.body;if(g.view)b=g.getPreferredSize(a);else if(d.htmlFill)b={width:100,height:100};else{var i=f.parentNode,j=f.style.display,k=f.style.width;f.style.display=Na(g)?"inline-block":g.style.display,a&&(f.style.width=a+"px"),h.appendChild(f),b={width:f.offsetWidth+1,height:f.offsetHeight},h.removeChild(f),f.style.width=k,f.style.display=j,i&&i.appendChild(f)}e._calcdPreferredSizeMap[a==c?"nw":a]=b}}return b},onPropertyChange:function(a){var b=this,c=b._container,d=a.property;if(c.checkChildPreferredSizeChange(d,b._preferredSizeProperties),"content"===d){var e=a.newValue,f=document.createElement("div");if(Na(e))f.innerHTML=e;else if(e.view){var g=e.view;f.appendChild(g)}else f.appendChild(e);f.style.position="absolute",f.className="contentObj",b._contentObj=f;var h=c._contentDiv;Aa(h,function(a){return a===c._canvas?!1:!0}),h.appendChild(f),c.iv(!0)}c.iv()},doLayout:function(){var a=this,b=a._container,d=b.clientWidth,e=b.clientHeight,f=a.htmlFill,g=b._contentDiv,h=a._contentObj,i=a.content;if(i.view)ua(i,c,c,d,e,b._forceLayout);else if(f){h.style.width="100%",h.style.height="100%";var j=h.children;1===j.length&&(j[0]._oldWidth=j[0].style.width,j[0]._oldHeight=j[0].style.height,j[0].style.width="100%",j[0].style.height="100%")}else{h.style.width="",h.style.height="";var j=h.children;1===j.length&&(j[0].style.width=j[0]._oldWidth,j[0].style.height=j[0]._oldHeight)}b._viewRect={x:-b.translateX,y:-b.translateY,width:d,height:e},b._scrollWidth=h.scrollWidth,b._scrollHeight=h.scrollHeight,g.scrollLeft=-b.translateX,g.scrollTop=-b.translateY},resetItems:function(a){var b,d=this;b=Qa(a)?a[0]:a;var e=d.content;e&&e.addToDOM&&(e._parent=c),d.content=b,b&&b.addToDOM&&(b._parent=d.container)},findViewById:function(a){var b=this,c=b.content;if(c){if(c.id===a)return c;if(c.findViewById){var d=c.findViewById(a);if(d)return d}}}},{emitter:!0,properties:["container","content","htmlFill"]},{preferredSize:{get:function(){return this.getPreferredSize()}},children:{get:function(){return[this.content]}}});var qd=(_("qc.widget.layout.TableLayout",b,function(a,b){var c=this;c.container=a,c._rightGapDiv=pa(!1),c._bottomGapDiv=pa(!1),Ha(c,b)},{_rowHeight:26,_cellPadding:2,_preferredSizeProperties:["rowHeight","cellPadding","rows"],onPropertyChange:function(a){var b=this,d=a.property,e=b._container,f=a.newValue;if(e.checkChildPreferredSizeChange(d,b._preferredSizeProperties),"rows"===d){var g=a.oldValue;if(g)for(var h=0;h<g.length;h++){var i=g[h];if(i.cells)for(var j=0;j<i.cells.length;j++){var k=i.cells[j];if(k&&k.element){var l=k.element;l.view&&(l._parent=c)}}}var m=e._contentDiv;if(Aa(m,function(a){return a===e._canvas?!1:!0}),f){for(var h=0;h<f.length;h++){var i=f[h];if(i.cells)for(var j=0;j<i.cells.length;j++){var k=i.cells[j];if(k&&k.element){var l=k.element;l.view&&(l._parent=e),m.appendChild(l.view)}}}m.appendChild(b._rightGapDiv),m.appendChild(b._bottomGapDiv)}e.iv(!0)}e.iv()},addRow:function(a){var b=this;b.rows||(b.rows=[]),b.rows.push(a),b.epc("rows",c,b.rows)},getPreferredSize:function(){var a,b=this,c=b._container,d=b.rows,e=b._rowHeight,f=0,g=0,h=c._preferredSize||c._calcdPreferredSize;if(!h){for(var i=0;i<d.length;i++){var j=d[i],k=j.height;if(0===i&&(a=j.widths),null==k)g+=e;else if(Na(k)){var l=k.split("+");g+=parseFloat(l[0])}else k>1&&(g+=k)}for(var i=0;i<a.length;i++){var m=a[i];Na(m)?(l=m.split("+"),f+=parseFloat(l[0])):m>1&&(f+=m)}c._calcdPreferredSize=h={width:f,height:g}}return h},doLayout:function(){for(var a,b,c,d=this,e=this._container,f=d._rowHeight,g=e.clientWidth,i=e.clientHeight,j=e._contentDiv,k=d.rows,m=d.cellPadding,n=0,o=0,p=i,q=g,r=[],s=[],t=0;t<k.length;t++){var u=k[t],v=u.height;0===t&&(a=u.widths),null==v?p-=f:Na(v)?(b=v.split("+"),c=parseFloat(b[0]),p-=c,c=parseFloat(b[1]),n+=c):v>1?p-=v:n+=v}for(var t=0;t<a.length;t++){var w=a[t];Na(w)?(b=w.split("+"),c=parseFloat(b[0]),q-=c,c=parseFloat(b[1]),o+=c):w>1?q-=w:o+=w}0>p&&(p=0),0>q&&(q=0);for(var x=0;x<k.length;x++){var v=k[x].height;null==v?v=f:Na(v)?(b=v.split("+"),v=parseFloat(b[0]),v+=parseFloat(b[1])*p/n):v>1||(v=v*p/n),
s.push(v)}for(var x=0;x<a.length;x++){var w=a[x];Na(w)?(b=w.split("+"),w=parseFloat(b[0]),w+=parseFloat(b[1])*q/o):w>1||(w=w*q/o),r.push(w)}for(var y=0,z={},t=0;t<k.length;t++){for(var u=k[t],A=u.cells,B=-1,x=0;x<A.length;x++){var C=A[x],D=C.element,E=C.colspan||1,F=C.rowspan||1;for(B++;z[t]&&z[t].indexOf(B)>=0;)B++;if(D){for(var G,H,I=0,J=C.fill,K=C.keepRatio,L=C.align,M=C.vAlign,N=0,O=0,P=0,Q=0,R=0;B>R;R++)I+=r[R];for(var R=0;E>R;R++)P+=r[B+R];for(var R=0;F>R;R++)Q+=s[t+R];if(P-=2*m,Q-=2*m,"none"===J){var S=D.getPreferredSize();if(N=S.width,O=S.height,K){var T=N/P,U=O/Q,V=l(T,U);V>1&&(N/=V,O/=V)}else N=Math.min(S.width,P),O=Math.min(S.height,Q);G="center"===L?I+P/2-N/2:"right"===L?I+P-N:I,H="middle"===M?y+Q/2-O/2:"bottom"===M?y+Q-O:y}else N=P,O=Q,G=I,H=y;G+=m,H+=m,ua(D,h(G),h(H),N,O,e._forceLayout)}for(var R=1;F>R;R++){z[t+R]||(z[t+R]=[]);for(var W=0;E>W;W++)z[t+R].indexOf(B+W)<0&&z[t+R].push(B+W)}B+=E-1}y+=s[t]}var X=0,Y=0;r.forEach(function(a){X+=a}),s.forEach(function(a){Y+=a}),X=h(X),Y=h(Y);var Z=d._rightGapDiv,$=d._bottomGapDiv;Z.style.width=m+"px",Z.style.height=i+"px",Z.style.top="0px",Z.style.left=X-m+"px",$.style.width=g+"px",$.style.height=m+"px",$.style.left="0px",$.style.top=Y-m+"px",e._viewRect={x:-e.translateX,y:-e.translateY,width:g,height:i},e._scrollWidth=X,e._scrollHeight=Y;var _=-e.translateX,aa=-e.translateY;j.scrollLeft=_,j.scrollTop=aa},resetItems:function(a){var b=this;b.rows=a},findViewById:function(a){var b=this,c=b.rows;if(c){for(var d=0;d<c.length;d++)for(var e=c[d],f=e.cells,g=0;g<f.length;g++){var h=f[g];if(h.element.id===a)return h.element}for(var d=0;d<c.length;d++)for(var e=c[d],f=e.cells,g=0;g<f.length;g++){var h=f[g],i=h.element.findViewById(a);if(i)return i}}}},{emitter:!0,properties:["container","rows","cellPadding","rowHeight"]},{preferredSize:{get:function(){return this.getPreferredSize()}},children:{get:function(){var a=this,b=a.rows,c=[];if(b)for(var d=0;d<b.length;d++){var e=b[d];if(e.cells)for(var f=0;f<e.cells.length;f++){var g=e.cells[f];if(g&&g.element){var h=g.element;h.view&&c.push(h)}}}return c}}}),_("qc.widget.layout.HBoxLayout",b,function(a,b){var c=this;c.container=a,c._rightGapDiv=pa(!1),c._bottomGapDiv=pa(!1),Ha(c,b)},{_align:"left",_padding:2,_gap:2,_preferredSizeProperties:["padding","gap","components","align"],onPropertyChange:function(a){var b=this,c=a.property,d=b._container,e=a.newValue;if(d.checkChildPreferredSizeChange(c,b._preferredSizeProperties),"components"===c){var f=d._contentDiv;if(Aa(f,function(a){return a===d._canvas?!1:!0}),e){for(var g=0;g<e.length;g++){var h=e[g];f.appendChild(h.view)}f.appendChild(b._rightGapDiv),f.appendChild(b._bottomGapDiv)}d.iv(!0)}d.iv()},getPreferredSize:function(){var a=this,b=a._container,c=b._preferredSize||b._calcdPreferredSize;if(!c){var d=a.padding,e=a.gap,f=a.components,g=0,h=0;if(f){h+=d;for(var i=0;i<f.length;i++){var j=f[i],c=j.getPreferredSize();g=l(c.height,g),h+=c.width,i<f.length-1&&(h+=e)}h+=d,g+=2*d}else h=0;b._calcdPreferredSize=c={width:h,height:g}}return c},add:function(a){var b=this,c=b.components;c||(c=b._components=[]),c.push(a),a.view&&(a._parent=b.container),b.epc("components",null,c)},remove:function(a){var b=this,d=b.components;d&&(Ta(d,a),a.view&&(a._parent=c),b.epc("components",null,d))},doLayout:function(){var a=this,b=a._container,c=a.align,d=0,e=b.clientWidth,f=b.clientHeight,g=a.padding,h=a.gap,i=b._contentDiv,j=a.components||na,k=0,m=l(f-2*g,0);if("left"===c){for(var n=0;n<j.length;n++){0===n?(d+=g,k+=g):(d+=h,k+=h);var o=j[n],p=o.getPreferredSize().width;ua(o,d,g,p,m,b._forceLayout),d+=p,k+=p}k+=g}else if("right"===c)for(var n=j.length-1;n>=0;n--){d+=n===j.length-1?g:h;var o=j[n],p=o.getPreferredSize().width;ua(o,e-d-p,g,p,m,b._forceLayout),d+=p}else{var q=a.getPreferredSize().width;d=(e-q)/2;for(var n=0;n<j.length;n++){d+=0===n?g:h;var o=j[n],p=o.getPreferredSize().width;ua(o,d,g,p,m,b._forceLayout),d+=p}}var r=a._rightGapDiv,s=a._bottomGapDiv;r.style.width=g+"px",r.style.height=f+"px",r.style.top="0px",r.style.left=k-g+"px",s.style.width=e+"px",s.style.height=g+"px",s.style.left="0px",s.style.top=f-g+"px",b._viewRect={x:-b.translateX,y:0,width:e,height:f},"left"===c?(b._scrollWidth=k,b._scrollHeight=f):(b._scrollWidth=e,b._scrollHeight=f),i.scrollLeft=-b.translateX},resetItems:function(a){var b=this,d=function(a,b){a&&a.forEach(function(a){a._parent=b})},e=b.components;d(e,c),b.components=a,d(a,b.container)},findViewById:function(a){var b=this,c=b.components;if(c){for(var d=0;d<c.length;d++){var e=c[d];if(e.id===a)return e}for(var d=0;d<c.length;d++){var e=c[d],f=e.findViewById(a);if(f)return f}}}},{emitter:!0,properties:["container","components","padding","align","gap"]},{preferredSize:{get:function(){return this.getPreferredSize()}},children:{get:function(){var a=this.components;return a?a.slice(0):c}}}));_("qc.widget.layout.VBoxLayout",b,function(a,b){var c=this;c.container=a,Ha(c,b)},{_padding:2,_gap:2,_preferredSizeProperties:["padding","gap","components","align"],onPropertyChange:function(a){var b=this,c=a.property,d=b._container,e=a.newValue;if(d.checkChildPreferredSizeChange(c,b._preferredSizeProperties),"components"===c){var f=d._contentDiv;if(Aa(f,function(a){return a===d._canvas?!1:!0}),e)for(var g=0;g<e.length;g++){var h=e[g];f.appendChild(h.view)}d.iv(!0)}d.iv()},add:function(a){var b=this,c=b.components;c||(c=b._components=[]),c.push(a),a.view&&(a._parent=b.container),b.epc("components",null,c)},remove:function(a){var b=this,d=b.components;d&&(Ta(d,a),a.view&&(a._parent=c),b.epc("components",null,d))},getPreferredSize:function(){var a=this,b=a._container,c=b._preferredSize||b._calcdPreferredSize;if(!c){var d=a.padding,e=a.gap,f=a.components,g=0,h=0;if(f){h+=d;for(var i=0;i<f.length;i++){var j=f[i],c=j.getPreferredSize();g=l(c.width,g),h+=c.height,i<f.length-1&&(h+=e)}h+=d,g+=2*d}else h=0;b._calcdPreferredSize=c={width:g,height:h}}return c},doLayout:function(){for(var a=this,b=a._container,c=0,d=b.clientWidth,e=b.clientHeight,f=a.padding,g=a.gap,h=b._contentDiv,i=a.components||na,j=l(d-2*f,0),k=0;k<i.length;k++){c+=0===k?f:g;var m=i[k],n=m.getPreferredSize(j).height;ua(m,f,c,j,n,b._forceLayout),c+=n}b._viewRect={x:0,y:-b.translateY,width:d,height:e},b._scrollWidth=d,b._scrollHeight=c,h.scrollTop=-b.translateY},resetItems:function(a){var b=this,d=function(a,b){a&&a.forEach(function(a){a._parent=b})},e=b.components;d(e,c),b.components=a,d(a,b.container)},findViewById:function(a){var b=this,c=b.components;if(c){for(var d=0;d<c.length;d++){var e=c[d];if(e.id===a)return e}for(var d=0;d<c.length;d++){var e=c[d],f=e.findViewById(a);if(f)return f}}}},{emitter:!0,properties:["container","components","padding","gap"]},{preferredSize:{get:function(){return this.getPreferredSize()}},children:{get:function(){var a=this.components;return a?a.slice(0):c}}});var rd=_("qc.widget.Container",b,function(a){var b=this;b.initView(!0);var c=b._canvas=qa(),d=b._interactionDiv;d.insertBefore(c,d.children[0]),b._contentDiv.style.overflow="hidden",new Pd(b),b.layout=new e.widget.layout.FitLayout(b),b.scrollBarMode="auto",b.view.style.zIndex="0",Ha(b,a)},{_preferredSizeProperties:["childPreferredSize","layout"],onPropertyChange:function(a){var b=this,c=a.property;vc[c]&&b.showScrollBar(),b.checkChildPreferredSizeChange(c),b.iv()},getPreferredSize:function(a){return this.layout.getPreferredSize(a)},setItems:function(a){this.layout.resetItems(a);var b=this._items;b!==a&&this.epc("items",d,a)},drawBackground:function(){var a=this,b=a.background,c=a.gradientColor,d=a.backgroundGradient||"linear.north",e=a._canvas;if(e){var f=a.clientWidth,g=a.clientHeight;if(ra(e,f,g),b){var h={x:0,y:0,width:f,height:g},i=Rb(e,0,0,1,h);i.beginPath(),ob(i,b,d,c,h),i.rect(h.x,h.y,h.width,h.height),i.fill(),i.restore()}}},findViewById:function(a){var b=this,c=b.layout;return b.id===a?b:c.findViewById(a)},validateImpl:function(){var a=this,b=a.layout;a.drawBackground(),b.doLayout()}},{view:!0,emitter:!0,scrollBar:!0,properties:["layout","background","gradientColor","backgroundGradient"]},{children:{get:function(){return this.layout.children}}}),sd=_("qc.widget.Panel",rd,function Ee(a){var b=this;Ee["super"].constructor.call(b,a),b.layout=null,b._interactor=new Od(b)},{_background:"rgb(242, 242, 242)",_titleBackground:"rgb(249, 249, 249)",_titleGradientColor:"rgb(233, 233, 233)",_tools:["collapse"],_title:"",_titleHeight:w.titleHeight,_titleColor:M,_titleFont:I,_titleVisible:!0,_contentPadding:4,_topContentPadding:0,_preferredSizeProperties:["state","childPreferredSize","titleHeight","titleVisible","contentPadding","topContentPadding"],getPreferredSize:function(a){var b,d=this,e=d._container,f=d.titleVisible,g=d.state,h=d.titleHeight;if(d._preferredSize?b=Da(d._preferredSize):(d._calcdPreferredSizeMap||(d._calcdPreferredSizeMap={}),b=a==c?d._calcdPreferredSizeMap.nw:d._calcdPreferredSizeMap[a]),!b&&e){var i=d.contentPadding,j=d.topContentPadding;j=j!=c?j:i;var k=e.getPreferredSize(a-2*i);b={width:k.width,height:k.height},f&&(b.height+=h),b.width+=2*i,b.height+=i,b.height+=j,"collapse"===g&&(b.height=f?h:0),d._calcdPreferredSizeMap[a==c?"nw":a]=b}return b},setItems:function(a){this.content=Qa(a)?a[0]:a},initContainer:function(a){var b=this,d=a.property;if("content"===d){var e,f=b.content,g=b._contentDiv,h=b._container;if(h&&(h._parent=c,g.removeChild(h.view)),f.view)e=b._container=f;else{var e=new rd;e.setItems(f),Aa(g),b._container=e}e._parent=b,g.appendChild(e.view),b.iv(!0)}},onPropertyChange:function(a){var b=this;b.initContainer(a),sd["super"].onPropertyChange.call(b,a)},drawTool:function(a,b,d,e,f,g){var h=this.state;if("collapse"===b)"collapse"===h?da(a,"sortDesc",c,d,e,f,g):da(a,"sortAsc",c,d,e,f,g);else{var i=b.icon;if(Array.isArray(i)){var j=this._interactor,k=j._mouseState;i="normal"===k?i[0]:"hover"===k?i[1]:i[2],da(a,i,c,d,e,f,g)}else da(a,b.icon,c,d,e,f,g)}},handleToolClick:function(a,b){if("collapse"===a){var c=this.state;this.state="collapse"!==c?"collapse":"normal"}else a.onClick&&a.onClick.call(this,b);this.emit("toolClick",{tool:a,event:b})},drawTitle:function(a,b,d,e,f){this.drawTitleBackground(a,b,d,e,f);var g=this,h=g.icon,i=g.title,j=g.titleFont,k=g.titleColor,l=g.tools;a.beginPath();var m=4;h&&(da(a,h,c,4,4,f-8,f-8),m+=f-8),i&&ea(a,i,j,k,m,0,0,f);for(var b=e-6,d=4,n=l.length-1;n>=0;n--){var o=l[n];this.drawTool(a,o,b-(f-8),d,f-8,f-8),b-=f-8,b-=2}},drawTitleBackground:function(a,b,c,d,e){var f=this,g=f.titleBackgroundGradient||"linear.north",h=f.titleBackground,i=f.titleGradientColor;if(h){a.beginPath();var j={x:b,y:c,width:d,height:e};i?ob(a,i,g,h,j):a.fillStyle=h,a.rect(j.x,j.y,j.width,j.height),a.fill()}},drawBackground:function(a,b,c,d,e){var f=this,g=f.backgroundGradient||"linear.north",h=f.background,i=f.gradientColor;if(h){a.beginPath();var j={x:b,y:c,width:d,height:e};i?ob(a,i,g,h,j):a.fillStyle=h,a.rect(j.x,j.y,j.width,j.height),a.fill()}},validateImpl:function(){var a=this,b=a.size,d=b.width,e=b.height,f=a.titleVisible,g=a.titleHeight,h=a.view,i=a._interactionDiv,j=a._canvas,k=a._contentDiv,l=a.contentPadding,m=a.topContentPadding,n=a.borderWidth,o=a.borderColor,p=a._container;m=m!=c?m:l;var q,r;q=d-2*l,f?(r=e-l-m-g,ua(k,l,g+m,q,r)):(r=e-l-m,ua(k,l,m,q,r)),ra(j,d,e);var s=Rb(j,0,0,1,{x:0,y:0,width:d,height:e});a.drawBackground(s,0,0,d,e),f&&a.drawTitle(s,0,0,d,g),n&&o&&rb(s,o,0,0,d,e),s.restore(),h.style.width=d+"px",h.style.height=e+"px",i.style.width=d+"px",i.style.height=e+"px",p&&ua(p,c,c,q,r,a._forceLayout)},findViewById:function(a){var b=this;if(b.id===a)return b;var c=b.content;if(c){var d=c.findViewById(a);if(d)return d}}},{scrollBar:!1,properties:["title","titleFont","titleColor","titleVisible","icon","contentPadding","topContentPadding","content","state","tools","borderWidth","borderColor","titleHeight","titleBackground","titleBackgroundGradient","titleGradientColor"]},{size:{get:function(){var a=this,b=a.width,c=a.height,d=a.state,e=a.titleVisible,f=a.titleHeight;return"collapse"===d&&(c=e?f:0),{width:b,height:c}}},children:{get:function(){return[this.content]}}}),td=_("qc.widget.Dialog",sd,function Fe(a){var b=this,d=b._container=new rd,e=new pd(d);d.layout=e;var f=new rd,g=new rd;g.layout=new qd(g),g.layout.align="right",e.bottomView=g,e.centerView=f,e.splitterSize=0,Fe["super"].constructor.call(b);var h=b._view,i=b._coverDiv=pa(!1),j=b._contentDiv,k=i.style;j.appendChild(d.view),d._parent=b,h.insertBefore(i,h.children[0]),h.style.overflow="",k.background="#e5f0fd",k.opacity="0.53",k.position="fixed",k.width="100%",k.height="100%",k.left="0",k.top="0";var l=b._interactionDiv;l.style.position="fixed",l.style.overflow="hidden",b._eastResizeDiv=b._createResizeDiv("5px","100%",c,0,0,c,"e-resize"),b._westResizeDiv=b._createResizeDiv("5px","100%",0,c,0,c,"w-resize"),b._southResizeDiv=b._createResizeDiv("100%","5px",0,c,c,0,"s-resize"),b._southwestResizeDiv=b._createResizeDiv("5px","5px",0,c,c,0,"sw-resize"),b._southeastResizeDiv=b._createResizeDiv("5px","5px",c,0,c,0,"se-resize"),new Nd(b),Ha(b,a)},{_htmlFill:!1,_borderWidth:1,_borderColor:"rgb(167, 167, 167)",_contentPadding:8,_topContentPadding:8,_closeIcon:{width:16,height:16,comps:[{type:"shape",points:[2,2,12,12],borderColor:X,borderWidth:2},{type:"shape",points:[12,2,2,12],borderColor:X,borderWidth:2}]},_dragContainment:"viewport",_position:"center",_createResizeDiv:function(a,b,d,e,f,g,h){var i=pa(!0,this._interactionDiv),j=i.style;return j.width=a,j.height=b,j.background="red",j.opacity="0",d!=c&&(j.left=d+"px"),e!=c&&(j.right=e+"px"),f!=c&&(j.top=f+"px"),g!=c&&(j.bottom=g+"px"),j.cursor=h,i},initContainer:function(a){var b=this,c=a.property,d=b._container,e=d.layout;if("content"===c){var f=e.centerView;f.setItems(b.content),b.iv(!0)}else if("buttons"===c){for(var g=e.bottomView,h=b.buttons,i=[],j=0;j<h.length;j++){var k=h[j],l=new wd;k.onClick?l.on("click",function(a){return function(c){a.onClick.call(b,c),b.emit("buttonClick",{event:c,button:a})}}(k)):l.on("click",function(a){return function(c){b.emit("buttonClick",{event:c,button:a})}}(k)),l.text=k.text,l.icon=k.icon,i.push(l)}g.setItems(i),b.iv(!0)}},handleToolClick:function(a){"close"===a?this.hide():td["super"].handleToolClick.call(this,a)},drawTool:function(a,b,d,e,f,g){"close"===b?da(a,this._closeIcon,c,d,e,f,g):td["super"].drawTool.call(this,a,b,d,e,f,g)},handleWindowResize:function(){this.iv()},getPosition:function(){return this._position},setPosition:function(a,b){var c;c=2===arguments.length?{x:a,y:b}:a;var d=!1,e=this._position;Na(c)||!c?d=!0:(c.x!==e.x||c.y!==e.y)&&(d=!0),d&&(this._position=c,this.epc("position",e,c))},show:function(){var b=this,c=b.view;if(!b._visible){document.body.appendChild(c);var d=b._bindingHandleWindowResize=b.handleWindowResize.bind(b);a.addEventListener("resize",d),b.iv(!0),b._visible=!0,b._oldBodyOverflow=document.body.style.overflow,document.body.style.overflow="hidden",b.emit("visibleChange",{visible:!0})}},hide:function(){var b=this,c=b.view;if(b._visible){delete b._visible;var d=function(){document.body.style.overflow=b._oldBodyOverflow,delete b._oldBodyOverflow,b.emit("visibleChange",{visible:!1}),w.hideToolTip(),document.body.removeChild(c),a.removeEventListener("resize",b._bindingHandleWindowResize)};d()}},validateImpl:function(){td["super"].validateImpl.call(this);var a=this,b=a.size,c=b.width,d=b.height,e=a.position,f=a.modal,g=a.htmlFill,h=a._coverDiv,i=a._interactionDiv;if(a._container.layout.centerView.layout.htmlFill=g,e=e||"center",Na(e)){var j=Ba();"topRight"===e?(i.style.left=j.width-c+"px",i.style.top="0"):"topLeft"===e?(i.style.left="0",i.style.top="0"):"bottomLeft"===e?(i.style.left="0",i.style.top=j.height-d+"px"):"bottomRight"===e?(i.style.left=j.width-c+"px",i.style.top=j.height-d+"px"):"center"===e&&(i.style.left=(j.width-c)/2+"px",i.style.top=(j.height-d)/2+"px")}else i.style.left=(e.x||0)+"px",i.style.top=(e.y||0)+"px";i.style.width=c+"px",i.style.height=d+"px",i.style.shadow="rgba(128, 128, 128, 0.49) 0px 0px 16px 1px",h.style.display=f?"block":"none"}},{properties:["modal","buttons","dragContainment","htmlFill"]},{x:{get:function(){var a=this.position;return Na(a)?u(this._interactionDiv.style.left):a.x},set:function(a){this.position={x:a,y:this.y}}},y:{get:function(){var a=this.position;return Na(a)?u(this._interactionDiv.style.top):a.y},set:function(a){this.position={x:this.x,y:a}}},size:{get:function(){var a=this,b=a.width,d=a.height,e=a.state,f=a.titleVisible,g=f?24:0;if(b==c||d==c){var h=a.getPreferredSize();b==c&&(b=a._width=h.width),d==c&&(d=a._height=h.height)}return"collapse"===e&&(d=g),{width:b,height:d}}},position:{get:function(){return this.getPosition()},set:function(a){this.setPosition(a)}}});td.alert=function(a,b){var c=new e.widget.Dialog({title:a,content:b,tools:["close"],buttons:[{text:""},{text:""}]});c.show()};{var ud=_("qc.widget.ContextMenu",b,function(a,b){var c=this,d=c._view=pa();c._interactor=new Sd(c),d.className="qc-widget-contextmenu",c.items=a,c.view.style.left="0",c.view.style.top="0",Ha(c,b),c._mousetrap=new e.widget.Mousetrap},{_position:{x:0,y:0},_rowHeight:24,_idCounter:0,_items:c,_visible:!1,onPropertyChange:function(a){var b=this,c=a.property;if(["items","visibleFunc","position","visible"].indexOf(c)>=0){"items"===c&&(b._idCounter=0,b.forEach(function(a){a._id=++b._idCounter}),this.ivm());var d=b._visibleMap;d||(d=b._visibleMap={}),b.forEach(function(a){var c=b.isItemVisible(a);d[a._id]!==c&&b.ivm(),d[a._id]=c})}this.iv()},addTo:function(a){if(a){a.view&&(a=a.view);var b=this,c=b._interactor;b._relatedView=a,b._bindingHandleDocMouseDown=function(a){c.handleDocMouseDown(a)},b._bindingHandleViewParentContextMenu=function(a){c.handleViewParentContextMenu(a)},a.addEventListener("contextmenu",b._bindingHandleViewParentContextMenu)}},lp:function(a){var b=this,c=b.tx?b.tx():0,d=b.ty?b.ty():0,e=b._zoom||1,f=b._itemsDomMap;a=Pb(a);for(var g in f){var h=f[g];if(h.contains(a.target)){var i=h.getBoundingClientRect();return{id:g,lp:{x:(a.clientX-i.left+h.scrollLeft-c)/e,y:(a.clientY-i.top+h.scrollTop-d)/e}}}}},getMenuItemAt:function(a){var b,c;if(a.target){var d=this.lp(a);c=d.id,b=d.lp}for(var e=this._itemsLevelMap[c],f=this.rowHeight,g=0,h=0;h<e.length;h++){var i=e[h];if(g+="-"===i.type?f/2:f,g>b.y)return i}},show:function(a,b){var c=this;if(1===arguments.length){var d=a;a=d.pageX,b=d.pageY}this.setPosition(a,b),this.visible!==!0&&(this.visible=!0,c.emit("show"),1===arguments.length&&document.addEventListener("mousedown",c._bindingHandleDocMouseDown,!0))},hide:function(a){var b=this;b.visible!==!1&&(b.visible=!1,b._hoverMenuItem=c,b.emit("hide",{item:a}),document.removeEventListener("mousedown",b._bindingHandleDocMouseDown,!0))},dispose:function(){var a=this,b=a._relatedView,d=a._view;d&&(za(d),b&&b.removeEventListener("contextmenu",a._bindingHandleViewParentContextMenu),a._mousetrap.dispose(),a._view=a._items=a._relatedView=a._mousetrap=a._bindingHandleDocMouseDown=a._bindingHandleViewParentContextMenu=c)},getPosition:function(){return this._position},setPosition:function(a,b){var c,d=this;if(c=2===arguments.length?{x:a,y:b}:a,c.x!==d._position.x||c.y!==d._position.y){var e=d._position;d._position=c,d.epc("position",e,c)}},_calcSize:function(a){for(var b,c=0,d=0,e=0;e<a.length;e++){var f=a[e],g=f.label,h=f.suffix||f.shortcut,i=Ia(I,g);this._itemsLevelMap[f._id]&&(i.width+=25),f.icon&&(i.width+=20),("check"===f.type||"radio"===f.type)&&(i.width+=20),h&&(d=Ia(I,h).width,i.width+=d+30),b=null==b?i.width:l(b,i.width);var j=this.rowHeight;c+="-"===f.type?j/2:j}return b+=8,b=u(b),c=u(c),{itemSize:{width:b,height:c},suffixWidth:d}},ivm:function(){this._invalidateModel||(this._invalidateModel=!0,this.iv())},validate:function(){var a=this;a._invalidate&&(delete a._invalidate,a.emit("viewChange",{kind:"beginValidate"}),a.validateImpl(),a.emit("viewChange",{kind:"endValidate"}),Qb(a))},validateModel:function(){var a=this;a._itemsMap={},a._itemsLevelMap={},a._itemsDomMap={},a._itemsGroupMap={},a._view.innerHTML="",a._mousetrap.reset(),a.buildChildren()},buildChildren:function(a){var b=this,d=a?a.items:b.items,e=a?a._id:0,f=b._itemsLevelMap;if(d){var g=[];if(d.forEach(function(a){a._pid=e,b._itemsMap[a._id]=a;var d=b._itemsGroupMap;if("radio"===a.type){var f=a.groupId;f!=c&&(d[f]||(d[f]=[]),d[f].push(a))}b._visibleMap[a._id]&&g.push(a)}),g.length>0){var h=qa(b._view);h.style.boxShadow="rgba(128, 128, 128, 0.49) 0px 0px 16px 1px",h._parentItemId=e,b._itemsDomMap[e]=h,b._view.appendChild(h),f[e]=g,g.forEach(function(a){var c=b._mousetrap;a.shortcut&&c.bind(a.shortcut,function(c){return a.action&&a.action.call(b,a,c),b.emit("action",{item:a,event:c}),!1}),b.buildChildren(a)})}}},isItemVisible:function(a){var b=this._visibleFunc;return b?b.call(this,a):!0},drawRowBackground:function(a,b,c,d,e,f){var g=this,h="white",i=!1,j=g._hoverMenuItem,k=g._itemsMap;if(j){for(var l=j;l&&l!==b;)l=k[l._pid];l===b&&"-"!==l.type&&(i=!0,h="rgb(0, 152, 252)")}return qb(a,c,d,e,f,h),i},drawChildren:function(a,b,d){var e=this,f=e._itemsLevelMap,g=e._itemsDomMap,h=e._rowHeight,i=20,j=e._hoverMenuItem,k=e._itemsMap,l=b?b._id:0,m=f[l];if(m){var n=this._calcSize(m),o=n.itemSize,p=n.suffixWidth,q=g[l],r=q.style;ra(q,o.width,o.height);for(var s=Rb(q,0,0,1,{x:0,y:0,width:o.width,height:o.height}),t=!1,v=0;v<m.length;v++){var w=m[v];if("check"===w.type||"radio"===w.type){t=!0;break}}for(var x=0,v=0;v<m.length;v++){var w=m[v];if("-"===w.type){var y={width:o.width,height:1,comps:[{type:"rect",rect:[17,1,1],relative:1,background:"rgb(200, 200, 200)"}]};e.drawRowBackground(s,w,0,x,o.width,h),da(s,y,c,0,x,o.width,h/2),x+=h/2}else{var z=e.drawRowBackground(s,w,0,x,o.width,h),A=w.suffix||w.shortcut;if("check"===w.type){var B=w.selected;"function"==typeof B&&(B=B.call(e,w));var C="uncheck";B&&(C="check"),da(s,C,c,2,x,i,h)}else if("radio"===w.type){var B=w.selected;"function"==typeof B&&(B=B.call(e,w));var D="radiooff";B&&(D="radioon"),da(s,D,c,2,x,i,h)}var E=t?22:4;if(w.icon&&(da(s,w.icon,c,E,x,i,h),E+=i),ea(s,w.label,I,z?"white":"black",E,x,o.width,h),A&&(E=f[w._id]?o.width-20-p:o.width-10-p,ea(s,A,I,z?"white":"black",E,x,p,h,"right")),f[w._id]){var F={width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:z?"white":"gray",rotation:1.57}]};da(s,F,c,o.width-20,x,20,h)}x+=h}}if(s.restore(),0===l){var G=e.position,E=G.x,H=G.y;E+o.width>a.left+a.width&&(E=a.left+a.width-o.width),H+o.height>a.top+a.height&&(H=a.top+a.height-o.height),r.left=E+"px",r.top=H+"px",r.visibility="visible"}else if(j){if(j._id===l){var J=g[k[b._id]._pid],E=u(J.style.left)+u(J.style.width),H=u(J.style.top)+d||0;E+o.width>a.left+a.width&&(E=u(J.style.left)-o.width),H+o.height>a.top+a.height&&(H=a.top+a.height-o.height),q.style.left=E+"px",q.style.top=H+"px"}for(var K=j;K&&K!==b;)K=k[K._pid];r.visibility=K===b?"visible":"hidden"}else q.style.visibility="hidden";x=0;for(var v=0;v<m.length;v++){var w=m[v];this.drawChildren(a,w,x),x+="-"===w.type?h/2:h}}},forEach:function(a,b,c){var d=this,e=c?c.items:d._items;if(e)for(var f=0;f<e.length;f++){var g=e[f];a.call(b||d,g),d.forEach(a,b,g)}},validateImpl:function(){var a=this,b=a._view,c=a.visible;a._invalidateModel&&(a.validateModel(),delete a._invalidateModel),c?(a.drawChildren(Ba()),document.body.appendChild(b)):za(b)}},{view:!0,emitter:!0,properties:["items","visible","rowHeight","hoverMenuItem","visibleFunc"]},{position:{get:function(){return this.getPosition()},set:function(a){this.setPosition(a)}}}),vd=(_("qc.widget.Menu",b,function(a){var b=this;b.initView(!0,!0),b._dropDownMenu=new ud,b._itemSizeMap={},new Td(b),Ha(b,a)},{_gap:5,_background:"rgb(238, 238, 238)",_gradientColor:"rgb(211, 211, 211)",_hoverBackground:"rgb(248, 248, 248)",_hoverGradientColor:"rgb(221, 221, 221)",_activeBackground:"rgb(0, 152, 252)",_preferredSizeProperties:["items","gap"],onPropertyChange:function(a){var b=this,c=a.property;if(b.checkChildPreferredSizeChange(c),"items"===c){var d=a.newValue;if(b._itemSizeMap={},d)for(var e=0;e<d.length;e++){var f=d[e];b._itemSizeMap[e]=Ia(I,f.label)}}b.iv()},setState:function(a){var b=this._state;b!==a&&(this._state=a,this.iv())},setCurrentItem:function(a){var b=this._currentItem;b!==a&&(this._currentItem=a,this.iv())},getPreferredSize:function(){var a=this,b=a._preferredSize||a._calcdPreferredSize;if(!b){var c=a.items,d=a.gap,e=a._itemSizeMap;b={width:0,height:0};for(var f=0;f<c.length;f++){var g=e[f];b.width+=2*d+g.width,b.height=l(b.height,g.height)}b.width=h(b.width),b.height=h(b.height)+8,a._calcdPreferredSize=b}return b},getMenuItemAt:function(a){for(var b=this,c=b.lp(a),d=b.items,e=b.clientHeight,f=b.gap,g=b._itemSizeMap,h=0,i=0;i<d.length;i++){var j=d[i],k=g[i],l={x:h,y:0,width:k.width+2*f,height:e};if(db(l,c))return j;h+=l.width}},drawBackground:function(a,b,c,d,e,f,g){var h=this,i=h.backgroundGradient||"linear.north";a.beginPath();var j={x:b,y:c,width:d,height:e};g?ob(a,g,i,f,j):a.fillStyle=f,a.rect(j.x,j.y,j.width,j.height),a.fill()},validateImpl:function(){var a=this,b=a._canvas,c=a.gap,d=a.items,e=a.clientWidth,f=a.clientHeight,g=a._itemSizeMap,h=a._dropDownMenu,i=a._state,j=a._currentItem,k=d.indexOf(j);"active"!==i&&h.hide(),ra(b,e,f);var l=Rb(b,0,0,1);a.drawBackground(l,0,0,e,f,a.background,a.gradientColor),l.beginPath();for(var m=0,n=0;n<d.length;n++){var o=d[n],p=g[n],q="black";if(n===k){if("hover"===i)a.drawBackground(l,m,0,p.width+2*c,f,a.hoverBackground,a.hoverGradientColor);else{var r=Ba(),s=this.view.getBoundingClientRect();a.drawBackground(l,m,0,p.width+2*c,f,a.activeBackground,a.activeGradientColor),h.items=o.items,h.show(s.left+r.left+m,s.top+r.top+s.height),q="white"}l.beginPath()}m+=c,ea(l,o.label,I,q,m,4,p.width,p.height),m+=p.width+c}}},{view:!0,emitter:!0,properties:["items","gap","backgroundGradient","background","hoverBackground","activeBackground","gradientColor","hoverGradientColor","activeGradientColor"]}),_("qc.widget.ButtonBase",b,function(a){var b=this;b.initView(!0,!0),b.enableToolTip(),Ha(b,a)},{_iconWidth:16,_iconHeight:16,_padding:2,_state:"",_iconAlign:"left",_background:"rgb(238, 238, 238)",_gradientColor:"rgb(211, 211, 211)",_hoverBackground:"rgb(248, 248, 248)",_hoverGradientColor:"rgb(221, 221, 221)",_activeBackground:"rgb(223, 223, 223)",_activeGradientColor:"rgb(233, 233, 233)",_textColor:M,_textFont:I,_borderWidth:1,_leftBorderVisible:!0,_rightBorderVisible:!0,_bottomBorderVisible:!0,_topBorderVisible:!0,_borderColor:"rgb(195, 195, 195)",_preferredSizeProperties:["text","icon","padding","iconWidth","iconHeight"],onPropertyChange:function(a){var b=this,c=a.property;"text"===c&&(b._textSize=this.textSize),b.checkChildPreferredSizeChange(c),b.iv()},getStateIcon:function(){return this.icon},getStateBackground:function(a){var b=this,c=[];if("hover"===a){var d=b.hoverBackground;if(d){c.push(d);var e=b.hoverGradientColor;e&&c.push(e)}}else if("active"===a){var f=b.activeBackground;if(f){c.push(f);var g=b.activeGradientColor;g&&c.push(g)}}else{var h=b.background;if(h){c.push(h);var i=b.gradientColor;i&&c.push(i)}}return c},drawBackground:function(a,b,c,d,e){var f=this,g=f._state,h=f.backgroundGradient||"linear.north",i=f.getStateBackground(g);if(i.length>0){a.beginPath();var j={x:b,y:c,width:d,height:e};2===i.length?ob(a,i[1],h,i[0],j):a.fillStyle=i[0],a.rect(j.x,j.y,j.width,j.height),a.fill()}},getIconTextWidth:function(){return this.clientWidth},getIconTextHeight:function(){return this.clientHeight},validateImpl:function(){var a,b,c=this,d=c._canvas,e=c.clientWidth,f=c.clientHeight,g=c.getStateIcon(),h=c.textColor,i=c.textFont,j=c.iconWidth||Zb(g)||0,k=c.iconHeight||$b(g)||0,l=c.iconAlign,n=c._textSize||{width:0,height:0};ra(d,e,f);var o=Rb(d,0,0,1);c.drawBackground(o,0,0,e,f);var p=c.borderWidth,q=c.borderColor;if(p&&p){var r={left:c.leftBorderVisible,right:c.rightBorderVisible,top:c.topBorderVisible,bottom:c.bottomBorderVisible};rb(o,q,0,0,e,f,1,r)}var s=0,t=0,u=c.text;if(e=c.getIconTextWidth(),f=c.getIconTextHeight(),o.beginPath(),g&&l){if("left"===l){var v=k;k=m(k,f),j=k/v*j,a=n.width+j,s=(e-a)/2+j,da(o,g,"uniform",(e-a)/2,(f-k)/2,j,k),ea(o,u,i,h,s,t,n.width,f)}else if("right"===l){var v=k;k=m(k,f),j=k/v*j,a=n.width+j,s=(e-a)/2,da(o,g,"uniform",(e-a)/2+n.width,(f-k)/2,j,k),ea(o,u,i,h,s,t,n.width,f)}else if("top"===l){var w=j;j=m(j,e),k=j/w*k,b=n.height+k,t=(f-b)/2+k,da(o,g,"uniform",(e-j)/2,(f-b)/2,j,k),ea(o,u,i,h,s,t,e,n.height,"center")}else if("bottom"===l){var w=j;j=m(j,e),k=j/w*k,b=n.height+k,t=(f-b)/2,da(o,g,"uniform",(e-j)/2,(f-b)/2+n.height,j,k),ea(o,u,i,h,s,t,e,n.height,"center")}}else ea(o,u,i,h,0,0,e,f,"center");o.restore()},getPreferredSize:function(){var a=this,b=a._preferredSize||a._calcdPreferredSize;if(!b){var c=a.textSize,d=a.icon,e=a.iconWidth||Zb(d),f=a.iconHeight||$b(d),g=a.iconAlign,i=a.padding;d&&e&&f&&g&&("left"===g||"right"===g?(c.width+=e,c.height=l(f,c.height)):("top"===g||"bottom"===g)&&(c.width=l(e,c.width),c.height+=f)),c.width+=2*i,c.height+=2*i,c.width=h(c.width),c.height=h(c.height),b=a._calcdPreferredSize=c}return b},getToolTipAt:function(){return this.toolTip||this.text}},{view:!0,emitter:!0,toolTip:!0,properties:["text","icon","iconAlign","iconWidth","iconHeight","padding","backgroundGradient","toolTip","textColor","textFont","background","hoverBackground","activeBackground","gradientColor","hoverGradientColor","activeGradientColor","borderWidth","leftBorderVisible","rightBorderVisible","topBorderVisible","bottomBorderVisible","borderColor"]},{textSize:{get:function(){var a=this,b=a.text;return b?Ia(I,b):{width:0,height:0}}}})),wd=_("qc.widget.Button",vd,function Ge(a){var b=this;Ge["super"].constructor.call(b,a),b._contextMenu=new ud;var c=b._interactor=new Ud(b);b._bindinghandle_documentmousedown=c.handle_documentmousedown.bind(c)},{_contextMenu:c,_splitIcon:c,_preferredSizeProperties:["text","icon","padding","iconWidth","iconHeight","split"],onPropertyChange:function(a){var b=this,c=a.property;"menuItems"===c&&(b._contextMenu.items=a.newValue),wd["super"].onPropertyChange.call(b,a)},getStateBackground:function(a){var b=this;if("splitActive"===a){var c=[],d=b.activeBackground;if(d){c.push(d);var e=b.activeGradientColor;return e&&c.push(e),c}}return wd["super"].getStateBackground.call(b,a)},setState:function(a){var b=this._state;b!==a&&(this._state=a,this.iv())},getIconTextWidth:function(){var a=this,b=a.clientWidth;return a.split&&(b-=30),b},drawSplit:function(a,b,c,d,e){a.beginPath(),a.fillStyle="rgb(192, 192, 192)",a.rect(b,3,1,e-6),a.fill(),a.beginPath(),a.fillStyle="rgb(241, 241, 241)",a.rect(b+1,3,1,e-6),a.fill(),da(a,"sortDesc",null,b,0,30,e)},validateImpl:function(){var a=this;wd["super"].validateImpl.call(a);var b=a.getIconTextWidth(),c=a.getIconTextHeight(),d=a.split;if(d){var e=Rb(a._canvas,0,0,1);a.drawSplit(e,b,b-30,30,c),e.restore()}var f=a._contextMenu;if("splitActive"===a._state){var g=Ba(),h=this.view.getBoundingClientRect();f.show(h.left+g.left,h.top+g.top+h.height),document.addEventListener("mousedown",a._bindinghandle_documentmousedown)}else f.hide(),document.removeEventListener("mousedown",a._bindinghandle_documentmousedown)},getPreferredSize:function(){var a=this,b=a._preferredSize||a._calcdPreferredSize;return b||(b=wd["super"].getPreferredSize.call(a),a.split&&(b.width+=30),b=a._calcdPreferredSize),b}},{properties:["split","menuItems"]}),xd=_("qc.widget.ToggleButton",vd,function He(a){var b=this;He["super"].constructor.call(b,a),b._interactor=new Vd(b)},{onPropertyChange:function(a){var b=this;xd["super"].onPropertyChange.call(b,a)},getStateBackground:function(a){var b,c=this,d=c.selected;if(d){b=[];var e=c.activeBackground;if(e){b.push(e);var f=c.activeGradientColor;f&&b.push(f)}}else b=xd["super"].getStateBackground.call(c,a);return b}},{properties:["selected","value"]}),yd=(_("qc.widget.CheckBox",xd,function Ie(a){var b=this;Ie["super"].constructor.call(b,a)},{_borderWidth:0,_icon:"uncheck",getStateIcon:function(){var a=this,b=a.selected;return b?"check":"uncheck"},drawBackground:function(){}},{}),_("qc.widget.RadioButton",xd,function Je(a){var b=this;Je["super"].constructor.call(b,a)},{_borderWidth:0,_icon:"radiooff",getStateIcon:function(){
var a=this,b=a.selected;return b?"radioon":"radiooff"},drawBackground:function(){}},{}),_("qc.widget.Radios",b,function(){var a=this;a._buttons=[]},{handleButtonSelectedChange:function(a){var b=this,c=a.source,d=a.property;if("selected"===d){var e=a.newValue;if(e){var f=b._buttons;b._flag=!0,f.forEach(function(a){a!==c&&(a.selected=!1)}),b._flag=!1,b.value=c.value}else b._flag||(c.selected=!0,b.value=c.value)}},add:function(a){var b=this,c=b._buttons;a&&c.indexOf(a)<0&&(Sa(c,a),a.on("propertyChange",b.handleButtonSelectedChange,b))},remove:function(a){var b=this,c=b._buttons;a&&c.indexOf(a)>=0&&(Ta(c,a),a.off("propertyChange",b.handleButtonSelectedChange,b))},clear:function(){var a=this,b=a._buttons;b.forEach(function(b){b.off("propertyChange",a.handleButtonSelectedChange,a)}),b.length=0}},{properties:["value"],emitter:!0})),zd=_("qc.widget.TextField",b,function(a){var b=this;b.initView(!0);var c=b._contentDiv,d=b._input=b._createInput();d.style.position="absolute",d.style.boxSizing="border-box",d.style.width="100%",d.style.height="100%",d.style.border="0",d.style.resize="none",d.style.background="rgba(0,0,0,0)",c.appendChild(d),b.view.style.border="1px solid rgb(217, 217, 217)",new Fd(b),Ha(b,a)},{_padding:2,_background:"white",_preferredSizeProperties:["padding","value"],onPropertyChange:function(a){var b=this,d=a.property;"value"===d?this._textSize=this.textSize:"placeHolder"===d?this._input.setAttribute("placeholder",a.newValue):"maskRe"===d&&this._input.setAttribute("pattern",a.newValue),b._preferredSizeProperties.indexOf(d)>=0&&(b._calcdPreferredSize=c),b.iv()},getInput:function(){return this._input},_createInput:function(){return document.createElement("input")},validateImpl:function(){var a=this,b=a.view,d=a._input,e=a.value,f=a.background,g=a.borderColor,h=a.padding;d.style.padding="0 "+h+"px",d.style.font=a._font,f&&(b.style.background=f),b.style.border=g?"1px solid "+g:"1px solid rgb(217, 217, 217)",e!=c&&e!==d.value&&(d.value=a.value)},getPreferredSize:function(){var a=this,b=a._preferredSize||a._calcdPreferredSize;if(!b){var c=a.textSize,d=a.padding;c.width+=2*d,c.height+=2*d,c.width=h(c.width),c.height=h(c.height),b=a._calcdPreferredSize=c}return b}},{view:!0,emitter:!0,properties:["value","font","padding","maskRe","placeHolder","background","borderColor"]},{textSize:{get:function(){var a=this,b=a.value;return b?Ia(I,b):Ia(I,"emwqd")}}});_("qc.widget.TextArea",zd,function Ke(a){var b=this;Ke["super"].constructor.call(b,a)},{_createInput:function(){return document.createElement("textarea")}},{},{textSize:{get:function(){var a=this,b=a.value;return b?ib({font:I},b):{width:0,height:0}}}}),_("qc.widget.Label",vd,function(a){var b=this;b.initView(!0,!0),b._interactor=new Wd(b),b.enableToolTip(),Ha(b,a)},{_borderWidth:0,drawBackground:function(){}},{})}_("qc.widget.Tabs",b,function(a){var b=this,c=b._view=pa(1),d=b._titleDiv=pa(1),e=b._tabModel=new Mc,f=e.selectionModel;b._tabInfos=[],b._canvas=qa(d);var g=b._interactionDiv=pa(1);xa(c,g),xa(c,d),xa(c,b._contentDiv=pa(1)),f.selectionMode="single",f.on("selectionChange",b.updateTabView,b),["dataModelChange","dataPropertyChange","hierarchyChange"].forEach(function(a){e.on(a,b.updateTabView,b)}),new Xd(b),Ha(b,a),b.iv()},{_tabPosition:"top",_tabHeight:24,_tabGap:2,_labelColor:"black",_labelFont:I,_tabBackground:"white",_selectWidth:2,_selectBackground:"gray",_moveBackground:"gray",_insertColor:"blue",_movable:!0,getPreferredSize:function(){var a=this,b=a._preferredSize||a._calcdPreferredSize;return b||(a._calcdPreferredSize=b={width:100,height:100}),b},add:function(a,b,c){var d=new nd,e=this._tabModel;return d.name=a,d.view=b,b.view&&(b._parent=this),e.add(d),c&&(e.selectionModel.selection=d),d},setItems:function(a){var b=this;b.clear(),a&&a.forEach(function(a){var c=a.title,d=a.element,e=b.add(c,d);Ha(e,a)})},getLabel:function(a){return this.labelFunc?this.labelFunc(a):a.name},getLabelFont:function(a){return this.labelFontFunc?this.labelFontFunc(a):this.labelFont},getLabelColor:function(a){return this.labelColorFunc?this.labelColorFunc(a):this.labelColor},onPropertyChange:function(a){this.checkChildPreferredSizeChange(a.property),this.iv()},get:function(a){var b=this,d=b._tabModel;if(Ma(a))return d._roots[a];if(Na(a)){var e;return d.forEach(function(c){a===b.getLabel(c)&&(e=c)}),e}return a instanceof nd?a:c},select:function(a){this._tabModel.selectionModel.selection=this.get(a)},remove:function(a){var b=this;if(a=b.get(a)){var d=b._tabModel,e=d._roots.indexOf(a);a.view.view&&(a.view._parent=c),b._tabModel.remove(a),b.selectOne(--e)}},clear:function(){var a=this,b=a._tabModel;b.datas.forEach(function(a){a.view.view&&(a.view._parent=c)}),b.clear()},findViewById:function(a){for(var b=this,c=b._tabModel,d=0;d<c.datas.length;d++){var e=c.datas[d];if(e.view&&e.view.id===a)return e.view}for(var d=0;d<c.datas.length;d++){var e=c.datas[d];if(e.view){var f=e.view.findViewById(a);if(f)return f}}},hideTabView:function(a,b){b.parentNode===this._contentDiv&&("IFRAME"===b.tagName?(b.style.display=NONE,b._tab_=a):za(b),ka())},showTabView:function(a,b){"IFRAME"===b.tagName&&(b.style.display="block",b._tab_=a),b.parentNode!==this._contentDiv&&(xa(this._contentDiv,b),ka())},updateTabView:function(){var a,b=this,c=b._currentTab,d=b._currentView,e=b._tabModel.selectionModel.lastData;e&&(a=ta(e.view)),a!==d&&(d&&(c.view.endEditing&&c.view.endEditing(),b.hideTabView(c,d)),a&&b.showTabView(e,a)),b._currentTab=e,b._currentView=a,c!==e&&b.onTabChange(c,e),b.iv(!0)},onTabChange:function(){},onTabClose:function(a,b){this.selectOne(--b)},selectOne:function(a){var b=this,d=b._tabModel,e=d.length;if(e&&!d.selectionModel.lastData){a==c&&(a=0),a>=e&&(a=e-1),0>a&&(a=0);for(var f=a;f>=0;f--){var g=b.get(f);if(!g.disabled)return b.select(g),g}for(f=a+1;e>f;f++)if(g=b.get(f),!g.disabled)return b.select(g),g}},getTabWidth:function(a){var b=4,c=ca(a.icon);c&&(b+=Zb(c,a)+4);var d=this.getLabel(a);return d&&(b+=Ia(this.getLabelFont(a),d).width+4),a.closable&&(b+=10),b},drawTab:function(a,b,d,e,f,g){var h,i=this,j=i._tabPosition,k=d+4,l=(i._selectWidth,ca(b.icon)),m=b.disabled,n=i.getLabelColor(b),o=i.getLabelFont(b),p=i.getLabel(b),r=(i._selectBackground,"left-vertical"===j),t="right-vertical"===j;(r||t)&&(k=e+4),m&&(a.globalAlpha=.4);var u="linear.north";r?u="linear.west":t&&(u="linear.east"),a.beginPath();var v={x:d,y:e,width:f,height:g};ob(a,"rgb(211, 211, 211)",u,"rgb(238, 238, 238)",v),a.rect(v.x,v.y,v.width,v.height),a.fill(),b===i._currentTab&&(a.beginPath(),ob(a,"white",u,"white",v),a.rect(v.x,v.y,v.width,v.height),a.fill()),a.beginPath();var w={left:1,right:1,bottom:1,top:1};"top"===j?w.bottom=0:"bottom"===j?w.top=0:"left"===j||r?w.right=0:("right"===j||t)&&(w.left=0),rb(a,"rgb(181, 188, 199)",d,e,f,g,1,w);var x=f/2;if(r&&(Ub(a,x,e+g/2),Vb(a,q),Ub(a,-x,-e-g/2)),l){var y=$b(l,b),z=Zb(l,b);if(r||t){var A=d+f/2,B=k+y/2;Ub(a,A,B),Vb(a,s),Ub(a,-A,-B),da(a,l,c,d,k,f,y,b,i),Ub(a,A,B),Vb(a,-s),Ub(a,-A,-B),k+=y+4}else da(a,l,c,k,e,z,g,b,i),k+=z+4}return r||t?(Ub(a,f/2,k+f/2),Vb(a,s),Ub(a,-f/2,-k-f/2),ea(a,p,o,n,d,k,g,f),Ub(a,f/2,k+f/2),Vb(a,-s),Ub(a,-f/2,-k-f/2)):ea(a,p,o,n,k,e,f,g),r&&(Ub(a,x,e+g/2),Vb(a,-q),Ub(a,-x,-e-g/2)),b.closable&&(a.strokeStyle=n,a.lineWidth=1,a.beginPath(),t?(a.moveTo(d+f-10,e+g-4),a.lineTo(d+f-4,e+g-10),a.moveTo(d+f-4,e+g-4),a.lineTo(d+f-10,e+g-10),a.stroke(),h={x:d+f-12,y:e+g-12,width:12,height:12}):(a.moveTo(d+f-10,e+4),a.lineTo(d+f-4,e+10),a.moveTo(d+f-4,e+4),a.lineTo(d+f-10,e+10),a.stroke(),h={x:d+f-12,y:e,width:12,height:12})),m&&(a.globalAlpha=1),h},_layoutTitle:function(a,b,c){var d=this,e=d._tabPosition,f=d._titleDiv,g=d._tabHeight;return"top"===e?(ua(f,0,0,a,g),{x:0,y:g,width:a,height:l(0,b-g)}):"left"===e?(ua(f,0,0,c,b),{x:c,y:0,width:l(0,a-c),height:b}):"right"===e?(ua(f,a-c,0,c,b),{x:0,y:0,width:l(0,a-c),height:b}):"left-vertical"===e?(ua(f,0,0,g,b),{x:g,y:0,width:l(0,a-g),height:b}):"right-vertical"===e?(ua(f,a-g,0,g,b),{x:0,y:0,width:l(0,a-g),height:b}):"bottom"===e?(ua(f,0,b-g,a,g),{x:0,y:0,width:a,height:l(0,b-g)}):void 0},drawLeftRightVerticalTabs:function(a,b){var c=this,d=c._canvas,e=c._tabPosition,f=c._tabModel,g=c._tabHeight,i=c._tabInfos,j=c._tabGap,k="right-vertical"===e,m=c._movingTabInfo,n=c._currentTab;ra(d,g,b);var o=Rb(d,0,c.translateY,1),p=0;if(o.clearRect(0,0,g,b),i.length=0,f._roots.forEach(function(b){var d,e=c.getTabWidth(b);m&&m.tab===b||(d=c.drawTab(o,b,0,p,g,e,c._tabBackground),d&&k&&(d.x=a-12)),i.push({closeRect:d,tab:b,startY:p,endY:p+e,height:e}),p+=e+j}),c._sumHeight=l(0,p-j),m){var q=m.position;c.drawTab(o,m.tab,0,m.startY,g,m.height),qb(o,0,q,g,1,c._insertColor)}o.fillStyle="rgb(188, 189, 199)";var r;if(n){var s=i[f._roots.indexOf(n)];o.beginPath(),o.rect(0,0,1,h(s.startY)),o.fill(),r=k?{x:0,y:s.startY+s.height-1,width:1,height:b-(c.translateY+s.startY)-s.height}:{x:g-1,y:s.startY+s.height-1,width:1,height:b-(c.translateY+s.startY)-s.height}}else r=k?{x:0,y:0,width:1,height:b-c.translateY}:{x:g-1,y:0,width:1,height:b-c.translateY};r&&(o.beginPath(),o.rect(r.x,r.y,r.width,r.height),o.fill()),o.restore(),c.translateY=c.translateY},drawLeftRightTabs:function(a,b,c){var d=this,e=d._canvas,f=d._tabPosition,g=d._tabModel,i=d._tabHeight,j=d._tabInfos,k=d._tabGap,m="right"===f,n=d._movingTabInfo,o=d._currentTab;ra(e,c,b);var p=Rb(e,0,d.translateY,1),q=0;if(p.clearRect(0,0,c,b),j.length=0,g._roots.forEach(function(b){var e;n&&n.tab===b||(e=d.drawTab(p,b,0,q,c,i,d._tabBackground),e&&m&&(e.x=a-12)),j.push({closeRect:e,tab:b,startY:q,endY:q+i,height:i}),q+=i+k}),d._sumHeight=l(0,q-k),n){var r=n.position;d.drawTab(p,n.tab,0,n.startY,c,n.height,d._moveBackground),qb(p,0,r,c,1,d._insertColor)}p.fillStyle="rgb(188, 189, 199)";var s;if(o){var t=j[g._roots.indexOf(o)];p.beginPath(),m?p.rect(0,0,1,h(t.startY)):p.rect(c-1,0,1,h(t.startY)),p.fill(),s=m?{x:0,y:t.startY+t.height-1,width:1,height:b-(d.translateY+t.startY)-t.height}:{x:c-1,y:t.startY+t.height-1,width:1,height:b-(d.translateY+t.startY)-t.height}}else s=m?{x:0,y:0,width:1,height:b-d.translateY}:{x:c-1,y:0,width:1,height:b-d.translateY};s&&(p.beginPath(),p.rect(s.x,s.y,s.width,s.height),p.fill()),p.restore(),d.translateY=d.translateY},drawTopBottomTabs:function(a,b){var c=this,d=c._canvas,e=c._tabPosition,f=c._tabModel,g=c._tabHeight,i=c._tabInfos,j=c._tabGap,k="bottom"===e,m=c._movingTabInfo,n=c._currentTab;ra(d,a,g);var o=Rb(d,c.translateX,0,1),p=0;if(o.clearRect(0,0,a,g),i.length=0,f._roots.forEach(function(a){var d,e=c.getTabWidth(a);m&&m.tab===a||(d=c.drawTab(o,a,p,0,e,g),d&&k&&(d.y=b-g)),i.push({closeRect:d,tab:a,startX:p,endX:p+e,width:e}),p+=e+j}),c._sumWidth=l(0,p-j),m){var q=m.position;c.drawTab(o,m.tab,m.startX,0,m.width,g),kc(o,c._insertColor,q,0,g)}o.fillStyle="rgb(188, 189, 199)";var r;if(n){var s=i[f._roots.indexOf(n)];o.beginPath(),k?o.rect(0,0,h(s.startX),1):o.rect(0,g-1,h(s.startX),1),o.fill(),r=k?{x:s.startX+s.width-1,y:0,width:a-(c.translateX+s.startX)-s.width,height:1}:{x:s.startX+s.width-1,y:g-1,width:a-(c.translateX+s.startX)-s.width,height:1}}else r=k?{x:0,y:0,width:a-c.translateX,height:1}:{x:0,y:g-1,width:a-c.translateX,height:1};r&&(o.beginPath(),o.rect(r.x,r.y,r.width,r.height),o.fill()),o.restore(),c.translateX=c.translateX},validateImpl:function(){var a,b=this,c=b._tabPosition,d=b._contentDiv,e=b._tabModel,f=b.clientWidth,g=b.clientHeight,h="left"===c,i="right"===c,j="left-vertical"===c,k="right-vertical"===c,m=0;(h||i)&&e._roots.forEach(function(a){m=l(b.getTabWidth(a),m)}),a=b._layoutTitle(f,g,m),ua(d,a),b._currentTab&&(h||i?a.x=0:j||k?a.x=0:a.y=0,ua(b._currentTab.view,a,b._forceLayout)),j||k?b.drawLeftRightVerticalTabs(f,g,m):h||i?b.drawLeftRightTabs(f,g,m):b.drawTopBottomTabs(f,g,m);for(var n=[],o=d.children,p=0;p<o.length;p++){var q=o[p],r=q._tab_;r&&!e.contains(r)&&n.push(q)}n.forEach(function(a){d.removeChild(a)})}},{view:1,emitter:!0,scrollBar:!0,properties:["movable","tabGap","tabHeight","tabPosition","labelColor","labelFont","tabBackground","selectWidth","selectBackground","moveBackground","insertColor","labelFunc","labelFontFunc","labelColorFunc"]},{tabModel:{get:function(){return this._tabModel}},currentTab:{get:function(){return this._currentTab}},contentDiv:{get:function(){return this._contentDiv}},titleDiv:{get:function(){return this._titleDiv}},hScrollable:{get:function(){return this.width<this._sumWidth}},vScrollable:{get:function(){return this.height<this._sumHeight}},translateX:{set:function(a){var b=this,c=b.width-b._sumWidth;c>a&&(a=c),a>0&&(a=0),a=h(a);var d=b._translateX;b._translateX=a,b.epc("translateX",d,a)},get:function(){return this._translateX}},translateY:{set:function(a){var b=this,c=b.height-b._sumHeight;c>a&&(a=c),a>0&&(a=0),a=h(a);var d=b._translateY;b._translateY=a,b.epc("translateY",d,a)},get:function(){return this._translateY}},movingTabInfo:{set:function(a){this._movingTabInfo=a,this.iv()},get:function(){return this._movingTabInfo}}});var Ad=_("qc.widget.toolbar.Separator",b,function(a){var b=this;b.initView(!0,!0),Ha(b,a)},{_color1:"rgb(192, 192, 192)",_color2:"rgb(241, 241, 241)",getPreferredSize:function(){return this._preferredSize||{width:2,height:24}},onPropertyChange:function(){this.iv()},validateImpl:function(){var a=this,b=a._canvas,c=a.clientWidth,d=a.clientHeight,e=a.color1,f=a.color2;ra(b,c,d);var g=Rb(b,0,0,1,{x:0,y:0,width:c,height:d});g.beginPath(),g.fillStyle=e,g.rect(0,0,c/2,d),g.fill(),g.beginPath(),g.fillStyle=f,g.rect(c/2,0,c/2,d),g.fill(),g.restore()}},{view:!0,emitter:!0,properties:["color1","color2"]}),Bd=(_("qc.widget.Toolbar",rd,function Le(a){var b=this;Le["super"].constructor.call(b);var c=new e.widget.layout.HBoxLayout(b);b.layout=c,c.padding=4,Ha(b,a)},{setItems:function(a){var b=this,c=b.layout,d=[];if(a)for(var e=0;e<a.length;e++){var f=a[e];if(Na(f)){var g=new Ad;d.push(g)}else d.push(f)}c.resetItems(d)}}),_("qc.widget.ButtonGroup",rd,function Me(a){var b=this;Me["super"].constructor.call(b,a);var c=new qd(b);b.layout=c,c.padding=0,c.gap=0,b._radios=new yd},{_selectionMode:"single",handleChildPropertyChange:function(a){var b=this;if(!b._flag)if(a.source instanceof yd)"value"===a.property&&(b.value=a.newValue);else{var d=[];if("selected"===a.property){for(var e=b.children,f=0;f<e.length;f++){var g=e[f];g.selected&&d.push(g.value)}var h=!1;b.value&&b.value.join&&b.value.join("")===d.join("")&&(h=!0),h||(0===d.length&&(d=c),b.value=d)}}},onPropertyChange:function(a){var b=this,c=a.property;if("items"===c||"selectionMode"===c){var d=b._radios,e=b.children,f=b.selectionMode;if(d.clear(),"items"===c){var g=a.oldValue;if(g)for(var h=0;h<g.length;h++){var i=g[h];i.off("propertyChange",b.handleChildPropertyChange,b)}if(e)if("single"===f)d.on("propertyChange",b.handleChildPropertyChange,b);else for(var h=0;h<e.length;h++){var j=e[h];j.on("propertyChange",b.handleChildPropertyChange,b)}}if(e&&"single"===f)for(var h=0;h<e.length;h++){var k=e[h];0===h||(k.leftBorderVisible=!1),d.add(k)}}Bd["super"].onPropertyChange.call(b,a)}},{properties:["selectionMode"]},{radios:{get:function(){return this._radios}},value:{get:function(){return this._value},set:function(a){var b=this,c=b._value,d=b.selectionMode,e=b.children;b._value=a,e&&("single"===d?(b._flag=!0,e.forEach(function(b){b.value===a&&(b.selected=!0)}),b._flag=!1):a&&(Qa(a)||(a=[a]),b._flag=!0,e.forEach(function(a){a.selected=!1}),a.forEach(function(a){e.forEach(function(b){b.value===a&&(b.selected=!0)})}),b._flag=!1)),b.epc("value",c,a)}}}));ba("dropDownIcon",{width:64,height:64,comps:[{type:"shape",points:[15,21,32,38,49,21],borderWidth:6,borderColor:"#ccc"}],clip:!0});var Cd=(_("qc.widget.ComboBox",b,function(a){a=a||{},this._componentConfig=a,this.initView(!0,!0),Ha(this,a);var b=this,c=b._view,d=c.style,e=b._background||"#fff";d.border="1px solid #ccc",d.background=e,b._initSelf();var f=function(a){if(Cb(a)){var d=a.target;(c.contains(d)||d===b._input)&&(K(a),b.toggle())}};c.addEventListener("touchstart",f,!1),c.addEventListener("mousedown",f,!1),b._handleWindowClick=function(a){if(Cb(a)){var d=a.target,e=(b._dropDownComponent,b._getDropDownView());b._input===d||c.contains(d)||e.view.contains(d)||b.close(!0)}}},{_indent:w.indent,_dropDown:"qc.widget.List",_dataMap:d,_labelMap:{},_iconMap:{},_dropDownIcon:"dropDownIcon",_iconField:"icon",_labelField:"label",_valueField:"value",_background:"#fff",_instant:!1,_editable:!1,_initDropDownComponent:function(){var a=this,b=a._dropDown,c=a._dropDownComponent,d=b;if(!c&&(Na(b)&&(d=e.widget.Default.Class[b]),d))if("qc.widget.DropDownTemplate"===d["super"].className){var f=this._componentConfig;f.master=a,a._dropDownComponent=new d(f)}else{var g=a._dropDownComponent=new d,h=g.selectionModel,i=g.view;h.selectionMode="single",i.addEventListener("mousemove",function(a){h.selection=g.getDataAt(a)},!1),i.addEventListener("keydown",function(b){if(Mb(b)){var c=h.lastData;c&&(a.value=c.a("value"),a.close(!0))}Nb(b)&&a.close(!0)},!1),g.onDataClick=function(b){a.value=b.a("value"),a.close(!0)},a.drawRow&&(g.drawRow=function(b,c,d,e,f,g){a.drawRow(b,c,d,e,f,g)})}},_initSelf:function(){var a=this,b=a._data;if(b){var c=a._iconField,d=a._labelField,e=a._valueField;a._labelMap={},a._iconMap={},Qa(b[0])&&(c=0,d=1,e=2),b.forEach(function(b){var f=b[c],g=b[d],h=b[e];null!=f&&null==h&&null==g&&Na(f)&&(g=f,h=f),null!=g&&null==h&&(h=g),null!=h&&null==g&&(g=h),a._iconMap[h]=f,a._labelMap[h]=g})}},_getDropDownView:function(){var a=this._dropDownComponent,b=a;return b=a instanceof e.widget.List?a:a.getView()},getPreferredSize:function(){var a=this.getLabel(this._value)||" ",b=Ia(null,a),c=b.width,d=this._indent;return 80>c&&(c=80),c>150&&(c=150),{width:c+d,height:b.height}},onPropertyChange:function(a){var b=this,c=a.property;b.checkChildPreferredSizeChange(c),b.iv()},getLabel:function(a){return this._labelMap[a]!=d?this._labelMap[a]:a},toggle:function(){this.isOpen()?this.close(!0):this.open(this._value)},isOpen:function(){var a=this._dropDownComponent;if(a!=d){var b=this._getDropDownView();return!!b.view.parentNode}return!!this._dropDownComponent},open:function(b){var f,g,h=this,i=h._data,j=h._valueField,k=h._labelField,n=h._iconField,o=Ba(),p=h._view.getBoundingClientRect(),q=h._dropDownWidth||0,r=l(h.width,q),s=h.height*(i?i.length:1),t=o.left+p.left,v=o.top+p.top+p.height;if(h._editable){var x=h._input=document.createElement("input"),y=h.indent,z=x.style,A=h.view.style.zIndex||0,B=h._labelMap;B[b]&&(b=b===d?"":B[h._value]),x.value=b===d?"":b,z.border="1px solid #00C9A8",z.position="absolute",z.padding="0px 0px 0px 2px",z.margin="0px",z.zIndex=u(A)+1+"",z.font=w.labelFont,ua(x,p.left,p.top,h.clientWidth-y,h.clientHeight),x.addEventListener("keydown",function(a){Mb(a)&&(h.value=x.value,h.toggle())}),document.body.appendChild(x)}f=h._dropDownComponent,f||h._initDropDownComponent(),f=h._dropDownComponent,f.onOpen&&f.onOpen(b),h._dataMap={},h._labelMap={};var C=f.dataModel;if(f instanceof e.widget.List){f.value=b;var D=C.selectionModel;g=f,C.clear(),f.rowHeight=h.height,Qa(i[0])&&(n=0,k=1,j=2),i.forEach(function(a){var e=a[n],f=a[k],g=a[j],i=new Lc;e!=c&&(i.icon=e,g===d&&f===d&&Na(e)&&(f=e,g=e)),f!=c&&g==c&&(g=f),g!=c&&f==c&&(f=g),i.name=f,i.displayName=f,i.a("value",g),h._dataMap[g]=i,h._labelMap[g]=f,C.add(i),g===b&&D.appendSelection(i)}),v+s>o.top+o.height&&(s=p.top-o.top>o.top+o.height-p.top-p.height?m(s,p.top-o.top):o.top+o.height-v)}else{g=f.getView();var E=g.preferredSize;r=q||f.width||E.width,s=f.height||E.height}g.view.style.boxShadow="0px 0px 10px #ccc",g.view.style.background=g.background||h.background||"#fff",h._maxHeight>0&&(s=m(s,h._maxHeight)),v+s>o.top+o.height&&p.top-o.top>o.top+o.height-p.top-p.height&&(v=p.top-s),t+r>o.left+o.width&&(t-=t+r-o.left-o.width+1),g.addToDOM({x:t,y:v,width:r,height:s}),f.requestFocus(),a.addEventListener("touchstart",h._handleWindowClick,!1),a.addEventListener("mousedown",h._handleWindowClick,!1)},close:function(b){var c=this,d=c._dropDownComponent;if(c.isOpen()){var e=c._getDropDownView();b||(c.value=d.value),za(e.view),c._input&&(za(c._input),delete c._input),d.onClose&&d.onClose(),c.onClose&&c.onClose(),a.removeEventListener("touchstart",c._handleWindowClick,!1),a.removeEventListener("mousedown",c._handleWindowClick,!1)}c.requestFocus()},validateImpl:function(){var a=this,b=a.clientHeight,e=a.clientWidth,f=a.height,g=a.width,h=a._indent,i=e-h,j=a.value,k=a.getLabel(j),l=a._iconMap[j],m=a.view,n=m.style,o=a._dropDownIcon,p=a._canvas,q=0,r=0;if(g===d||f===d){var s=a.preferredSize;g=s.width,f=s.height}n.width=g+"px",n.height=f+"px",ra(p,e,b);var t=Rb(p);a.drawRow&&a._dataMap?a.drawRow(t,a._dataMap[j],q,r,i,b):(l&&(da(t,l,c,q,0,h,b),q+=h),t.save(),t.beginPath(),t.rect(q,0,i-q,b),t.clip(),ea(t,k,c,c,q,0,i-q,b),t.restore()),da(t,o,c,e-h,0,h,b),t.restore()}},{view:!0,emitter:!0,properties:["dropDown","dropDownIcon","dropDownWidth","indent","iconField","labelField","valueField","labelMap","instant","editable"]},{data:{get:function(){return this._data},set:function(a){this._data=a,this._initSelf()}},value:{set:function(a){var b=this,c=e.widget.Default.clone(b._value);if(b._value=a,b.isOpen())if(b._dropDownComponent.dataModel){var f=b._dropDownComponent.selectionModel,g=d;b._dataMap&&(g=b._dataMap[a]),g&&(f.selection=g)}else b._dropDownComponent.value=a;b.epc("value",c,a)},get:function(){return this._value}},preferredSize:{get:function(){return this.getPreferredSize()},set:function(a){this.setPreferredSize(a.width,a.height)}},dropDownComponent:{get:function(){return this._dropDownComponent}},background:{get:function(){return this._background},set:function(a){this._background=a,this._view.style.background=a}}}),_("qc.widget.DropDownTemplate",b,function(a){Ha(this,a)},{getView:function(){return this._view},onOpen:function(){},onClose:function(){},requestFocus:function(){ya(this._view.view)}},{properties:["master","width","height","value"]}),_("qc.widget.ColorChooser",b,function(a){this.initView(!0,!0);var b=this,c=b._view;b._updateRGB=!1,b._updateA=!1,b._updateValue=!1,b._h=360,b._s=100,b._v=100,b._a=1,c.style.background=b.background,b._satvalRect={x:8,y:8,width:128,height:128},b._satvalPoint={x:128,y:0},b._hueRect={x:141,y:8,width:42,height:128},b._huePY=0,b._alphaRect={x:8,y:141,width:128,height:42},b._alphaPX=0,b._handleUpdateRGB=function(a){Mb(a)?a.target.blur():"blur"===a.type&&(b._updateRGB=!0,b.updateColor(),b.iv())};var d=b._rText=new zd({width:30,height:20,value:255});b._contentDiv.appendChild(d.view),d.addEventListener("keypress",b._handleUpdateRGB,!1),d._input.addEventListener("blur",b._handleUpdateRGB,!1);var f=b._gText=new zd({width:30,height:20,value:0});b._contentDiv.appendChild(f.view),f.addEventListener("keypress",b._handleUpdateRGB,!1),f._input.addEventListener("blur",b._handleUpdateRGB,!1);var g=b._bText=new zd({width:30,height:20,value:0});b._contentDiv.appendChild(g.view),g.addEventListener("keypress",b._handleUpdateRGB,!1),g._input.addEventListener("blur",b._handleUpdateRGB,!1),b._handleUpdateA=function(a){Mb(a)?a.target.blur():"blur"===a.type&&(b._updateA=!0,b.updateColor(),b.iv())};var h=b._aText=new zd({width:30,height:20,value:1});b._contentDiv.appendChild(h.view),h.addEventListener("keypress",b._handleUpdateA,!1),h._input.addEventListener("blur",b._handleUpdateA,!1),b._handleUpdateHex=function(a){if(Mb(a))a.target.blur();else if("blur"===a.type){var c=b.hexToRgb(b._hexText.value,!0);b._rText.value=c.r,b._gText.value=c.g,b._bText.value=c.b,b._updateRGB=!0,b.updateColor(),b.iv()}};var i=b._hexText=new zd({width:71,height:20,value:"#f00"});b._contentDiv.appendChild(i.view),i.addEventListener("keypress",b._handleUpdateHex,!1),i._input.addEventListener("blur",b._handleUpdateHex,!1);var j=b._okButton=new wd({width:25,height:20,text:""});b._contentDiv.appendChild(j.view),j.on("click",function(){b.value=b.packageColor(),e.widget.Default.hideToolTip()});var k=b._clearButton=new wd({width:25,height:20,text:""});b._contentDiv.appendChild(k.view),k.on("click",function(){b.value="rgba(255, 0, 0, 1)",e.widget.Default.hideToolTip()}),new Gd(b),Ha(this,a),b.updateColor()},{_actionable:!0,_clearable:!0,_returnType:"rgba",_background:"#fff",updateColor:function(){var a=this,b={r:a._r,g:a._g,b:a._b},c=a._value,e=c;if(!a._updateA&&!a._updateRGB){var f=a.hsvToRgb(a._h/360,a._s/100,a._v/100);b.r=f.r,b.g=f.g,b.b=f.b}if(a._updateRGB){var g=u(a._rText.value)||0,i=u(a._gText.value)||0,j=u(a._bText.value)||0,k=a.rgbToHsv(g/255,i/255,j/255);b.r=g,b.g=i,b.b=j,a._h=h(360*k.h),a._s=h(100*k.s),a._v=h(100*k.v),a._huePY=128*(1-k.h),a._updateRGB=!1}if(a._updateValue){var k,e=c||"rgb(255, 0, 0)";if(0===e.indexOf("#"))k=a.hexToHsv(e),b=a.hexToRgb(e,!0);else if(0===e.indexOf("rgb")){e=e.substring(e.indexOf("(")+1,e.indexOf(")"));var l=e.split(","),m=l[3];m!=d&&(m=u(m),a._a=m,a._alphaPX=128-h(128*m)),b.r=u(l[0]),b.g=u(l[1]),b.b=u(l[2]),k=a.rgbToHsv(b.r/255,b.g/255,b.b/255)}a._h=h(360*k.h),a._s=h(100*k.s),a._v=h(100*k.v),a._huePY=128*(1-k.h)%128,a._updateValue=!1}if(a._updateA){var m=a._aText.value||0;a._a=m,a._alphaPX=128-h(128*m),a._updateA=!1}a._r=b.r,a._rText.value=b.r,a._g=b.g,a._gText.value=b.g,a._b=b.b,a._bText.value=b.b,a._aText.value=a._a,a._hexText.value=a.rgbToHex(b.r,b.g,b.b,!0),a._satvalPoint.x=128*a._s/100,a._satvalPoint.y=128*(100-a._v)/100,e=a.packageColor(),c!==e&&a.onColorChange&&a.onColorChange(c,e)},onColorChange:function(){},rgbToHsv:function(a,b,c){var d,e,f=l(l(a,b),c),g=m(m(a,b),c),h=f;if(g==f)d=0,e=0;else{var i=f-g;e=i/f,d=a==f?(b-c)/i:b==f?2+(c-a)/i:4+(a-b)/i,d/=6,0>d?d+=1:d>1&&(d-=1)}return{h:d,s:e,v:h}},rgbToHex:function(a,b,c,e){return e==d&&(e=!0),a=a.toString(16),1==a.length&&(a="0"+a),b=b.toString(16),1==b.length&&(b="0"+b),c=c.toString(16),1==c.length&&(c="0"+c),((e?"#":"")+a+b+c).toUpperCase()},rgbToString:function(a){var b=a.r,c=a.g,e=a.b,f=a.a;return f!=d?"rgba("+b+", "+c+", "+e+", "+f+")":"rgb("+b+", "+c+", "+e+")"},hexToRgb:function(a,b,c){c==d&&(c=null),"#"==a.substr(0,1)&&(a=a.substr(1));var e,f,g;if(3==a.length)e=a.substr(0,1),e+=e,f=a.substr(1,1),f+=f,g=a.substr(2,1),g+=g;else{if(6!=a.length)return c;e=a.substr(0,2),f=a.substr(2,2),g=a.substr(4,2)}return e=u(e,16),f=u(f,16),g=u(g,16),isNaN(e)||isNaN(f)||isNaN(g)?c:b?{r:e,g:f,b:g}:{r:e/255,g:f/255,b:g/255}},hexToHsv:function(a){var b=this,c=b.hexToRgb(a);return b.rgbToHsv(c.r,c.g,c.b)},hsvToRgb:function(a,b,c){var d,e,f;if(0==c)d=0,e=0,f=0;else{var g=i(6*a),j=6*a-g,k=c*(1-b),l=c*(1-b*j),m=c*(1-b*(1-j));switch(g){case 1:d=l,e=c,f=k;break;case 2:d=k,e=c,f=m;break;case 3:d=k,e=l,f=c;break;case 4:d=m,e=k,f=c;break;case 5:d=c,e=k,f=l;break;case 6:case 0:d=c,e=m,f=k}}return{r:h(255*d),g:h(255*e),b:h(255*f)}},packageColor:function(){var a=this,b=a._h,c=a._s,d=a._v,e=a.hsvToRgb(b/360,c/100,d/100),f=e.r,g=e.g,h=e.b,i=a._a;return"hex"==this._returnType?this.rgbToHex(f,g,h):"rgba"===this._returnType?"rgba("+f+", "+g+", "+h+", "+i+")":"rgb("+f+", "+g+", "+h+")"},getPreferredSize:function(){return this._preferredSize||{width:246,height:219}},onDoubleClick:function(){},onPropertyChange:function(a){var b=this,c=a.property;if("returnType"!==c&&"background"!==c){if("actionable"===c){var d=b.preferredSize;return void(a.newValue?(b._contentDiv.appendChild(b._okButton.view),b.okButton.iv(),b.clearable&&(b._contentDiv.appendChild(b._clearButton.view),b.clearButton.iv()),b.preferredSize={width:d.width,height:d.height+31}):(b.preferredSize={width:d.width,height:d.height-31},za(b._okButton.view),za(b._clearButton.view)))}"value"===c?(b._updateValue=!0,b.updateColor()):"clearable"===c&&(b.actionable&&a.newValue?(b._contentDiv.appendChild(b._clearButton.view),b._clearButton.iv()):za(b._clearButton.view)),b.checkChildPreferredSizeChange(c),b.iv()}},validateImpl:function(){var a=this,b=a._canvas,c=a.clientWidth,d=a.clientHeight,f=8,g=8,h=f,i=g,j=128,k=128,l=["255, 0, 0","255, 0, 255","0, 0 ,255","0, 255, 255","0, 255, 0","255, 255, 0"],m=30,n={width:42,height:12,comps:[{type:"shape",background:"black",points:[0,0,0,12,6,6,42,0,42,12,36,6],segments:[1,2,2,5,1,2,2,5]}]},o={width:12,height:42,comps:[{type:"shape",background:"black",points:[0,0,12,0,6,6,0,42,12,42,6,36],segments:[1,2,2,5,1,2,2,5]}]},p=[];ra(b,c,d);var q=Rb(b,0,0,1),r=a.hsvToRgb(a._h/360,1,1),s=a.rgbToString(r),t={r:a._r,g:a._g,b:a._b},u=a.rgbToString(t),v=a.rgbToString({r:t.r,g:t.g,b:t.b,a:a._a});qb(q,h,i,j,k,s),qb(q,h,i,j,k,e.widget.Default.Gradient["linear.east"](q,"#fff","rgba(0, 0, 0, 0)",f,g,j,k)),qb(q,h,i,j,k,e.widget.Default.Gradient["linear.north"](q,"#000","rgba(0, 0, 0, 0)",f,g,j,k)),q.strokeRect(h-.5,i-.5,j+1,k+1);var w=a._satvalPoint;h=f+w.x,i=g+w.y,q.beginPath(),q.arc(h,i,2,0,2*Math.PI),q.strokeStyle="#fff",q.lineWidth=2,q.stroke(),q.arc(h,i,2,0,2*Math.PI),q.strokeStyle="#000",q.lineWidth=1,q.stroke(),i=g,q.beginPath();var x=q.createLinearGradient(0,0,0,k),y=l.length;x.addColorStop(0,"#fff");for(var z=0;y>z;z++)x.addColorStop(z/y+.06,"rgb("+l[z]+")");x.addColorStop(1,"rgb("+l[0]+")"),h=f+j+11,qb(q,h,i,m,k,x),q.strokeRect(h-.5,i-.5,m+1,k+1),da(q,n,null,h-6,a._huePY+i-6,n.width,n.height),h+=n.width-1,q.beginPath(),q.save(),q.rect(h,i,j,m),q.clip();for(var z=0;10>z;z++)for(var A=0;4>A;A++)q.fillStyle=(z+A)%2===0?"lightgray":"white",q.beginPath(),q.rect(h+5*z,i+5*A,5,5),q.fill();q.restore(),qb(q,h,i,50,20,v),q.strokeRect(h-.5,i-.5,51,21),q.textBaseline="middle",q.font="16px serif",q.fillStyle="black",i+=27,q.fillText("R: ",h,i+12);var B=a._rText,C=B._view,D=C.style;p.push(B),D.left=h+20+"px",D.top=i+"px",i+=27,q.fillText("G: ",h,i+12);var E=a._gText,F=E._view,G=F.style;p.push(B),G.left=h+20+"px",G.top=i+"px",i+=27,q.fillText("B: ",h,i+12);var H=a._bText,I=H._view,J=I.style;p.push(H),J.left=h+20+"px",J.top=i+"px",i+=27,q.fillText("A: ",h,i+12);var K=a._aText,L=K._view,M=L.style;p.push(K),M.left=h+20+"px",M.top=i+"px",h=f,i=g+k+11,q.save(),q.rect(h,i,j,m),q.clip();for(var z=0;26>z;z++)for(var A=0;6>A;A++)q.fillStyle=(z+A)%2===0?"lightgray":"white",q.beginPath(),q.rect(h+5*z,i+5*A,5,5),q.fill();q.restore(),q.beginPath(),qb(q,h,i,j,m,e.widget.Default.Gradient["linear.east"](q,u,"rgba(0, 0, 0, 0)",f,g,j,k)),q.strokeRect(h-.5,i-.5,j+1,m+1),da(q,o,null,a._alphaPX+h-6,i-6,o.width,o.height),h+=j+11,i+=5,q.fillStyle="black",q.fillText("#: ",h,i+12);var N=a._hexText,O=N._view,P=O.style;if(p.push(N),P.left=h+20+"px",P.top=i+"px",a.actionable){if(h=0,i=g+k+o.height+10,qb(q,h,i,c,1,"black"),i=g+k+o.height+16,a.clearable){h=j+85;var Q=a._clearButton,R=Q._view,S=R.style;p.push(Q),S.left=h+"px",S.top=i+"px",h=j+50}else h=j+85;var T=a._okButton,U=T._view,V=U.style;p.push(T),V.left=h+"px",V.top=i+"px"}if(q.restore(),a._forceLayout)for(var W=0;W<p.length;W++){var X=p[W];X.iv(!0),X.validate()}}},{view:!0,emitter:!0,properties:["value","actionable","clearable","returnType"]},{preferredSize:{get:function(){return this.getPreferredSize()},set:function(a){this.setPreferredSize(a.width,a.height)}},okButton:{get:function(){return this._okButton}},clearButton:{get:function(){return this._clearButton}},background:{get:function(){return this._background},set:function(a){var b=this,c=b._background;b._background=a,b._view.style.background=a,b.epc("background",c,a)}},value:{get:function(){return this.packageColor()},set:function(a){var b=this._value;this._value=a,this.epc("value",b,a)}}}));e.widget.Default.setImage("sliderButton",{width:14,height:14,comps:[{type:"circle",rect:[0,0,14,14],borderWidth:1,borderColor:"black",gradient:"linear.northeast",gradientColor:"#D9D9D9",background:"#868686"}]});var Dd=(_("qc.widget.Slider",b,function(a){Ha(this,a),this.initView(!0,!0);var b=this,c=b._view;c.style.display="inline-block",new Ed(b),b.iv(),b.enableToolTip()},{_min:0,_max:100,_value:0,_step:1,_button:"sliderButton",_thickness:3,_padding:4,_background:"#868686",_forecolor:"#78EEF0",_vertical:!1,_toolTip:"",onPropertyChange:function(a){var b=this,c=a.property;("min"===c||"max"===c||"step"===c)&&(b.value=b._value),b.iv()},adjustValue:function(a){null==a&&(a=0);var b=this,c=b._min,d=b._max,e=b._step;return c>a&&(a=c),a>d&&(a=d),e>0&&(a=Math.floor((a-c)/e)*e+c),a},getToolTip:function(){return this._toolTip||jc(this._value)},onValueChange:function(){},onEndValueChange:function(){},drawBackground:function(a,b,c,d,e){
qb(a,b,c,d,e,this._background)},drawForecolor:function(a,b,c,d,e){var f=this._forecolor;f&&qb(a,b,c,d,e,f)},drawButton:function(a,b,c,d,e){da(a,this._button,null,b,c,d,e)},getButtonWidth:function(){var a=this._button;return Na(a)&&(a=ca(a)),a?a.width:0},getButtonHeight:function(){var a=this._button;return Na(a)&&(a=ca(a)),a?a.height:0},validateImpl:function(){{var a=this,b=a._canvas,c=a._min,d=a._max,e=a._value,f=a._padding,g=a._thickness,i=a.width,j=a.height,k=a.getButtonWidth(),l=(j-g)/2,m=(i-g)/2,n=i,o=j,p=0,q=0;a.step}e=c>e?c:e,e=e>d?d:e,a.vertical&&(n=j,o=i),ra(b,i,j);var r=Rb(b,0,0,1,{x:0,y:0,width:i,height:j});a.vertical?(p=(e-c)/(d-c)*(j-2*f-k),m=h(m),l=h(f+k/2),o=j-2*f-k,a.drawBackground(r,m,l,g,o),a.drawForecolor(r,m,l,g,p),a.drawButton(r,0,f+p,i,k)):(q=(e-c)/(d-c)*(i-2*f-k),m=h(f+k/2),l=h(l),n=i-2*f-k,a.drawBackground(r,m,l,n,g),a.drawForecolor(r,m,l,q,g),a.drawButton(r,f+q,0,k,j)),r.restore()},getToolTipAt:function(a){var b=this,c=b.padding+b.getButtonWidth()/2,d=b.min,e=b.max,f=0;return f=b.vertical?d+(b.lp(a).y-c)/(b.height-2*c)*(b.max-d):d+(b.lp(a).x-c)/(b.width-2*c)*(b.max-d),d>f?d:f>e?e:f},getPreferredSize:function(){var a=this,b=a.getButtonWidth(),c=a.getButtonHeight(),d=a._thickness,e=a._padding,f=a._max,g=a._min,h=0,i=0;return h=f-g,h>150&&(h=150),80>h&&(h=80),h+=2*e+b,i=2*e+l(c,d),{width:h,height:i}}},{view:!0,emitter:!0,toolTip:!0,properties:["min","max","step","button","thickness","padding","background","forecolor","vertical"]},{value:{get:function(){return this._value},set:function(a){var b=this,c=b._value;a=b.adjustValue(a),c!==a&&(b._value=a,b.epc("value",c,a),b.onValueChange(c,a))}}}),e.widget.Default.define("qc.widget.ColorChooserDropDown",e.widget.DropDownTemplate,function(a){var b=this;Dd["super"].constructor.call(b,a);var c=b._view=new Cd(a),d=b.master;c.onColorChange=function(a,b){d._instant&&(d.value=b)},c._clearButton.on("click",function(){d.value=""}),c._okButton.on("click",function(){d.value=c.value,d.close(!0)}),c.on("doubleClick",function(a){d.emit("doubleClick",a),d.close()})},{onOpen:function(a){var b=this;if(a!=d){var c=b.getView();c.value=a}}},c,{value:{get:function(){return this._view.value},set:function(a){this._view.value=a}}})),Ed=_(c,b,function(a){this.slider=a,this.addListeners()},{handle_mousedown:function(a){Cb(a)&&this.handle_touchstart(a)},handle_keydown:function(a){var b=this.slider,c=b.value,d=b.step||.001;Hb(a)||Kb(a)?b.value=c-d:(Jb(a)||Ib(a))&&(b.value=c+d)},handleWindowMouseMove:function(a){this.handleWindowTouchMove(a)},handleWindowMouseUp:function(a){this.handleWindowTouchEnd(a)},setValue:function(a){var b=this.slider,c=b.padding+b.getButtonWidth()/2,d=b.min,e=b.max,f=0;f=b.vertical?d+(b.lp(a).y-c)/(b.height-2*c)*(b.max-d):d+(b.lp(a).x-c)/(b.width-2*c)*(b.max-d),d>f?f=d:f>e&&(f=e),b.value=f},handle_touchstart:function(a){var b=this;b.slider.requestFocus(),K(a),b.setValue(a),zb(b,a),b.slider._handleToolTip&&w.showToolTip(a,b.slider.getToolTip(a))},handleWindowTouchMove:function(a){this.setValue(a),this.slider._handleToolTip&&w.showToolTip(a,this.slider.getToolTip(a))},handleWindowTouchEnd:function(a){this.setValue(a),this.slider.onEndValueChange(),w.hideToolTip()}},{interactor:!0},{view:{get:function(){return this.slider._view}}}),Fd=_(c,b,function(a){var b=this;b._textField=a,b.addListeners()},{clear:function(){},handle_keypress:function(a){var b=this,c=b._textField,d=c._input,e=c.maskRe;if(e&&a.target===d){var f=String.fromCharCode(a.charCode);e.test(f)||a.preventDefault()}},handle_input:function(){var a=this,b=a._textField,c=b._input;b.value=c.value}},{interactor:!0},{view:{get:function(){return this._textField}}}),Gd=_("qc.widget.ColorChooserInteractor",b,function(a){this._colorPicker=a,this.setUp()},{setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners(),this.clear()},clear:function(){delete this._state},inRect:function(a,b){var c=this._colorPicker._view.getBoundingClientRect(),d=a.x-c.left,e=a.y-c.top,f=b.x+b.width,g=b.y+b.height;return d>=b.x&&e>=b.y&&f>=d&&g>=e},handle_touchstart:function(a){var b=this,c=b._colorPicker;b.inRect(a,c._satvalRect)?b._state=1:b.inRect(a,c._hueRect)?b._state=2:b.inRect(a,c._alphaRect)&&(b._state=3),b._handleEvent(a,b._state)},_handleEvent:function(a,b){if(K(a),b!=d){var c,e,f=this._colorPicker,g=f._view,i=g.getBoundingClientRect(),j=f._satvalRect,k=f._satvalPoint,l=f._hueRect,m=f._alphaRect,n=a.x-i.left,o=a.y-i.top;if(1===b){c={x:k.x,y:k.y};var p=n-j.x,q=o-j.y;c.x=p>j.width?j.width:0>p?0:p,c.y=q>j.height?j.height:0>q?0:q,f._s=h(100*c.x/128),f._v=h(100-100*c.y/128)}else 2===b?(e=o-l.y,e=e>l.height?l.height:0>e?0:e,f._huePY=e,f._h=360-h(360*e/128)):3===b&&(e=n-m.x,e=e>m.width?m.width:0>e?0:e,f._a=h(100*(1-e/128))/100,f._alphaPX=e);b&&(f.updateColor(),f.iv())}},handle_mousedown:function(a){this.handle_touchstart(a)},handle_mouseup:function(a){this.handle_touchend(a)},handle_touchend:function(a){var b=this;if(Bb(a)&&b._state){K(a);var c={value:b._colorPicker.value,event:a};b._colorPicker.emit("doubleClick",c),b._colorPicker.onDoubleClick&&b._colorPicker.onDoubleClick(c)}b.clear()},handle_mousemove:function(a){this.handle_touchmove(a)},handle_touchmove:function(a){var b=this;b._state&&zb(b,a)},handleWindowMouseUp:function(a){this.handleWindowTouchEnd(a)},handleWindowTouchEnd:function(){this.clear()},handleWindowMouseMove:function(a){this.handleWindowTouchMove(a)},handleWindowTouchMove:function(a){var b=this,c=b._state;c&&b._handleEvent(a,c)}},{interactor:!0},{view:{get:function(){return this._colorPicker._view}}}),Hd=_(c,b,function(a){this._list=a,this.addListeners()},{clear:function(a){var b=this;"dnd"===b._state&&b.view.handleDragAndDrop(a,"end"),b._state=b._cp=b._tx=b._ty=c},handle_mousedown:function(a){this.handle_touchstart(a)},handle_touchstart:function(a){var b=this,c=b.view;if(c.requestFocus(),K(a),b._cp=va(a),b._tx=c.translateX,b._ty=c.translateY,Cb(a))!c.handleDragAndDrop||c.isCloseToVScrollBar(a)||c.isCloseToHScrollBar(a)||c.handleDragAndDrop(a,"prepare");else{var d=c.getDataAt(a);d&&b.handleSelectMode(a,d),b.clear(a)}},handleWindowMouseUp:function(a){this.clear(a)},handleWindowTouchEnd:function(a){this.clear(a)},handle_mouseup:function(a){this.handle_touchend(a)},handle_touchend:function(a){var b=this,c=b.view;if(b._cp&&!b._state){var d=c.getDataAt(a);d&&(c.checkMode?b.handleCheckMode(a,d):b.handleSelectMode(a,d),Bb(a)?c.onDataDoubleClick(d,a):c.onDataClick(d,a))}b.clear(a)},handleWindowMouseMove:function(a){this.handleWindowTouchMove(a)},handleWindowTouchMove:function(a){var b=this,c=b.view,d=b._state,e=b._tx,f=b._ty,g=b._cp,h=va(a),i=c._viewRect;"pan"===d?c.setTranslate(e+h.x-g.x,f+h.y-g.y):"vScroll"===d?c.translateY=f+(g.y-h.y)*c._scrollHeight/i.height:"hScroll"===d?c.translateX=e+(g.x-h.x)*c._scrollWidth/i.width:"dnd"===d&&c.handleDragAndDrop(a,"between")},handle_mousemove:function(a){this.handle_touchmove(a)},handle_touchmove:function(a){if(!yb()&&Cb(a)){var b=this,c=b.view,d=c.isCloseToVScrollBar(a),e=c.isCloseToHScrollBar(a);if(b._cp){if(!b._state){if($a(va(a),b._cp)<2)return;d?b._state="vScroll":e?b._state="hScroll":c.handleDragAndDrop?(b._state="dnd",c.handleDragAndDrop(a,"begin")):b._state="pan",zb(b,a)}}else(d||e)&&c.showScrollBar()}},handle_mousewheel:function(a){this.handleScroll(a,(a.wheelDeltaX||0)/40,a.wheelDelta/40)},handle_DOMMouseScroll:function(a){this.handleScroll(a,0,-a.detail)},handleScroll:function(a,b,c){var d=this.view;K(a),d.vScrollable&&c&&d.translate(0,c*d.rowHeight),d.hScrollable&&b&&d.translate(10*b,0)},handle_keydown:function(a){var b,c=this.view,d=c.selectionModel,e=c._rows;if(Fb(a))c.selectAll();else if(Gb(a))c.handleDelete&&c.handleDelete(a);else if(Nb(a))c.handleDragAndDrop&&c.handleDragAndDrop(a,"cancel");else if(Lb(a))c.checkMode&&(b=c.focusData,b&&c.checkData(b));else if(Ib(a)||Kb(a)){var f=c.checkMode;if(b=f?c.focusData:d.lastData){var g=c.getRowIndex(b);g>=0&&(Ib(a)?0!==g&&(b=e[g-1],f?c.focusData=b:d.selection=b):g!==e.length-1&&(b=e[g+1],f?c.focusData=b:d.selection=b))}else e.length&&(b=e[0],f?c.focusData=b:d.selection=b)}},handleCheckMode:function(a,b){var c=this.view,d=c.lp(a).x;d>=0&&d<=c._indent?c.checkData(b):c.focusData=b},handleSelectMode:function(a,b){var c=this.view,d=c.selectionModel,e=d.lastData;if(Db(a))c.isSelected(b)?d.removeSelection(b):d.appendSelection(b);else if(Eb(a))if(e)for(var f=c.getRowIndex(e),g=c.getRowIndex(b);f!==g;)f+=g>f?1:-1,d.appendSelection(c._rows[f]);else d.selection=b;else(Cb(a)||!d.isSelected(b))&&(d.selection=b)}},{interactor:!0},{view:{get:function(){return this._list}}}),Id=_(c,Hd,function(a){Id["super"].constructor.call(this,a)},{handleCheckMode:function(a,b){var c=this.view,d=c._checkColumn;if(c.isCellEditable(b,d)){var e=c.getColumnInfo(d);if(e){var f=c.lp(a).x;if(f>=e.beginX&&f<e.endX)return void c.checkData(b)}}c.focusData=b,c.checkEditing(b,a)},handleSelectMode:function(a,b){Id["super"].handleSelectMode.apply(this,arguments),this.view.checkEditing(b,a)}}),Jd=_(c,Hd,function(a){Jd["super"].constructor.call(this,a)},{toggle:function(a,b,c,d){var e=this.view,f=e.lp(a).x;if(e.getToggleIcon(b)){var g=c*d;if(f>=g&&g+c>=f)return e.toggle(b),!0}return Bb(a)?(e.toggle(b),!0):!1},handleCheckMode:function(a,b){var c=this.view,d=c.lp(a).x,e=c.getLevel(b),f=c._indent,g=f*(e+1);return d>=g&&g+f>=d?void c.checkData(b):void(this.toggle(a,b,f,e)||(c.focusData=b))},handleSelectMode:function(a,b){var c=this,d=c.view;c.toggle(a,b,d._indent,d.getLevel(b))||Jd["super"].handleSelectMode.call(c,a,b)},handle_keydown:function(a){if(Hb(a)||Jb(a)){var b=this.view,c=b._rows,d=b.checkMode,e=b.selectionModel,f=d?b.focusData:e.lastData;f?f.length&&(Hb(a)?b.collapse(f):b.expand(f)):c.length>0&&(f=c[0],d?b.focusData=f:e.selection=f)}else Jd["super"].handle_keydown.call(this,a)}}),Kd=_(c,Hd,function(a){Kd["super"].constructor.call(this,a)},{handleCheckMode:function(a,b){var c=this.view,d=c._treeColumn,e=c.getColumnInfo(d),f=c.lp(a).x;if(e){var g=c._indent,h=e.beginX+g*c.getLevel(b);if(c.getToggleIcon(b)&&f>=h&&h+g>=f)return void c.toggle(b);if(c.isCellEditable(b,d)&&(h+=g,f>=h&&h+g>=f))return void c.checkData(b)}c.focusData=b,c.checkEditing(b,a)},handleSelectMode:function(a,b){var c=this.view,d=c.lp(a).x;if(c.getToggleIcon(b)){var e=c.getColumnInfo(c._treeColumn);if(e){var f=c._indent,g=e.beginX+f*c.getLevel(b);if(d>=g&&g+f>=d)return void c.toggle(b)}}Kd["super"].handleSelectMode.apply(this,arguments),c.checkEditing(b,a)}}),Ld=_(c,b,function(a){this._table=a,this.addListeners()},{clear:function(){var a=this;a._state=a._cp=a._ty=a._p=c,a.cursor=""},handle_mousedown:function(a){this.handle_touchstart(a)},handle_touchstart:function(a){var b=this,c=b.view;K(a),c.requestFocus(),Cb(a)?(b._cp=va(a),b._ty=c.translateY,b._p=c.columnPosition,b.handle_touchmove(a)):c.selectRowIndex=c.getRowIndexAt(a)},handleWindowMouseUp:function(){this.clear()},handleWindowTouchEnd:function(){this.clear()},handle_mouseup:function(a){this.handle_touchend(a)},handle_touchend:function(a){var b=this;if(b._cp&&!b._state){var c=b.view,d=c.lp(a),e=d.x,f=d.y,g=c._indent,h=c.getRowIndexAt(a),i=c._columnLineX;if(h>=0){var j=c._rowHeight,k=j*h,l=c._rows[h],m=l.property;if(Na(l))e>=0&&g>=e&&f>=k&&k+j>=f?c.toggle(l):Bb(a)&&c.toggle(l);else if(e>i){var n=l.data;if(c.isCellEditable(n,m)){var o={x:i+1,y:k,width:c.clientWidth-i-1,height:j},p={x:o.x+c.translateX,y:o.y+c.translateY,width:o.width,height:o.height},q=0,r=c._viewRect;o.y<r.y?q=o.y-r.y:o.y+j>r.y+r.height&&(q=o.y+j-r.y-r.height),q&&(c.translateY=c.translateY-q,p.y-=q),c.beginEditing(n,m,p,a,d,o)}}}c.selectRowIndex=h}b.clear()},handleWindowMouseMove:function(a){this.handleWindowTouchMove(a)},handleWindowTouchMove:function(a){var b=this,c=b.view,d=b._ty,e=b._cp,f=va(a),g=b._state;if("pan"===g)c.translateY=d+f.y-e.y;else if("resize"===g){var h=c.clientWidth;if(h>16){var i=b._p-(e.x-f.x)/h,j=16/h;j>i&&(i=j),i>1-j&&(i=1-j),c.columnPosition=i}}else"scroll"===g&&(c.translateY=d+(e.y-f.y)*c._scrollHeight/c._viewRect.height)},handle_mousemove:function(a){this.handle_touchmove(a)},handle_touchmove:function(a){if(!yb()&&Cb(a)){var b=this,c=b.view,d=n(c.lp(a).x-c._columnLineX)<=(Ob(a)?3:8);b._cp?b._state||(d?(b._state="resize",zb(b,a)):n(va(a).y-b._cp.y)>=2&&(b._state=c.isCloseToVScrollBar(a)?"scroll":"pan",zb(b,a))):(b.cursor=d?"ew-resize":"",c.isCloseToVScrollBar(a)&&c.showScrollBar())}},handle_mousewheel:function(a){this.handleScroll(a,a.wheelDelta/40)},handle_DOMMouseScroll:function(a){2===a.axis&&this.handleScroll(a,-a.detail)},handleScroll:function(a,b){K(a),this._table.translate(0,b*this._table.rowHeight)},handle_keydown:function(a){var b=this._table,c=b._rows.length,d=b._selectRowIndex+(Ib(a)?-1:1);(Ib(a)||Kb(a))&&(0>d&&(d=0),d>=c&&(d=c-1),b.selectRowIndex=d)}},{interactor:!0},{view:{get:function(){return this._table}}}),Md=_(c,b,function(a){this._view=a,this.addListeners()},{handle_mousewheel:function(a){this.handleScroll(a,a.wheelDelta/40)},handle_DOMMouseScroll:function(a){this.handleScroll(a,-a.detail)},handleScroll:function(a,b){K(a),this.view._table.translate(10*b,0)},handle_mousemove:function(a){if(!yb()){var b=this;delete b._columnInfo,b.cursor="";for(var c=b.view,d=c._columnInfos,e=c.lp(a).x,f=d.length-1;f>=0;f--){var g=d[f],h=g.column,i=g.endX;if(c.resizable&&n(i-e)<=(Ob(a)?3:8))return b._columnInfo=g,void(b.cursor="ew-resize");(h.sortable||c.movable||h===c._table.checkColumn)&&e>=g.beginX&&i>=e&&h.width>0&&(b._columnInfo=g,b.cursor="pointer")}}},handle_mousedown:function(a){this.handle_touchstart(a)},handle_touchstart:function(a){var b=this,c=b.view;K(a),c._table.endEditing(),b.handle_mousemove(a),b._columnInfo&&(b._x=va(a).x,b._lx=c.lp(a).x,b._w=b._columnInfo.column.width,zb(b,a))},handleWindowMouseMove:function(a){this.handleWindowTouchMove(a)},handleWindowTouchMove:function(a){var b=this,c=b.view,d=b.cursor,e=b._columnInfo,f=va(a).x-b._x;if(b._resizing||b._moving||("ew-resize"===d?b._resizing=!0:c.movable&&"pointer"===d&&n(f)>2&&(b._moving=!0)),b._resizing)e.column.width=b._w+f;else if(b._moving){var g=b._lx+f;c._columnInfos.forEach(function(a){var b=a.beginX,d=a.endX;if(g>=b&&d>=g){var h={column:e.column,beginX:e.beginX+f,front:d-g>g-b,insertColumn:a.column};h.position=h.front?b:d,c.movingColumnInfo=h}})}},handleCheckColumn:function(a,b,c){var d=this,e=d.view,f=e._table,g=e._checkIcon;if(e.isMultiCheckableColumn(a)){var h=d._lx,i=a.width,j=Zb(g,a);if(h>=b+i/2-j&&b+i/2+j>=h){e.checkIcon="check"===g?"uncheck":"check";var k=f.selectionModel,l=f._rows;return"check"===g?k.removeSelection(l):k.selection=l,f.onCheckColumnClick(a,c),!0}}return!1},handleWindowMouseUp:function(a){this.handleWindowTouchEnd(a)},handleWindowTouchEnd:function(a){var b=this,d=b.view,e=d._table,f=e.columnModel,g=b._columnInfo;if(b._moving){var h=d._movingColumnInfo;if(h&&h.insertColumn!==h.column){var i=h.column,j=f._roots,k=Ta(j,i),l=j.indexOf(h.insertColumn);h.front||l++,Sa(j,i,l),f.emit("hierarchyChange",{data:i,oldIndex:k,newIndex:l})}d.movingColumnInfo=c,delete b._moving}else if(!b._resizing&&g){i=g.column;var m=d.lp(a).x,n=g.beginX,o=!0;if(d.onColumnClick){var p=d.onColumnClick(i,a);p===!1&&(o=!1)}if(o&&m>=n&&m<=g.endX&&!b.handleCheckColumn(i,n,a)){if(i.sortable){var q=e.sortMode,r=i.sortOrder;"tristate"===q?e.sortColumn===i?("desc"===r&&(e.sortColumn=c),i.sortOrder="asc"===r?"desc":"asc"):e.sortColumn=i:"bistate"===q&&(e.sortColumn===i?i.sortOrder="asc"===r?"desc":"asc":e.sortColumn=i)}e.onColumnClick(i,a)}}b._columnInfo=b._resizing=b._x=b._lx=b._w=c}},{interactor:!0},{view:{get:function(){return this._view}}}),Nd=_(c,b,function(a){this._dialog=a,this.addListeners()},{clear:function(){var a=this;a._resizeDiv&&a._dialog.view.removeChild(a._resizeDiv),a._mousePosition=a._resizeMode=a._moveMode=a._resizeDiv=c},handle_mousedown:function(a){this.handle_touchstart(a)},handle_touchstart:function(a){var b=this,c=b._dialog;c.requestFocus();var d=c._interactionDiv.getBoundingClientRect(),e=a.clientX-d.left,f=a.clientY-d.top;if(c.titleVisible&&24>=f&&e>5&&e<c.width-5)K(a),b._mousePosition=wa(a),zb(b,a),b._moveMode=1;else{var g,h=c._eastResizeDiv,i=c._westResizeDiv,j=c._southResizeDiv,k=c._southeastResizeDiv,l=c._southwestResizeDiv;h.contains(a.target)?g="east":i.contains(a.target)?g="west":j.contains(a.target)?g="south":k.contains(a.target)?g="southeast":l.contains(a.target)&&(g="southwest"),g&&(K(a),b._resizeMode=g,b._mousePosition=wa(a),zb(b,a))}},handleWindowMouseUp:function(a){this.handleWindowTouchEnd(a)},handleWindowTouchEnd:function(a){var b=this,c=b._resizeMode,d=b._resizeDiv,e=b.view;if(c&&d){var f=d.style.left,g=d.style.width,h=d.style.height;e.x=u(f),e.width=u(g),e.height=u(h)}this.clear(a)},handle_mouseup:function(a){this.handle_touchend(a)},handle_touchend:function(){},handleWindowMouseMove:function(a){this.handleWindowTouchMove(a)},handleWindowTouchMove:function(a){a.preventDefault();var b=this,c=b._dialog,d=b._mousePosition,e=wa(a),f={x:c.x,y:c.y},g=c.size,h=c.dragContainment,i=b._resizeMode;if(b._moveMode){K(a);var j=e.x-d.x,k=e.y-d.y,l=f.x+j,m=f.y+k;if("viewport"===h){var n=Ba();0>l&&(l=0),0>m&&(m=0),m+g.height>n.height&&(m=n.height-g.height),l+g.width>n.width&&(l=n.width-g.width)}c.position={x:l,y:m},d.x+=l-f.x,d.y+=m-f.y}else if(i){K(a);var o=c.width,p=c.height,q=b._resizeDiv,r=f.x;if(!q){q=b._resizeDiv=pa(!1,c._view);var s=q.style;s.position="fixed",s.border="1px dashed black",s.left=r+"px",s.top=f.y+"px",s.width=o+"px",s.height=p+"px"}var j=e.x-d.x,k=e.y-d.y,t=50;/east/.test(i)?(t>o+j&&(j=t-o),q.style.width=o+j+"px"):/west/.test(i)&&(t>o-j&&(j=o-t),q.style.width=o-j+"px",q.style.left=r+j+"px"),/south/.test(i)&&(t>p+k&&(k=t-p),q.style.height=p+k+"px")}}},{interactor:!0},{view:{get:function(){return this._dialog}}}),Od=_(c,b,function(a){var b=this;b._panel=a,b.addListeners()},{_mouseState:"normal",_toolIndex:c,clear:function(){},handle_mousedown:function(a){this.handle_touchstart(a)},handle_touchstart:function(a){var b=this,d=b._panel,e=b._toolIndex;K(a),e!=c&&(b._mouseState="active",d.iv(),zb(b,a))},handleWindowMouseUp:function(a){this.handleWindowTouchEnd(a)},handle_mouseleave:function(){var a=this,b=a._panel,c=a._mouseState;yb()||"hover"!==c||(a._mouseState="normal",b.iv())},handleWindowTouchEnd:function(a){var b=this,d=b._panel,e=b._toolIndex=b._calcToolIndex(a);e!=c?(b._mouseState="hover",d.cursor="pointer",d.iv()):(b._mouseState="normal",d.cursor="auto",d.iv())},handle_mouseup:function(a){this.handle_touchend(a)},handle_touchend:function(a){var b=this,d=b._panel,e=b._toolIndex,f=b._calcToolIndex(a);if(f!=c&&f===e){var g=d.tools[e];d.handleToolClick(g,a)}},handle_mousemove:function(a){this.handle_touchmove(a)},_calcToolIndex:function(a){var b=this,d=b._panel;a=Pb(a);var e=d._interactionDiv.getBoundingClientRect(),f=a.clientX-e.left,g=a.clientY-e.top,h=d.width,i=d.titleHeight,j=h-6,k=4,l=d.tools,m=c;if(d.titleVisible)for(var n=l.length-1;n>=0;n--){if(g>=k&&k+i-8>=g&&j>f&&f>j-(i-8)){m=n;break}j-=i-8,j-=2}return m},handle_touchmove:function(a){var b=this,d=b._panel,e=b._mouseState;if(!yb()&&"active"!==e){var f=b._toolIndex;b._toolIndex=c;var g=b._toolIndex=b._calcToolIndex(a);f!==g&&(g!=c?(d.cursor="pointer",b._mouseState="hover"):(d.cursor="auto",b._mouseState="normal"),d.iv())}},handleWindowMouseMove:function(a){this.handleWindowTouchMove(a)},handleWindowTouchMove:function(){}},{interactor:!0},{view:{get:function(){return this._panel}}}),Pd=_(c,b,function(a){this._view=a,this.addListeners()},{clear:function(){var a=this;a._state=a._cp=a._tx=a._ty=c},handle_mousedown:function(a){this.handle_touchstart(a)},handle_touchstart:function(a){var b=this,c=b.view,d=c.isCloseToVScrollBar(a),e=c.isCloseToHScrollBar(a),f=va(a);K(a),(d||e)&&(d?b._state="vScroll":e&&(b._state="hScroll"),b._cp=f,b._tx=c.translateX,b._ty=c.translateY,zb(b,a))},handleWindowMouseUp:function(a){this.clear(a)},handleWindowTouchEnd:function(a){this.clear(a)},handle_mouseup:function(a){this.handle_touchend(a)},handle_touchend:function(a){var b=this;b.clear(a)},handleWindowMouseMove:function(a){this.handleWindowTouchMove(a)},handleWindowTouchMove:function(a){var b=this,c=b.view,d=b._state,e=b._tx,f=b._ty,g=b._cp,h=va(a),i=c._viewRect;"vScroll"===d?c.translateY=f+(g.y-h.y)*c._scrollHeight/i.height:"hScroll"===d&&(c.translateX=e+(g.x-h.x)*c._scrollWidth/i.width)},handle_mousemove:function(a){this.handle_touchmove(a)},handle_touchmove:function(a){if(!yb()&&Cb(a)){var b=this,c=b.view,d=c.isCloseToVScrollBar(a),e=c.isCloseToHScrollBar(a);(d||e)&&c.showScrollBar()}},handle_mousewheel:function(a){this.handleScroll(a,a.wheelDelta/40,a.wheelDelta!==a.wheelDeltaX)},handle_DOMMouseScroll:function(a){this.handleScroll(a,-a.detail,!0)},handleScroll:function(a,b,c){var d=this.view;K(a),c&&d.vScrollable?d.translate(0,20*b):d.hScrollable&&d.translate(10*b,0)}},{interactor:!0},{view:{get:function(){return this._view}}}),Qd=_(c,b,function(a){this._layout=a,this.addListeners()},{clear:function(){},handle_mousedown:function(a){this.handle_touchstart(a)},handle_touchstart:function(a){K(a)},handle_mouseup:function(a){this.handle_touchend(a)},handle_touchend:function(a){var b=this,c=b._layout;if(K(a),Cb(a)){var d=c.getTitle(a);c.isExpanded(d)?c.collapse():c.expand(d)}}},{interactor:!0},{view:{get:function(){return this._layout.container}}}),Rd=_(c,b,function(a){this._layout=a,this.addListeners()},{clear:function(){var a=this;za(a._resizeDiv),a._resizeDiv=a._clientValue=a._splitter=a._splitterName=a.toggle=c},handle_mousedown:function(a){this.handle_touchstart(a)},_getSplitter:function(a){for(var b=this,c=b._layout,d=["left","right","top","bottom"],e=a.target,f=0;f<d.length;f++){var g=d[f],h=c["_"+g+"Splitter"];if(h&&h.contains(e))return g}},_getToggle:function(a){for(var b=this,c=b._layout,d=["left","right","top","bottom"],e=a.target,f=0;f<d.length;f++){var g=d[f],h=c["_"+g+"Toggle"];if(h&&h.contains(e))return g}},handle_touchstart:function(a){var b=this,c=b._layout,d=b._getToggle(a);if(d){var e=c["_"+d+"Resizable"];e&&(K(a),b._splitterName=d,b._toggle=c["_"+d+"Toggle"],b._clientPoint=va(a))}else{var f=b._getSplitter(a);if(f){var e=c["_"+f+"Resizable"],g=c.isExpanded(f);e&&g&&(b._splitterName=f,b._splitter=c["_"+f+"Splitter"],b._clientPoint=va(a),K(a))}}},_setCursor:function(a){var b=this,c=b.view,d=c.view,e=c._layout,f="default";if(!yb()){var g=b._getToggle(a);if(g&&e["_"+g+"Resizable"])f="pointer";else{var h=b._getSplitter(a);if(h){var i=e["_"+h+"Resizable"],j=e.isExpanded(h);i&&j&&(f="left"===h||"right"===h?"ew-resize":"ns-resize")}}}d.style.cursor=f},handle_mouseleave:function(){this.view.view.style.cursor="default"},handle_touchmove:function(a){var b=this,c=b._splitter,d=b._splitterName,e=b._clientPoint,f=b.view,g=va(a);if(b._setCursor(a),c&&!yb()&&$a(g,e)>=1){var h=b._resizeDiv=pa(),i=h.style,j=c.style;i.left=j.left,i.top=j.top,i.width=j.width,i.height=j.height,i.zIndex="2",i.opacity="0.5",i.background="black",b._clientValue="left"===d||"right"===d?e.x:e.y,xa(f._interactionDiv,h),zb(b,a);var k=b._layout;["left","right","top","bottom","center"].forEach(function(a){var c=k["_"+a+"View"];if(c&&("center"===a||k.isExpanded(a))){var d=pa();d.style.left=c.view.style.left,d.style.top=c.view.style.top,d.style.width=c.width+"px",d.style.height=c.height+"px",f.view.appendChild(d),b["_"+a+"Mask"]=d}})}},handle_mousemove:function(a){this.handle_touchmove(a)},handleWindowMouseMove:function(a){this.handleWindowTouchMove(a)},handleWindowTouchMove:function(a){var b=this,c=b.view,d=b._layout,e=b._resizeDiv.style,f=c.width,g=d.minSize,h=d.splitterSize,i=c.height,j=b._splitter,k=b._splitterName,l=d.rightView,m=d.leftView,n=d.topView,o=d.bottomView;if("left"===k||"right"===k){var p=u(j.style.left),q=va(a),r=q.x-b._clientValue+p;if("left"===k){var s=d.rightWidth;l?r>f-h-h-s-g&&(r=f-h-h-s-g):r>f-h-g&&(r=f-h-g),g>r&&(r=g),e.left=r+"px"}else r>f-h-g&&(r=f-h-g),m?r<d.leftWidth+h+g&&(r=d.leftWidth+h+g):g>r&&(r=g),e.left=r+"px"}else{var t=u(j.style.top),q=va(a),r=q.y-b._clientValue+t;if("top"===k){var v=d.bottomHeight;o?r>i-h-h-v-g&&(r=i-h-h-v-g):r>i-h-g&&(r=i-h-g),g>r&&(r=g),e.top=r+"px"}else r>i-h-g&&(r=i-h-g),n?r<d.topHeight+h+g&&(r=d.topHeight+h+g):g>r&&(r=g),e.top=r+"px"}},handleWindowMouseUp:function(a){this.handleWindowTouchEnd(a)},handleWindowTouchEnd:function(){var a=this,b=a._splitter,c=a._splitterName,d=a._layout;if("left"===c||"right"===c){var e=u(b.style.left),f=u(a._resizeDiv.style.left),g=f-e;"left"===c?d.leftWidth=d.leftWidth+g:d.rightWidth=d.rightWidth-g}else{var h=u(b.style.top),i=u(a._resizeDiv.style.top),g=i-h;"top"===c?d.topHeight=d.topHeight+g:d.bottomHeight=d.bottomHeight-g}a._clearMask(),a.clear()},_clearMask:function(){var a=this,b=a._layout;["left","right","top","bottom","center"].forEach(function(c){var d=a["_"+c+"Mask"];delete a["_"+c+"Mask"],d&&b.container.view.removeChild(d)})},handle_mouseup:function(a){this.handle_touchend(a)},handle_touchend:function(a){if(!yb()){var b=this,c=b._toggle,d=b._layout,e=b._splitterName;c&&c.contains(a.target)&&(d.isExpanded(e)===!0?d.setExpanded(e,!1):d.isExpanded(e)===!1&&d.setExpanded(e,!0)),b.clear()}}},{interactor:!0},{view:{get:function(){return this._layout.container}}}),Sd=_(c,b,function(a){var b=this;b._contextmenu=a,b.addListeners(),a.view.addEventListener("contextmenu",function(a){a.stopPropagation(),a.preventDefault()})},{handle_touchstart:function(a){this._startPoint={x:a.pageX,y:a.pageY}},handle_mousedown:function(a){this.handle_touchstart(a)},handle_touchend:function(a){var b=this._contextmenu;if(this._startPoint){var c={x:a.pageX,y:a.pageY},d=$a(this._startPoint,c);if(2>d){var e=b.getMenuItemAt(a);if(e){if("check"===e.type)"function"!=typeof e.selected&&(e.selected=!e.selected);else if("radio"===e.type&&"function"!=typeof e.selected){var f=e.groupId;if(f)for(var g=b._itemsGroupMap[f],h=0;h<g.length;h++){var i=g[h];i.selected=i===e?!0:!1}}e.action&&e.action.call(b,e,a),b.emit("action",{item:e,event:a})}b._itemsLevelMap[e._id]||b.hide(e)}}},handle_mouseup:function(a){this.handle_touchend(a)},handleWindowTouchEnd:function(){},handleWindowMouseUp:function(a){this.handleWindowTouchEnd(a)},handle_mouseout:function(a){var b,c=this._contextmenu,d=a.target;null!==d._parentItemId&&(b=c._itemsMap[d._parentItemId]),c.hoverMenuItem=b},handle_mousemove:function(a){this.handle_touchmove(a)},handle_touchmove:function(a){var b=this._contextmenu,c=b.getMenuItemAt(a);b.hoverMenuItem=c},handleWindowTouchMove:function(){},handleWindowMouseMove:function(a){this.handleWindowTouchMove(a)},handleScroll:function(){},handle_mousewheel:function(){},handle_DOMMouseScroll:function(a){this.handleScroll(a,-a.detail)},handleDocMouseDown:function(a){this._contextmenu.view.contains(a.target)||this._contextmenu.hide()},handleViewParentContextMenu:function(a){a.preventDefault(),this._contextmenu.show(a)},handleDocKeyDown:function(){}},{interactor:!0},{view:{get:function(){return this._contextmenu.view}}}),Td=_(c,b,function(a){var b=this;b._menu=a,b.addListeners();var d=b.handle_documentmousedown.bind(b),e=a._dropDownMenu;e.on("show",function(){document.addEventListener("mousedown",d)}),e.on("hide",function(){a.setState("normal"),a.setCurrentItem(c),document.removeEventListener("mousedown",d)}),e.on("action",function(b){a.emit("action",b)})},{handle_documentmousedown:function(a){var b=this._menu,d=a.target;b.view.contains(d)||b._dropDownMenu.view.contains(d)||(b.setState("normal"),b.setCurrentItem(c))},handle_touchstart:function(a){var b=this,c=b._menu,d=c.getMenuItemAt(a);d&&(c.setState("active"===c._state?"hover":"active"),c.setCurrentItem(d))},handle_mousedown:function(a){this.handle_touchstart(a)},handle_touchend:function(){},handle_mouseup:function(a){this.handle_touchend(a)},handleWindowTouchEnd:function(){},handleWindowMouseUp:function(a){this.handleWindowTouchEnd(a)},handle_mouseleave:function(){var a=this._menu;"active"!==a._state&&(a.setState("normal"),a.setCurrentItem(c))},handle_mousemove:function(a){this.handle_touchmove(a)},handle_touchmove:function(a){var b=this,c=b._menu,d=c.getMenuItemAt(a);d&&("active"===c._state||c.setState("hover"),c.setCurrentItem(d))},handleWindowTouchMove:function(){},handleWindowMouseMove:function(a){this.handleWindowTouchMove(a)}},{interactor:!0},{view:{get:function(){return this._menu}}}),Ud=_(c,b,function(a){var b=this;b._button=a,b.addListeners(),a._contextMenu.on("hide",function(c){c&&c.item&&(b.clear(),a.setState("normal"))})},{clear:function(){this._pressed=this._splitClickCount=null},handle_documentmousedown:function(a){var b=this._button;b.view.contains(a.target)||b._contextMenu.view.contains(a.target)||(this.clear(),b.setState("normal"))},handle_mousedown:function(a){this.handle_touchstart(a)},handle_touchstart:function(a){K(a);var b=this,d=b._button,e=d.view,f=e.getBoundingClientRect(),g=d.menuItems;d.requestFocus(),g&&d.split&&a.clientX-f.left>f.width-30?(d.setState("splitActive"),this._pressed=!0,this._splitClickCount==c?this._splitClickCount=0:this._splitClickCount++):this._pressed||(d.setState("active"),this._pressed=!0),zb(this,a)},handle_mouseup:function(a){this.handle_touchend(a)},handle_touchend:function(){},handle_mouseenter:function(){if(!this._pressed&&!yb()){var a=this._button;a.setState("hover")}},handle_mouseleave:function(){if(!this._pressed){var a=this._button;a.setState("normal")}},handleWindowMouseMove:function(a){this.handleWindowTouchMove(a)},handleWindowTouchMove:function(){},handleWindowMouseUp:function(a){this.handleWindowTouchEnd(a)},handleWindowTouchEnd:function(a){var b=this,c=b._button,d=c.view.getBoundingClientRect(),e=function(){c.setState(c.view.contains(a.target)?"hover":"normal"),b.clear()};b._pressed&&("active"===c._state?e():"splitActive"===c._state&&a.clientX-d.left>d.width-30&&this._splitClickCount>0&&e(),c.view.contains(a.target)&&(c.validate(),c.emit("click",a)))}},{interactor:!0},{view:{get:function(){return this._button}}}),Vd=_(c,b,function(a){var b=this;b._button=a,b.addListeners()},{clear:function(){this._pressed=null},handle_mousedown:function(a){this.handle_touchstart(a)},handle_touchstart:function(a){K(a);var b=this,c=b._button;b._pressed||(c._state="active",b._pressed=!0),c.requestFocus(),c.iv(),zb(this,a)},handle_mouseup:function(a){this.handle_touchend(a)},handle_touchend:function(){},handle_mouseenter:function(){if(!this._pressed){var a=this._button;a._state="hover",a.iv()}},handle_mouseleave:function(){if(!this._pressed){var a=this._button;a._state="normal",a.iv()}},handleWindowMouseMove:function(a){this.handleWindowTouchMove(a)},handleWindowTouchMove:function(){},handleWindowMouseUp:function(a){this.handleWindowTouchEnd(a)},handleWindowTouchEnd:function(a){var b=this,c=b._button;b._pressed&&("active"===c._state&&(c._state=c.view.contains(a.target)?"hover":"normal",c.iv()),c.view.contains(a.target)&&(c.selected=!c.selected,c.validate(),c.emit("click",a)),b.clear())}},{interactor:!0},{view:{get:function(){return this._button}}}),Wd=_(c,b,function(a){var b=this;b._label=a,b.addListeners()},{clear:function(){},handle_mousedown:function(a){this.handle_touchstart(a)},handle_touchstart:function(a){K(a),this._label.emit("mousedown",a)},handle_mouseup:function(a){this.handle_touchend(a)},handle_touchend:function(a){this._label.emit("mouseup",a)},handleWindowMouseMove:function(a){this.handleWindowTouchMove(a)},handleWindowTouchMove:function(){},handleWindowMouseUp:function(a){this.handleWindowTouchEnd(a)},handleWindowTouchEnd:function(){}},{interactor:!0},{view:{get:function(){return this._label}}}),Xd=_(c,b,function(a){this._tabs=a,this.addListeners()},{handle_mousewheel:function(a){this.handleScroll(a,a.wheelDelta/40*10)},handle_DOMMouseScroll:function(a){this.handleScroll(a,10*-a.detail)},handleScroll:function(a,b){K(a);var c=this._tabs,d=c._tabPosition;c.hScrollable&&["top","bottom"].indexOf(d)>=0&&(c.translateX=this._tabs.translateX+b),c.vScrollable&&["left","right","left-vertical","right-vertical"].indexOf(d)>=0&&(c.translateY=this._tabs.translateY+b)},getTabInfoAt:function(a){var b,d,e=this._tabs,f=e._tabPosition,g=e._tabInfos;if(["top","bottom"].indexOf(f)>=0){var h=e.lp(a).x;for(b=0;b<g.length;b++)if(d=g[b],d.startX<=h&&h<=d.endX)return d;

}else if(["left","right","left-vertical","right-vertical"].indexOf(f)>=0){var i=e.lp(a).y;for(b=0;b<g.length;b++)if(d=g[b],d.startY<=i&&i<=d.endY)return d}return c},isClickable:function(a){var b=this._tabs,c=b._tabPosition,d=this._tabInfo=this.getTabInfoAt(a);return b.hScrollable&&["top","bottom"].indexOf(c)>=0?!0:b.vScrollable&&["left","right","left-vertical","right-vertical"].indexOf(c)>=0?!0:d&&(!d.tab.disabled||b.movable)},handle_mousemove:function(a){var b=this;yb()?b._tabInfo2=b.getTabInfoAt(a):b.view.style.cursor=b.isClickable(a)?"pointer":""},handle_mousedown:function(a){this.handle_mousemove(a),this.handle_touchstart(a)},handle_touchstart:function(a){var b=this,c=b._tabs,d=c._tabPosition;K(a),b.isClickable(a)&&(["top","bottom"].indexOf(d)>=0?(b._x=va(a).x,b._lp=c.lp(a),b._tx=c.translateX):(b._y=va(a).y,b._lp=c.lp(a),b._ty=c.translateY),zb(b,a))},handleWindowMouseMove:function(a){this.handleWindowTouchMove(a)},handleWindowTouchMove:function(a){var b,c=this,d=c._tabs,e=d._tabPosition,f=c._tabInfo;if(["top","bottom"].indexOf(e)>=0){if(b=va(a).x-c._x,!c._translating&&!c._moving&&n(b)>2&&(d.hScrollable&&!Db(a)?c._translating=1:f&&d.movable&&(c._moving=1)),c._translating)d.translateX=c._tx+b;else if(c._moving){var g=c._lp.x+b,h=d._tabGap/2;d._tabInfos.forEach(function(a){var c=a.endX,e=g-a.startX<c-g;g>=a.startX&&c>=g&&(d.movingTabInfo={tab:f.tab,startX:f.startX+b,width:f.width,front:e,insertTab:a.tab,position:e?l(0,a.startX-h):m(d._sumWidth,c+h)})})}}else if(b=va(a).y-c._y,!c._translating&&!c._moving&&n(b)>2&&(d.vScrollable&&!Db(a)?c._translating=1:f&&d.movable&&(c._moving=1)),c._translating)d.translateY=c._ty+b;else if(c._moving){var i=c._lp.y+b,h=d._tabGap/2;d._tabInfos.forEach(function(a){var c=a.endY,e=i-a.startY<c-i;i>=a.startY&&c>=i&&(d.movingTabInfo={tab:f.tab,startY:f.startY+b,height:f.height,front:e,insertTab:a.tab,position:e?l(0,a.startY-h):m(d._sumHeight,c+h)})})}},handleWindowMouseUp:function(a){this.handleWindowTouchEnd(a)},handleWindowTouchEnd:function(){var a=this,b=a._tabs,d=b._tabPosition,e=b.tabModel,f=e._roots,g=a._tabInfo;if(a._moving){var h=b.movingTabInfo;if(h&&h.insertTab!==h.tab){var i=h.tab,j=Ta(f,i),k=f.indexOf(h.insertTab);k>=0&&(h.front||k++,k<=f.length&&(Sa(f,i,k),e.emit("hierarchyChange",{data:i,oldIndex:j,newIndex:k})))}b.movingTabInfo=c,delete a._moving}else if(!a._translating&&g){i=g.tab;var l=a._tabInfo2;if(!l||l.tab===i)if(!i.disabled&&db(g.closeRect,a._lp)){var m=f.indexOf(i);e.remove(i),b.onTabClose(i,m)}else i.disabled||b.currentTab===i||(e.selectionModel.selection=i)}a._translating=a._tabInfo=a._tabInfo2=["top","bottom"].indexOf(d)>=0?a._x=a._lp=a._tx=c:a._y=a._lp=a._ty=c}},{interactor:1},{view:{get:function(){return this._tabs._titleDiv}}});G(x,{selectable:!0,visible:!0,movable:!0,"pixel.perfect":!0,"image.stretch":"fill","body.color":d,"body.alpha":1,"border.color":d,"border.width":2,"border.padding":2,"border.type":"rect","select.color":L,"select.width":1,"select.padding":2,"select.type":"rect","shadow.blur":6,"shadow.offset.x":3,"shadow.offset.y":3,"shadow.color":O,shape:d,"shape.repeat.image":d,"shape.info":d,"shape.cap":ia,"shape.join":ha,"shape.background":U,"shape.gradient":d,"shape.gradient.color":W,"shape.border.width":2,"shape.border.color":V,"shape.border.gradient":!1,"shape.border.gradient.color":d,"shape.border.dash.pattern":d,"shape.border.dash.offset":0,"shape.border2.width":0,"shape.border2.color":V,"shape.border2.gradient":!1,"shape.border2.gradient.color":d,"shape.border2.dash.pattern":d,"shape.border2.dash.offset":0,label:d,"label.font":I,"label.color":M,"label.background":d,"label.position":31,"label.offset.x":0,"label.offset.y":2,"label.rotation":d,"label.max":d,"label.scale":{x:1,y:1},"label.alpha":1,"label.align":"center","label.padding":0,"label.corner.radius":0,note:d,"note.expanded":!0,"note.font":I,"note.color":M,"note.background":T,"note.position":8,"note.offset.x":-3,"note.offset.y":3,"note.max":d,"note.toggleable":!0,"note.border.width":1,"note.border.color":d,"note.scale":{x:1,y:1},"note.alpha":1,"note.align":"center"},!0),Fa(Mc.prototype,"indexAdjustable"),G(Mc,{_indexAdjustable:!0,prepareRemove:function(a){a._attaches&&Da(a._attaches).forEach(function(a){a.host=c}),a._host&&(a.host=c)},onAdd:function(a){this.adjustIndex(a)},onDataPropertyChange:function(a){Yd[a.property]&&this.adjustIndex(a.data)},adjustIndex:function(a){this.indexAdjustable&&this.sendToTop(a)},sendToTop:function(a){var b=this;if(b.contains(a)&&fe(a)){var c=b._datas;if(a!==c[b.length-1]){var d=c.indexOf(a);c.splice(d,1),c.push(a),b.emit("indexChange",{data:a,oldIndex:d,newIndex:b.length-1})}a._attaches&&a._attaches.forEach(function(c){c.isDescendantOf(a)||a.isDescendantOf(c)||fe(a)&&c.isLoopedHostOn(a)||b.sendToTop(c)}),a.ISubGraph||fe(a)&&a.children.forEach(function(a){b.sendToTop(a)})}},sendToBottom:function(a,b){var c=this;if(a!==b&&c.contains(a)&&fe(a)&&(!b||c.contains(b))){var d=c._datas,e=Ta(d,a),f=b?d.indexOf(b):0;if(d.splice(f,0,a),e!==f){c.emit("indexChange",{data:a,oldIndex:e,newIndex:f});var g=a._parent;g&&!g.ISubGraph&&c.sendToBottom(a._parent,a)}}}});var Yd={sourceAgent:!0,targetAgent:!0,expanded:!0,parent:!0,host:!0},Zd={points:!0,anchor:!0},vc={translateX:!0,translateY:!0,zoom:!0,scrollBarMode:!0};ba("node_icon",{width:16,height:16,comps:[{type:"rect",rect:[2,2,12,10],gradient:ja,gradientColor:Z,background:Y},{type:"border",rect:[2,2,12,10],borderWidth:1,borderColor:Y},{type:"rect",rect:[6,12,4,2],background:Y},{type:"rect",rect:[4,14,8,1],background:Y}]}),ba("node_image",{width:30,height:30,comps:[{type:"rect",rect:[4,5,22,16],gradient:ja,gradientColor:Z,background:Y},{type:"rect",rect:[2,3,26,20],borderWidth:1,borderColor:Y},{type:"rect",rect:[11,23,8,4],background:Y},{type:"rect",rect:[6,27,18,2],background:Y}]}),ba("subGraph_icon",{width:16,height:16,comps:[{type:"shape",points:[2.2,14.6,.2,11.9,.8,8.8,1.8,5.9,5.6,7.4,3.8,1.6,10.3,3,14.5,4.2,12.2,7.5,18.9,7.2,14.5,14.5],segments:[1,3,3,3,3,3],gradient:ja,gradientColor:Z,background:Y}]}),ba("subGraph_image",{width:72,height:45,comps:[{type:"shape",points:[9,42,.3,38.4,2.4,28.8,5.7,21.6,11.7,22.5,11.7,15.9,16.8,13.8,21.6,12,24.3,15.9,27.9,3,42.3,2.1,59.4,4.5,57.3,18.3,67.5,18.9,69.6,27.3,69.9,38.4,64.2,41.4],segments:[1,3,3,3,3,3,3,3,3],gradient:ja,gradientColor:Z,background:Y}]}),ba("shape_icon",{width:16,height:16,comps:[{type:"shape",points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],background:Y}]});var $d=function(a,b,c,d){var e=1-a;return e*e*b+2*a*e*c+a*a*d},_d=function(a,b,c,d,e){var f=a*a,g=1-a,h=g*g;return g*h*b+3*h*a*c+3*g*f*d+a*f*e},ae=function(a){var b=k(a.x*a.x+a.y*a.y);b&&(a.x/=b,a.y/=b)},be=function(a,b,c,d){if(b&&b.length){c=c||20;for(var e,f,g,h,i,j,k,l,g,m=[],n=0,o=0,p=b.length;p>o;o++)if(h=b[o],1===h)m.push(e=[]),e.push(a[n++]);else if(2===h)e.push(a[n++]);else if(3===h)for(i=e[e.length-1],j=a[n++],k=a[n++],f=1;c>=f;f++)g=f/c,e.push({x:$d(g,i.x,j.x,k.x),y:$d(g,i.y,j.y,k.y)});else if(4===h)for(i=e[e.length-1],j=a[n++],k=a[n++],l=a[n++],f=1;c>=f;f++)g=f/c,e.push({x:_d(g,i.x,j.x,k.x,l.x),y:_d(g,i.y,j.y,k.y,l.y)});else 5===h&&e.push(e[0]);return d&&5!==h&&e&&e.length&&e.push(e[0]),m}return d&&a.length&&(a=Da(a),a.push(a[0])),[a]},Ya=function(a,b,c,d){for(var e,f,g=be(a,b,c,d),h=[],i=0,j=0;j<g.length;j++){for(var a=g[j],k=0;k<a.length;k++){e=a[k],f&&(i+=$a(f,e));var l,m=a[k+1];l=m?{x:m.x-e.x,y:m.y-e.y}:f?{x:e.x-f.x,y:e.y-f.y}:{x:1,y:0},ae(l),h.push({point:e,length:i,tangent:l}),f=e}f=null}return h.sumLength=i,h},Xa=function(a,b){for(var c,d=0,e=a.length,f=0,g=e-1;g>=f;)if(d=i(f+(g-f)/2),c=a[d].length-b,0>c)f=d+1;else{if(!(c>0)){g=d;break}g=d-1}d=g;var h=a[d],j=h.point;if(d===e-1||h.length===b);else{var k=a[d+1].point,l={x:k.x-j.x,y:k.y-j.y};ae(l),b-=h.length,l.x*=b,l.y*=b,l.x+=j.x,l.y+=j.y,j=l}return{point:j,tangent:h.tangent}},Wa=function(a,b,c){b=b||100;var d=[];a.length&&c&&a.push(a[0]);for(var e=0;b>=e;e++)d.push(de(a,e/b));return d},ce=function(a,b,c,d,e){var f=e*e,g=f*e,h=.5*(c-a),i=.5*(d-b);return(2*(b-c)+h+i)*g+(-3*(b-c)-2*h-i)*f+h*e+b},de=function(a,b){var c,d,e,f,g,h=a.length-1,j=h*b,k=i(j);return a[0].x===a[h].x&&a[0].y===a[h].y?(0>b&&(k=i(j=h*(1+b))),d=a[(k-1+h)%h],e=a[k%h],f=a[(k+1)%h],g=a[(k+2)%h],c=j-k,{x:ce(d.x,e.x,f.x,g.x,c),y:ce(d.y,e.y,f.y,g.y,c)}):0>b?(d=a[0],e=a[0],f=a[1],g=a[1],c=-j,{x:a[0].x-(ce(d.x,e.x,f.x,g.x,c)-a[0].x),y:a[0].y-(ce(d.y,e.y,f.y,g.y,c)-a[0].y)}):b>1?(d=a[h],e=a[h],f=a[h-1],g=a[h-1],c=j-h,{x:a[h].x-(ce(d.x,e.x,f.x,g.x,c)-a[h].x),y:a[h].y-(ce(d.y,e.y,f.y,g.y,c)-a[h].y)}):(d=a[k?k-1:0],e=a[k],f=a[k+1>h?h:k+1],g=a[k+2>h?h:k+2],c=j-k,{x:ce(d.x,e.x,f.x,g.x,c),y:ce(d.y,e.y,f.y,g.y,c)})},ee=function(a){if(!a)return c;var b=a._parent;return b?b.ISubGraph?b:ee(b):c},fe=function(a){return a instanceof me},ge=function(a,b,c){if(0!==b||0!==c){var d,e,f,g=[];a.forEach(function(a){if(fe(a)){var b=!0;if(f)for(d=0;d<f.length;d++)e=f[d],e.isHostOn(a)?(f.splice(d,1),d--,Ta(g,e)):b&&(a.isHostOn(e)||a.isLoopedHostOn(e))&&(b=!1);b&&(g.push(a),(a._host||a._attaches)&&(f||(f=[]),f.push(a)))}}),g.forEach(function(a){a.translate(b,c)})}},he=function(a,b,c){var d=a._position,e=a._scale,f=new Ca(-a.rotation).tf(b-d.x,c-d.y);return f.x/=e.x,f.y/=e.y,f},ie=function(a,b,c){var d=a._scale;b*=d.x,c*=d.y;var e=a._position,f=new Ca(a.rotation).tf(b,c);return f.x+=e.x,f.y+=e.y,f},je=function(a){var b=a._position,c=a._anchor,d=a.width,e=a.height,f=new Ca(a._rotation),g=a._scale,h=g.x,i=g.y,j={x:-d*c.x,y:-e*c.y,width:d,height:e};j.x*=h,j.width*=h,j.y*=i,j.height*=i;var k=[f.tf(j.x,j.y),f.tf(j.x+j.width,j.y),f.tf(j.x+j.width,j.y+j.height),f.tf(j.x,j.y+j.height)];return k.forEach(function(a){a.x+=b.x,a.y+=b.y}),k},ke=function(a,b){if(b){var c=b.rect,d=b.color,e=b.rotation,f=b.labelWidth,g=b.background,h=b.padding,i=b.alpha,j=b.scale;if(1!==i){var k=a.globalAlpha;a.globalAlpha*=i}if(e||j){a.save();var l=c.x+c.width/2,m=c.y+c.height/2;Ub(a,l,m),e&&Vb(a,e),j&&a.scale(j.x,j.y),Ub(a,-l,-m)}if(g&&(a.beginPath(),tb(a,c.x-h,c.y-h,c.width+2*h,c.height+2*h,b.cornerRadius),a.fillStyle=g,a.fill()),f){var n=c.width,o=a.createLinearGradient(c.x,c.y,c.x+n,c.y);o.addColorStop(0,d),o.addColorStop(.9,d),o.addColorStop(1,S),d=o,c.width=f}xb(a,b.ss,c,b.font,d,b.align),f&&(c.width=n),(e||j)&&a.restore(),1!==i&&(a.globalAlpha=k)}},le=function(a,b){if(b){var c=b.rect,d=c.x,e=c.y,f=c.width,g=c.height,h=b.background,i=b.borderWidth,j=b.borderColor,k=b.labelWidth,l=b.alpha,n=b.scale;if(1!==l){var o=a.globalAlpha;a.globalAlpha*=l}if(n){a.save();var p=c.x+c.width/2,t=c.y+c.height/2;Ub(a,p,t),a.scale(n.x,n.y),Ub(a,-p,-t)}if(b.expanded){var u=m(8,f/4),v=e+g-8;if(a.fillStyle=h,a.beginPath(),a.moveTo(d,e),a.lineTo(d,v),a.lineTo(d+f/2,v),a.lineTo(d+f/2,e+g),a.lineTo(d+f/2+u,v),a.lineTo(d+f,v),a.lineTo(d+f,e),a.closePath(),a.fill(),i&&(a.lineWidth=i,a.lineJoin="round",a.lineCap="round",a.strokeStyle=j?j:kb(h),a.beginPath(),a.moveTo(d+f,e),a.lineTo(d+f,v),a.lineTo(d+f/2+u,v),a.lineTo(d+f/2,e+g),a.stroke(),a.strokeStyle=j?j:jb(h),a.beginPath(),a.moveTo(d+f,e),a.lineTo(d,e),a.lineTo(d,v),a.lineTo(d+f/2,v),a.lineTo(d+f/2,e+g),a.stroke()),c.height-=8,h=b.color,k){var w=f,x=a.createLinearGradient(d,e,d+w,e);x.addColorStop(0,h),x.addColorStop(.9,h),x.addColorStop(1,S),h=x,c.width=k}xb(a,b.ss,c,b.font,h,b.align),k&&(c.width=w),c.height+=8}else{var y=f/2;i&&(a.lineWidth=i,a.lineJoin="round",a.lineCap="round",a.strokeStyle=j?j:kb(h),a.beginPath(),a.arc(d+y,e+y,y,s,1.6*q,!0),a.moveTo(d+y,e+g),a.lineTo(d+f-y/5,e+y),a.stroke(),a.strokeStyle=j?j:jb(h),a.beginPath(),a.arc(d+y,e+y,y,1.6*q,s,!0),a.moveTo(d+y,e+g),a.lineTo(d+y/5,e+y),a.stroke()),a.fillStyle=h,a.beginPath(),a.arc(d+y,e+y,y,0,r,!0),a.moveTo(d+y,e+g),a.lineTo(d+f-y/5,e+y),a.lineTo(d+y/5,e+y),a.closePath(),a.fill(),a.fillStyle=b.color,a.beginPath(),a.arc(d+y,e+y,y/3,0,r,!0),a.fill()}n&&a.restore(),1!==l&&(a.globalAlpha=o)}},me=_("qc.widget.graph.Node",Lc,function Ne(a){Ne["super"].constructor.call(this,a)},{_icon:"node_icon",_image:"node_image",_rotation:0,_position:{x:0,y:0},_anchor:{x:.5,y:.5},_scale:{x:1,y:1},setPosition:function(a,b){var c=this;if(!c._updatingPosition){c._updatingPosition=!0;var d;if(d=2===arguments.length?{x:a,y:b}:a,d.x!==c._position.x||d.y!==c._position.y){var e=c._position;c._position=d,c.epc("position",e,d)}delete c._updatingPosition}},_addAttach:function(a){var b=this;b._attaches||(b._attaches=[]),b._attaches.push(a),b.epc("attaches",c,a)},_removeAttach:function(a){var b=this;Ta(b._attaches,a),0===b._attaches.length&&delete b._attaches,b.epc("attaches",a,c)},setAnchor:function(a,b){var c,d=this;if(c=2===arguments.length?{x:a,y:b}:a,c.x!==d._anchor.x||c.y!==d._anchor.y){var e=d._anchor;d._anchor=c,d.epc("anchor",e,c)}},setScale:function(a,b){var c,d=this;if(c=2===arguments.length?{x:a,y:b}:a,c.x!==d._scale.x||c.y!==d._scale.y){var e=d._scale;d._scale=c,d.epc("scale",e,c)}},translate:function(a,b){var c=this._position;this.setPosition(c.x+a,c.y+b)},setSize:function(a,b){var c=this;2===arguments.length?(c.width=a,c.height=b):(c.width=a.width,c.height=a.height)},onPropertyChange:function(a){var b=this;me["super"].onPropertyChange.call(b,a),b._attaches&&b._attaches.forEach(function(b){b.handleHostPropertyChange(a)})},handleHostPropertyChange:function(a){w.deserializing||"position"===a.property&&this.translate(a.newValue.x-a.oldValue.x,a.newValue.y-a.oldValue.y)},isHostOn:function(a){var b=this;if(b._host&&a&&a._attaches)for(var c={},d=b._host;d&&d!==b&&!c[d.uuid];){if(d===a)return!0;c[d.uuid]=d,d=d._host}return!1},isLoopedHostOn:function(a){return this.isHostOn(a)&&a.isHostOn(this)}},c,{uiClass:{get:function(){return pe}},attaches:{get:function(){return this._attaches}},host:{get:function(){return this._host},set:function(a){var b=this;if(b!==a&&b._host!==a){var c=b._host;c&&c._removeAttach(b),b._host=a,b._host&&b._host._addAttach(b),b.epc("host",c,a)}}},image:{get:function(){return this._image},set:function(a){var b=this,c=b._image,d=b.width,e=b.height;b._image=a,b.epc("image",c,a),b.epc("width",d,b.width),b.epc("height",e,b.height)}},position:{get:function(){return this._position},set:function(a){this.setPosition(a.x,a.y)}},x:{get:function(){return this.position.x},set:function(a){this.setPosition(a,this.y)}},y:{get:function(){return this.position.y},set:function(a){this.setPosition(this.x,a)}},anchor:{get:function(){return this._anchor},set:function(a){this.setAnchor(a.x,a.y)}},scale:{get:function(){return this._scale},set:function(a){this.setScale(a.x,a.y)}},rotation:{get:function(){return this._rotation},set:function(a){var b=this;if(!b._updatingRotation){b._updatingRotation=!0;var c=b._rotation;b._rotation=a,b.epc("rotation",c,a),delete b._updatingRotation}}},width:{get:function(){var a=this;if(a._width>=0)return a._width;var b=ca(a._image);return b?Zb(b,a):20},set:function(a){var b=this,c=b._width;b._width=a,b.epc("width",c,a)}},height:{get:function(){var a=this;if(a._height>=0)return a._height;var b=ca(a._image);return b?$b(b,a):20},set:function(a){var b=this,c=b._height;b._height=a,b.epc("height",c,a)}},size:{get:function(){return{width:this.width,height:this.height}},set:function(a){this.width=a.width,this.height=a.height}},rect:{get:function(){var a=this,b=a._position,c=a._anchor,d=a.width,e=a.height,f={x:-d*c.x,y:-e*c.y,width:d,height:e},g=a._scale,h=g.x,i=g.y;1!==h&&(f.x*=h,f.width*=h),1!==i&&(f.y*=i,f.height*=i),_a(f);var j=a._rotation;if(j){var k=new Ca(j);f=bb([k.tf(f.x,f.y),k.tf(f.x+f.width,f.y),k.tf(f.x+f.width,f.y+f.height),k.tf(f.x,f.y+f.height)])}return f.x+=b.x,f.y+=b.y,f},set:function(a){this.setSize(a.width,a.height),this.setPosition(a.x+a.width*this.anchor.x,a.y+a.height*this.anchor.y)}},serializableProperties:{get:function(){var a=me.getSuperProperty(this,"serializableProperties");return G(a,{image:!0,host:!0,rotation:!0,position:!0,anchor:!0,width:!0,height:!0}),a}}}),ne=(_("qc.widget.graph.SubGraph",me,function Oe(a){Oe["super"].constructor.call(this,a)},{ISubGraph:!0,_image:"subGraph_image",_icon:"subGraph_icon"}),_("qc.widget.graph.Shape",me,function Pe(a){Pe["super"].constructor.call(this,a),this._points=[]},{_icon:"shape_icon",_closePath:!1,setPosition:function(a,b){var c,d=this;if(!d._updatingShapePosition){if(d._updatingShapePosition=!0,!d._updatingShape&&!w.deserializing){c=2===arguments.length?{x:a,y:b}:a;var e=c.x-d._position.x,f=c.y-d._position.y;if(0===e&&0===f)return void delete d._updatingShapePosition;d._updatingShape=!0;var g=[];d._points.forEach(function(a){g.push({x:a.x+e,y:a.y+f})}),d.points=g,delete d._updatingShape}ne["super"].setPosition.apply(d,arguments),delete d._updatingShapePosition}},onPropertyChange:function(a){ne["super"].onPropertyChange.call(this,a),Zd[a.property]&&this.emitShapeChange()},emitShapeChange:function(){var a=this;if(!a._updatingShape&&!w.deserializing){var b=bb(a._points);b&&(a._updatingShape=!0,a.rect=b,delete a._updatingShape)}a.epc("shape",!1,!0)}},{properties:["points","segments","closePath"]},{uiClass:{get:function(){return qe}},width:{get:function(){return ne.getSuperProperty(this,"width")},set:function(a){var b=this;if(.01>a&&(a=.01),!b._updatingShape&&!w.deserializing&&b.width){b._updatingShape=!0;var c=b._position.x,d=a/b.width,e=[];b._points.forEach(function(a){e.push({x:(a.x-c)*d+c,y:a.y})}),b.points=e,delete b._updatingShape}ne.setSuperProperty(this,"width",a)}},height:{get:function(){return ne.getSuperProperty(this,"height")},set:function(a){var b=this;if(.01>a&&(a=.01),!b._updatingShape&&!w.deserializing&&b.height){b._updatingShape=!0;var c=b._position.y,d=a/b.height,e=[];b._points.forEach(function(a){e.push({x:a.x,y:(a.y-c)*d+c})}),b.points=e,delete b._updatingShape}ne.setSuperProperty(this,"height",a)}},serializableProperties:{get:function(){var a=ne.getSuperProperty(this,"serializableProperties");return G(a,{points:!0,segments:!0,closePath:!0}),a}}}));_("qc.widget.graph.Serializer",b,function(a){this._dataModel=a,this._game=a.game},{serialize:function(a){return JSON.stringify(this.toJSON(),function(a,b){return Ma(b)?jc(b):b},a==c?2:a)},toJSON:function(){var a=this,b=a._dataModel,c=a.json={v:w.version,d:[],a:{}},d=b.serializableAttrs;for(var e in d){var f=b.a(e);a.serializeValue(e,f,c.a)}return Ab(c.a)&&delete c.a,b.roots.forEach(a.serializeData,this),c},isSerializable:function(){return!0},serializeData:function(a){var b=this;if(b.isSerializable(a)){var c,d,e,f=a["class"],g=b._game?new f(b._game):new f,h={c:a.className,i:a.uuid,p:{},s:{},a:{}};b.json.d.push(h),c=a.serializableProperties;for(d in c)e=a[d],e!==g[d]&&b.serializeValue(d,e,h.p);c=a.serializableStyles;for(d in c)e=a.s(d),e!==g.s(d)&&b.serializeValue(d,e,h.s);c=a.serializableAttrs;for(d in c)e=a.a(d),e!==g.a(d)&&b.serializeValue(d,e,h.a);Ab(h.p)&&delete h.p,Ab(h.s)&&delete h.s,Ab(h.a)&&delete h.a}a.children.forEach(b.serializeData,b)},deserialize:function(a,b){w.deserializing=!0;var c=this;a=c.json=Na(a)?JSON.parse(a.replace(/\n/g,"")):a,c.uuidMap={};for(var d=c._dataModel,e=[],f=[],g=0,h=a.d.length;h>g;g++){var i=a.d[g],j=w.Class[i.c],k=c._game?new j(c._game):new j;c.uuidMap[i.i]=k,e.push(k),f.push(i)}for(g=0;h>g;g++)c.deserializeData(e[g],f[g]);e.forEach(function(a){b&&!a.parent&&(a.parent=b),d.add(a)});for(var l in a.a)d.a(l,c.deserializeValue(a.a[l]));return w.deserializing=!1,e},deserializeData:function(a,b){for(name in b.s)a.s(name,this.deserializeValue(b.s[name]));for(name in b.a)a.a(name,this.deserializeValue(b.a[name]));for(name in b.p)a[name]=this.deserializeValue(b.p[name])},serializeValue:function(a,b,c){b instanceof Lc&&(b={__uuid:b.uuid}),c[a]=b},deserializeValue:function(a){return Pa(a)&&a.__uuid!=c?this.uuidMap[a.__uuid]:a}});var oe=_(c,b,function(a,b){var c=this;c.gv=a,c.data=b,c.rects=[],c.s=function(a){return b.getStyle(a)}},{selectWidthVisible:!0,getRotation:function(a){return a==c?0:a},invalidate:function(){this._bounds=c},prepare:function(){},getPosition:function(a,b,c,d){if(this.positionRect){var e=Jc(a,this.positionRect,d);return e.x+=b,e.y+=c,e}return oa},addRect:function(a,b){a&&this.rects.push(hb(a,b))},draw:function(a){var b=this,c=b.s,d=c("body.alpha"),e=this.shadowed;if(e){var f=a.shadowOffsetX,g=a.shadowOffsetY,h=a.shadowBlur,i=a.shadowColor;a.shadowOffsetX=c("shadow.offset.x"),a.shadowOffsetY=c("shadow.offset.y"),a.shadowBlur=c("shadow.blur"),a.shadowColor=c("shadow.color")}if(1!==d){var j=a.globalAlpha;a.globalAlpha*=d}b.drawBody(a),1!==d&&(a.globalAlpha=j),ke(a,b.labelInfo),le(a,b.noteInfo),e&&(a.shadowOffsetX=f,a.shadowOffsetY=g,a.shadowBlur=h,a.shadowColor=i)},drawBody:function(){},updateLabel:function(a,b){var d=this,e=d.data,f=d.gv,g=d.s,h=f[b](e);if(h!=c){var i=g(a+".scale"),j=g(a+".max"),k=g(a+".position"),l=d[a+"Info"]={label:h,color:f[b+"Color"](e),font:g(a+".font"),alpha:g(a+".alpha"),rotation:d.getRotation(g(a+".rotation"),!1,k),background:f[b+"Background"](e),cornerRadius:g(a+".corner.radius")},m=ib(l,h);j>0&&j<m.width&&(l.labelWidth=m.width,m.width=j),Ma(i)&&(i={x:i,y:i}),i&&1===i.x&&1===i.y&&(i=c),l.scale=i,i&&(m.width*=i.x,m.height*=i.y);var o=d.getPosition(k,g(a+".offset.x"),g(a+".offset.y"),m,g(a+".position.fixed"));m.x=o.x-m.width/2,m.y=o.y-m.height/2,_a(m);var p=l.rect=m,q=l.padding=g(a+".padding");if(q&&(p=Da(m),i?Za(p,q*n(i.x),q*n(i.y)):Za(p,q)),d.addRect(p,l.rotation),i){var r=0===i.x?0:m.width/n(i.x),s=0===i.y?0:m.height/n(i.y);l.rect={x:o.x-r/2,y:o.y-s/2,width:r,height:s}}}},updateNote:function(a,b){var d=this,e=d.gv,f=d.data,g=d.s,h=e[b](f);if(h!=c){var i,k,l=g(a+".scale"),m=d[a+"Info"]={note:h,expanded:g(a+".expanded"),font:g(a+".font"),color:e[b+"Color"](f),alpha:g(a+".alpha"),borderWidth:g(a+".border.width"),borderColor:g(a+".border.color"),background:e[b+"Background"](f)},n=d.getPosition(g(a+".position"),g(a+".offset.x"),g(a+".offset.y")),o=n.x,p=n.y;Ma(l)&&(l={x:l,y:l}),l&&1===l.x&&1===l.y&&(l=c),m.scale=l;var q=l?l.x:1,r=l?l.y:1;if(m.expanded){var s=g(a+".max"),t=ib(m,h);t.width+=6,t.height+=2,s>0&&s<t.width&&(m.labelWidth=t.width,t.width=s),i=t.width,k=t.height+8,m.hitRect={x:o-i*q/2,y:p-k*r,width:i*q,height:k*r*t.height/k}}else i=12,k=18,m.hitRect={x:o-i*q/2,y:p-k*r,width:i*q,height:k*r};m.rect={x:o-i/2,y:p-k*r/2-k/2,width:i,height:k};var u=j(m.borderWidth/2);d.addRect({x:o-i*q/2-u*q,y:p-k*r-u*r,width:i*q+2*u*q,height:k*r+2*u*r})}}},c,{bounds:{get:function(){var a=this,b=a.s;if(!a._bounds){var d=a.rects;a.positionRect=a.labelInfo=a.noteInfo=c,d.length=0,a.prepare(),a.updateLabel("label","getLabel"),a.updateNote("note","getNote");var e;if(d.forEach(function(a){e=cb(e,a)}),e&&a.shadowed){var f=Da(e);f.x+=b("shadow.offset.x"),f.y+=b("shadow.offset.y"),Za(f,b("shadow.blur")),e=cb(e,f)}a._bounds=e,d.length=0}return a._bounds}},shadowed:{get:function(){return this.gv.isSelected(this.data)&&"shadow"===this.s("select.type")}},selectWidth:{get:function(){var a=this.gv.isSelected(this.data);return a&&!this.shadowed&&this.selectWidthVisible?this.s("select.width"):0}}}),pe=_(c,oe,function(a,b){pe["super"].constructor.call(this,a,b)},{addExtraRect:function(a,b){var c=this,d=c.s,e=a.rect;(a.borderColor=c.gv.getBorderColor(c.data))&&(a.borderType=d("border.type"),a.borderWidth=d("border.width"),a.borderPadding=d("border.padding"),b=l(b,a.borderPadding+a.borderWidth/2)),(a.selectWidth=c.selectWidth)&&(a.selectType=d("select.type"),a.selectColor=d("select.color"),a.selectPadding=d("select.padding"),b=l(b,a.selectPadding+a.selectWidth/2)),b>0&&(e=Da(e),Za(e,b)),c.addRect(e)},drawExtra:function(a,b){var c,d=this,e=b.rect;b.borderWidth&&(c=b.borderPadding,a.strokeStyle=b.borderColor,a.lineWidth=b.borderWidth,nb(a,b.borderType,{x:e.x-c,y:e.y-c,width:e.width+2*c,height:e.height+2*c},d.s("shape.info"),d.data,d.gv),a.stroke()),b.selectWidth&&(c=b.selectPadding,a.strokeStyle=b.selectColor,a.lineWidth=b.selectWidth,nb(a,b.selectType,{x:e.x-c,y:e.y-c,width:e.width+2*c,height:e.height+2*c},d.s("shape.info"),d.data,d.gv),a.stroke())},prepare:function(){var a=this,b=a.data,c=a.s("shape"),d=a.nodeInfo={shape:c,rect:b.rect};a.positionRect=d.rect,a.addExtraRect(d,c?l(a.s("shape.border.width"),a.s("shape.border2.width"))/2:0)},drawBody:function(a){var b=this,c=b.gv,d=b.s,e=b.data,f=b.nodeInfo,g=f.shape,h=e._position,i=e._rotation,j=e._anchor,k=e.width,l=e.height,m=e._scale,n=m.x,o=m.y,p={x:-k*j.x,y:-l*j.y,width:k,height:l};if(k&&l){var q=c.getBodyColor(e);if(g){1!==n&&(p.x*=n,p.width*=n),1!==o&&(p.y*=o,p.height*=o),_a(p),p.x+=h.x,p.y+=h.y,i&&(a.save(),Ub(a,h.x,h.y),Vb(a,i),Ub(a,-h.x,-h.y));var r=q||d("shape.background"),s=ca(d("shape.repeat.image"),q),t=a.lineJoin,u=a.lineCap;a.lineJoin=d("shape.join"),a.lineCap=d("shape.cap"),s?pb(a,s):r&&ob(a,r,d("shape.gradient"),d("shape.gradient.color"),p),nb(a,g,p,d("shape.info"),e,c),(s||r)&&a.fill();var v=d("shape.border.width");if(v){var w=d("shape.border.color"),x=d("shape.border.dash.pattern");Sb(a,x,d("shape.border.dash.offset")),a.lineWidth=v,a.strokeStyle=w,a.stroke(),d("shape.border.gradient")&&vb(a,w,d("shape.border.gradient.color"),v),Tb(a,x)}if(v=d("shape.border2.width")){var w=d("shape.border2.color"),x=d("shape.border2.dash.pattern");Sb(a,x,d("shape.border2.dash.offset")),a.lineWidth=v,a.strokeStyle=w,a.stroke(),d("shape.border2.gradient")&&vb(a,w,d("shape.border2.gradient.color"),v),Tb(a,x)}if("rect"===g){var y=d("shape.info");y&&ub(a,r,y.depth,p)}a.lineJoin=t,a.lineCap=u,i&&a.restore()}else{p.x+=h.x,p.y+=h.y;var z=i||1!==n||1!==o;z&&(a.save(),Ub(a,h.x,h.y),Vb(a,i),a.scale(n,o),Ub(a,-h.x,-h.y)),da(a,e.image,d("image.stretch"),p.x,p.y,p.width,p.height,e,c,q),z&&a.restore()}}b.drawExtra(a,f)}}),qe=_(c,pe,function(a,b){qe["super"].constructor.call(this,a,b)},{prepare:function(){var a=this,b=a.data,c=b.rect,d=a.gv.getBorderColor(b),e=d?a.s("border.width"):0,f=l(a.s("shape.border.width"),a.s("shape.border2.width"))/2;a.positionRect=c,f+=e+a.selectWidth,f&&(c=Da(c),Za(c,f)),a.addRect(c);var g=b._position,h=b._points,i=b._scale;if(1===i.x&&1===i.y)a.drawPoints=h;else{var j=a.drawPoints=[];h.forEach(function(a){j.push({x:(a.x-g.x)*i.x+g.x,y:(a.y-g.y)*i.y+g.y})})}},drawBody:function(a){var b=this,c=b.gv,d=b.s,e=b.data,f=e._position,g=e._rotation;g&&(a.save(),Ub(a,f.x,f.y),Vb(a,g),Ub(a,-f.x,-f.y));var h=c.getBodyColor(e),i=h||d("shape.background"),j=ca(d("shape.repeat.image"),h),k=a.lineJoin,m=a.lineCap;a.lineJoin=d("shape.join"),a.lineCap=d("shape.cap"),j?pb(a,j):i&&ob(a,i,d("shape.gradient"),d("shape.gradient.color"),b.positionRect),wb(a,b.drawPoints,e._segments,e._closePath),(j||i)&&a.fill();var n=b.selectWidth,o=c.getBorderColor(e),p=o?d("border.width"):0,q=d("shape.border.width"),r=d("shape.border2.width"),s=l(q,r);if(n&&(a.strokeStyle=d("select.color"),a.lineWidth=s+2*(p+n),a.stroke()),p&&(a.strokeStyle=o,a.lineWidth=s+2*p,a.stroke()),q){var o=d("shape.border.color"),t=d("shape.border.dash.pattern");Sb(a,t,d("shape.border.dash.offset")),a.lineWidth=q,a.strokeStyle=o,a.stroke(),d("shape.border.gradient")&&vb(a,o,d("shape.border.gradient.color"),q),Tb(a,t)}if(r){var o=d("shape.border2.color"),t=d("shape.border2.dash.pattern");Sb(a,t,d("shape.border2.dash.offset")),a.lineWidth=r,a.strokeStyle=o,a.stroke(),d("shape.border2.gradient")&&vb(a,o,d("shape.border2.gradient.color"),r),Tb(a,t)}a.lineJoin=k,a.lineCap=m,g&&a.restore()}}),re=_("qc.widget.graph.GraphView",b,function(a){var b=this;b._dirtyMap={},b._dirtyRects=[],b._uiMap={},b._visibleMap={},b._interactionState={},b.initView(!0,!0),b.dataModel=a?a:new Mc,b.scrollBarMode="auto",b.editable=!1},{_currentSubGraph:c,_pannable:!0,_rectSelectable:!0,_rectSelectBorderColor:"#2C3E50",_rectSelectBackground:"rgba(0,0,0,0.35)",upSubGraph:function(){this.currentSubGraph=ee(this._currentSubGraph)},getDataUIBounds:function(a){var b=this.getDataUI(a);return b?b.bounds:c},toCanvas:function(a){this.validateImpl();var b=this,c=b.contentRect,d=qa(),e=b._zoom,f=c.x*e,g=c.y*e,h=c.width*e,i=c.height*e;ra(d,h,i,1);var j=Rb(d);return a&&qb(j,0,0,h,i,a),Ub(j,-f,-g),j.scale(e,e),b.draw(j),j.restore(),d},toDataURL:function(a,b){return this.toCanvas(a).toDataURL(b||"image/png",1)},createDataUI:function(a){var b=a.uiClass;return b?new b(this,a):c},getDataUI:function(a){var b=this,c=b._uiMap[a.uuid];return c===d&&(c=b.createDataUI(a),b._uiMap[a.uuid]=c),c},invalidateAll:function(a){var b=this;a?(b._uiMap={},b._visibleMap={},b._dirtyMap={},b._dirtyRects.length=0,b.redraw()):b.dataModel.forEach(function(a){b.invalidateData(a)})},invalidateSelection:function(){var a=this;a.selectionModel.forEach(function(b){a.invalidateData(b)})},invalidateData:function(a){var b=this;b._dirtyMap[a.uuid]=a,b.iv()},isVisible:function(a){var b=this;return ee(a)!==b._currentSubGraph?!1:a.s("visible")?b._visibleFunc?b._visibleFunc(a):!0:!1},makeVisible:function(a){var b=this,c=b.getDataUI(a);if(c){var d=ee(a);d!==b._currentSubGraph&&(b.currentSubGraph=d),b._makeVisibleData=a,b.iv()}},adjustTranslateX:function(a){return h(a)},adjustTranslateY:function(a){return h(a)},handleScroll:function(a,b){K(a);var c=this.lp(a);b>0?this.scrollZoomIn(c):0>b&&this.scrollZoomOut(c)},handlePinch:function(a,b,c){c>b?this.pinchZoomIn(a):this.pinchZoomOut(a)},handleKeyDown:function(a){var b=this;Fb(a)?b.selectAll():Gb(a)&&b.handleDelete&&b.handleDelete(a)},moveSelection:function(a,b){ge(Va(this.selectionModel.selection,this.isMovable,this),a,b)},isMovable:function(a){return fe(a)?this._movableFunc?this._movableFunc(a):!0:!1},onPropertyChange:function(a){var b=this,c=a.property;b.redraw(),"currentSubGraph"===c&&(b.setZoom(1),b.setTranslate(0,0)),vc[c]&&b.showScrollBar()},handleIndexChange:function(a){this.invalidateData(a.data)},handleDataPropertyChange:function(a){this.invalidateData(a.data)},handleDataModelChange:function(a){var b=this,d=a.kind,e=a.data;if(b._invalidateContentRect=1,"add"===d)b.invalidateData(e);else if("remove"===d){var f=e.uuid,g=b._uiMap[f];if(g){if(b._visibleMap[f]){var h=g.bounds;h&&b.redraw(h)}delete b._uiMap[f],delete b._dirtyMap[f],delete b._visibleMap[f]}e===b._currentSubGraph&&(b.currentSubGraph=c)}else"clear"===d&&(b.invalidateAll(!0),b.currentSubGraph=c)},handleSelectionChange:function(a){var b=this,c=b.selectionModel,d=b.dataModel;if(a.datas.forEach(function(a){b.invalidateData(a)}),1===c.length&&("set"===a.kind||"append"===a.kind)){var e=c.lastData;if(b.autoMakeVisible&&b.makeVisible(e),b.isVisible(e)){for(var f=e;f._parent&&b.isVisible(f._parent);)f=f._parent;f&&f!==e&&d.adjustIndex(f),d.adjustIndex(e)}}},getInteractionState:function(){return this._interactionState},onBackgroundClick:function(){},onBackgroundDoubleClick:function(){},onDataClick:function(){},onDataDoubleClick:function(){}},{properties:["layers","visibleFunc","movableFunc","autoMakeVisible","currentSubGraph","pannable","rectSelectable","rectSelectBorderColor","rectSelectBackground"],view:!0,scrollBar:!0,emitter:!0,toolTip:!0,painter:!0,sm:!0,bnb:!0},{canvas:{get:function(){return this._canvas}},contentRect:{get:function(){var a=this,b=a._contentRect;return b||(a.forEach(function(c){a.isVisible(c)&&(b=cb(b,a.getDataUIBounds(c)))}),a._contentRect=b?b:oa),a._contentRect}},zoom:{get:function(){return this._zoom},set:function(a){this.setZoom(a)}},dataModel:{get:function(){return this._dataModel},set:function(a){var b=this,c=b._dataModel,d=b._selectionModel;c!==a&&(c&&(c.off("dataModelChange",b.handleDataModelChange,b),c.off("dataPropertyChange",b.handleDataPropertyChange,b),c.off("indexChange",b.handleIndexChange,b),d||c.selectionModel.off("selectionChange",b.handleSelectionChange,b)),b._dataModel=a,a.on("dataModelChange",b.handleDataModelChange,b),a.on("dataPropertyChange",b.handleDataPropertyChange,b),a.on("indexChange",b.handleIndexChange,b),d?d._setDataModel(a):a.selectionModel.on("selectionChange",b.handleSelectionChange,b),b.invalidateAll(!0),b.epc("dataModel",c,a))}},interactors:{get:function(){return this._interactors},set:function(a){var b=this,c=b._interactors;c&&c.forEach(function(a){a.tearDown()}),b._interactors=a,a&&a.forEach(function(a){a.setUp()}),b.epc("interactors",c,a),b.invalidateSelection()}},editable:{set:function(a){var b=this;b.interactors=a?[new Ae(b),new we(b),new ye(b),new xe(b),new ze(b),new ve(b)]:[new Ae(b),new we(b),new ye(b),new ze(b),new ve(b)]}}});G(re,{getLabel:function(a){var b=a.s("label");

return b===d?a.name:b},getLabelBackground:function(a){return a.s("label.background")},getLabelColor:function(a){return a.s("label.color")},getNote:function(a){return a.s("note")},getNoteBackground:function(a){return a.s("note.background")},getNoteColor:function(a){return a.s("note.color")}}),G(re,{forEach:function(a,b){var c,d,e=0,f=this._layers,g=this._dataModel._datas,h=g.length;if(f)for(;e<f.length;e++){d=f[e];for(var i=0;h>i;i++)if(c=g[i],c._layer===d&&a.call(b,c)===!1)return}else for(;h>e;e++)if(a.call(b,g[e])===!1)return},forEachReverse:function(a,b){var c,d,e,f=this._layers,g=this._dataModel._datas,h=g.length;if(f)for(c=f.length-1;c>=0;c--){e=f[c];for(var i=h-1;i>=0;i--)if(d=g[i],d._layer===e&&a.call(b,d)===!1)return}else for(c=h-1;c>=0;c--)if(a.call(b,g[c])===!1)return}}),G(re,{fitData:function(a,b,d,e,f){var g=this;if(!g.clientWidth||!g.clientHeight)return void(f||ma(g.fitData,g,[a,b,d,e,!0],200));g.makeVisible(a),g.validate();var h=g.getDataUIBounds(a);h&&(h=Da(h),Za(h,d==c?20:d),g.fitRect(h,b,e))},fitContent:function(a,b,d,e){var f=this;if(!f.clientWidth||!f.clientHeight)return void(e||ma(f.fitContent,f,[a,b,d,!0],200));f.validate();var g=Da(f.contentRect);Za(g,b==c?20:b),f.fitRect(g,a,d)},fitRect:function(a,b,c){var d=this,e=d.clientWidth,f=d.clientHeight,g=a.x+a.width/2,h=a.y+a.height/2,i=m(e/a.width,f/a.height),j=d._zoom,k=-g*j+e/2,l=-h*j+f/2;0===i||isNaN(i)||(c&&(i=m(1,i)),b?d.setTranslate(k,l,{finishFunc:function(){d.setZoom(i,b)}}):(d.setTranslate(k,l),d.setZoom(i)))}}),G(re,{redraw:function(a){var b=this;b._redrawAll||(a?b._dirtyRects.push(a):(b._redrawAll=!0,b._dirtyRects.length=0),b.iv())},draw:function(a,b){var c=this;c.drawBottomPainters(a,b),c.forEach(function(d){if(c._visibleMap[d.uuid]){var e=c.getDataUI(d);if(e){var f=e.bounds;(!b||fb(b,f))&&e.draw(a)}}}),c.drawTopPainters(a,b)},validateImpl:function(){var a,b,c,d,e,f=this,g=f.translateX,h=f.translateY,k=f._zoom,m=f._canvas,n=f.clientWidth,o=f.clientHeight,p=f._viewRect,q={x:-g/k,y:-h/k,width:n/k,height:o/k},r={},s=f._dirtyRects,t=f._dirtyMap,u=f._redrawAll,v=f._makeVisibleData;(n!==m.clientWidth||o!==m.clientHeight)&&(ra(m,n,o),u=1),u||ab(q,p)||(u=1),f._viewRect=q,f._interactors&&f._interactors.forEach(function(a){a.validate()}),f.forEach(function(a){b=a.uuid;var c=r[b]=f.isVisible(a);c!==f._visibleMap[b]&&(t[b]=a)},f);for(b in t)c=f.getDataUI(t[b]),c&&(!u&&f._visibleMap[b]&&(e=c.bounds,e&&s.push(e)),c.invalidate()),f._invalidateContentRect=!0;if(f._visibleMap=r,!u)for(b in t)r[b]&&(c=f.getDataUI(t[b]),c&&(e=c.bounds,e&&s.push(e)));if(u?d=q:(s.forEach(function(a){fb(q,a)&&(d=cb(d,a))}),d&&(Za(d,l(1,1/k)),d.x=i(d.x*k)/k,d.y=i(d.y*k)/k,d.width=j(d.width*k)/k,d.height=j(d.height*k)/k,d=gb(q,d))),d&&(a=Rb(m,g,h,k,d),f.draw(a,d),a.restore()),f._dirtyMap={},s.length=0,delete f._redrawAll,v&&n>0&&o>0){var c=f.getDataUI(v);if(c){var e=c.bounds,w=f._viewRect,x=w.x,y=w.y,z=w.width,A=w.height,k=f._zoom;e&&!fb(e,w)&&(e.x+e.width<x&&(f.translateX=-e.x*k),e.x>x+z&&(f.translateX=-(e.x+e.width-z)*k),e.y+e.height<y&&(f.translateY=-e.y*k),e.y>y+A&&(f.translateY=-(e.y+e.height-A)*k))}delete f._makeVisibleData}f._invalidateContentRect&&(delete f._invalidateContentRect,delete f._contentRect)}}),["zoomIncrement","scrollZoomIncrement","pinchZoomIncrement","maxZoom","minZoom"].forEach(function(a){Fa(re.prototype,a)}),G(re,{_zoom:1,_zoomIncrement:1.3,_scrollZoomIncrement:1.05,_pinchZoomIncrement:1.08,_maxZoom:20,_minZoom:.01,zoomIn:function(a,b){this.setZoom(this._zoom*this._zoomIncrement,a,b)},zoomOut:function(a,b){this.setZoom(this._zoom/this._zoomIncrement,a,b)},zoomReset:function(a,b){this.setZoom(1,a,b)},scrollZoomIn:function(a){this.setZoom(this._zoom*this._scrollZoomIncrement,c,a)},scrollZoomOut:function(a){this.setZoom(this._zoom/this._scrollZoomIncrement,c,a)},pinchZoomIn:function(a){this.setZoom(this._zoom*this._pinchZoomIncrement,c,a)},pinchZoomOut:function(a){this.setZoom(this._zoom/this._pinchZoomIncrement,c,a)},adjustZoom:function(a){return a<this._minZoom?this._minZoom:a>this._maxZoom?this._maxZoom:a},setZoom:function(a,b,c){var d=this;if(b=Ea(b)){d._zoomAnim&&d._zoomAnim.stop(!0);var e=d._zoom;b.action=function(b){d.setZoomImpl(e+(a-e)*b,c)},b.innerFunc=function(){delete d._zoomAnim},d._zoomAnim=fa(b)}else d.setZoomImpl(a,c)},setZoomImpl:function(a,b){var c=this;if(a=c.adjustZoom(a),a!==c._zoom){c.validate();var d=c._viewRect,e=c._zoom;0!==d.width&&0!==d.height&&(b=b?b:{x:d.x+d.width/2,y:d.y+d.height/2},c.translateX=(b.x-d.x)*e-b.x*a,c.translateY=(b.y-d.y)*e-b.y*a),c._zoom=a,c.epc("zoom",e,a)}}});var se=c,te=function(a,b){se||(se=qa()),ra(se,a,b,1);var c=Rb(se);return c.clearRect(0,0,a,b),c};G(re,{getSelectedDataAt:function(a){var b=this;return this.getDataAt(a,function(a){return b.isSelected(a)})},getDataAt:function(a,b){var c,d=this,e=Ja(a,d);return d.forEachReverse(function(a){if(b?b(a):d.isSelectable(a)){if(d.rectIntersects(a,e))return c=a,!1}else;}),c},getDatasInRect:function(a,b,c){c===d&&(c=!0);var e=this,f=[];return e.forEachReverse(function(d){c&&!e.isSelectable(d)||(b?e.rectIntersects(d,a):e.rectContains(d,a))&&f.push(d)}),f},rectIntersects:function(a,b){this.validate();var d=c;if(this._visibleMap[a.uuid]){var e=this._uiMap[a.uuid];if(e){var f=e.bounds;if(eb(b,f))d=!0;else if(b=gb(b,f)){if(!a.s("pixel.perfect"))return!0;var g=b.x,h=b.y,i=b.width,j=b.height,k=1,l=3e3,m=i*j;m>l&&(k=l/m);var n=te(i*k,j*k);Ub(n,-g*k,-h*k),n.scale(k,k),e.draw(n);try{for(var o=0,p=n.getImageData(0,0,i*k,j*k).data;o<p.length;o+=4)if(0!==p[o+3]){d=!0;break}n.restore()}catch(q){se=c,d=!0}}}}return d?!0:!1},rectContains:function(a,b){if(this._visibleMap[a.uuid]){var c=this._uiMap[a.uuid];if(c)return eb(b,c.bounds)}return!1}});var ue=_("qc.widget.graph.Interactor",b,function(a){this._graphView=a},{validate:function(){},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners(),this.clear()},clear:function(){},emit:function(a){this._graphView.emit("interaction",a)},startDragging:function(a){this._lastClientPoint=va(a),this._lastLogicalPoint=this._graphView.lp(a),zb(this,a)},clearDragging:function(){this._lastClientPoint=this._lastLogicalPoint=this._logicalPoint=c},autoScroll:function(a){return this._graphView.autoScroll(a,this._lastClientPoint)}},{interactor:!0},{view:{get:function(){return this._graphView}}}),ve=_("qc.widget.graph.BasicInteractor",ue,function(a){ve["super"].constructor.call(this,a)},{handle_mousedown:function(a){this.handle_touchstart(a)},handle_touchstart:function(a){var b=this,c=b._graphView,d=c._interactionState,e=c.getDataAt(a);K(a),c.requestFocus(),Ka(a)>1||d.editing||d.scrolling||(Bb(a)?b.handleDoubleClick(a,e):b.handleClick(a,e),c.pannable&&!e&&Cb(a)&&!Db(a)&&(b._tx=c.translateX,b._ty=c.translateY,b.startDragging(a)))},handleWindowMouseUp:function(a){this.handleWindowTouchEnd(a)},handleWindowTouchEnd:function(a){var b=this,c=b._graphView._interactionState;c.panning&&(delete c.panning,b.emit({kind:"endPan",event:a})),delete b._tx,delete b._ty,b.clearDragging()},handleWindowMouseMove:function(a){this.handleWindowTouchMove(a)},handleWindowTouchMove:function(a){var b=this,c=b._graphView,d=c._interactionState,e=b._lastClientPoint,f=va(a);b.emit({kind:d.panning?"betweenPan":"beginPan",event:a}),d.panning=!0,c.setTranslate(b._tx+f.x-e.x,b._ty+f.y-e.y)},handle_mousewheel:function(a){this._graphView.handleScroll(a,a.wheelDelta)},handle_DOMMouseScroll:function(a){2===a.axis&&this._graphView.handleScroll(a,-a.detail)},handle_keydown:function(a){this._graphView.handleKeyDown(a)},handleClick:function(a,b){var c=this;b?(c.emit({kind:"clickData",event:a,data:b}),c._graphView.onDataClick(b,a)):(c.emit({kind:"clickBackground",event:a}),c._graphView.onBackgroundClick(a))},handleDoubleClick:function(a,b){if(Cb(a)){var c=this,d=c._graphView;b?(c.emit({kind:"doubleClickData",event:a,data:b}),d.onDataDoubleClick(b,a),c.checkDoubleClickOnNote(a,b)||b.ISubGraph&&(d.currentSubGraph=b)):(c.emit({kind:"doubleClickBackground",event:a}),d.onBackgroundDoubleClick(a),d.upSubGraph())}},checkDoubleClickOnNote:function(a,b){var c=this,d=c._graphView,e=d.lp(a),f=d.getDataUI(b),g=f.noteInfo;return g&&b.s("note.toggleable")&&db(g.hitRect,e)?(b.s("note.expanded",!b.s("note.expanded")),c.emit({kind:"toggleNote",event:a,data:b}),!0):!1}}),we=_("qc.widget.graph.ScrollBarInteractor",ue,function(a){we["super"].constructor.call(this,a)},{handle_mousemove:function(a){this.handle_touchmove(a)},handle_touchmove:function(a){if(!yb()&&Cb(a)){var b=this,c=b._graphView,d=c.isCloseToVScrollBar(a),e=c.isCloseToHScrollBar(a);b._cp?b._state||(d?b._state="vScroll":e&&(b._state="hScroll"),b._state&&(zb(b,a),b.emit({kind:"beginScroll",event:a}))):(d||e)&&c.showScrollBar(),c._interactionState.scrolling=d||e}},handleWindowMouseUp:function(a){this.handleWindowTouchEnd(a)},handleWindowTouchEnd:function(a){var b=this;b._state=b._cp=b._tx=b._ty=c,delete b._graphView._interactionState.scrolling,b.emit({kind:"endScroll",event:a})},handle_mousedown:function(a){this.handle_touchstart(a)},handle_touchstart:function(a){var b=this,c=b._graphView;c.requestFocus(),K(a),b.handle_touchmove(a),Ka(a)>1||!c._interactionState.scrolling||(b._cp=va(a),b._tx=c.translateX,b._ty=c.translateY)},handleWindowMouseMove:function(a){this.handleWindowTouchMove(a)},handleWindowTouchMove:function(a){var b=this,c=b._graphView,d=b._state,e=b._tx,f=b._ty,g=b._cp,h=va(a),i=c._viewRect,j=c.scrollRect;"vScroll"===d?c.translateY=f+(g.y-h.y)*j.height/i.height:"hScroll"===d&&(c.translateX=e+(g.x-h.x)*j.width/i.width),b.emit({kind:"betweenScroll",event:a})}}),xe=_("qc.widget.graph.EditInteractor",ue,function(a){xe["super"].constructor.call(this,a)},{setUp:function(){var a=this,b=a._graphView;xe["super"].setUp.call(a),a._canvas=qa(),b._interactionDiv.insertBefore(a._canvas,b._scrollBarDiv)},tearDown:function(){var a=this;xe["super"].tearDown.call(a),za(a._canvas),a.cursor="",delete a._graphView._interactionState.editing},clear:function(){var a=this,b=a._graphView,d=a._node;d&&(b.getDataUI(d).selectWidthVisible=!0,b._dirtyMap[d.uuid]=d,a._node=a._edgeRect=a._resizePoints=a._rotationPoint=a._shapePoints=c)},handle_mousemove:function(a){this.handle_touchmove(a)},handle_touchmove:function(a){!yb()&&Cb(a)&&this.checkEditInfo(a)},handle_mousedown:function(a){this.handle_touchstart(a)},handle_touchstart:function(a){var b=this,c=b._graphView;K(a),c.requestFocus(),b.checkEditInfo(a);var d=b._editInfo;Cb(a)&&d&&b.startDragging(a)},handleWindowMouseUp:function(a){this.handleWindowTouchEnd(a)},handleWindowTouchEnd:function(){},handleWindowMouseMove:function(a){this.handleWindowTouchMove(a)},handleWindowTouchMove:function(a){var b=this,c=b._graphView,d=b._editInfo,e=d.node,f=d.type,g=d.index,h=c.lp(a),i=e.position,j=e.anchor,k=e.width,m=e.height,n=-k*j.x,o=-m*j.y,p=he(e,h.x,h.y);if("anchor"===f)e.setAnchor((p.x-n)/k,(p.y-o)/m),e.position=h;else if("rotation"===f)e.rotation=t(h.y-i.y,h.x-i.x);else if("resize"===f){var q,r;0===g?(q=l(n+k-p.x,0),r=l(o+m-p.y,0),n=n+k-q,o=o+m-r):1===g?(q=l(p.x-n,0),r=l(o+m-p.y,0),o=o+m-r):2===g?(q=l(p.x-n,0),r=l(p.y-o,0)):3===g&&(q=l(n+k-p.x,0),r=l(p.y-o,0),n=n+k-q),e.setPosition(ie(e,n+j.x*q,o+j.y*r)),e.setSize(q,r)}else"shape"===f?(e._points[g]={x:p.x+i.x,y:p.y+i.y},e.emitShapeChange()):"left"===f?(q=l(n+k-p.x,0),n=n+k-q,e.setPosition(ie(e,n+j.x*q,o+j.y*m)),e.setSize(q,m)):"right"===f?(q=l(p.x-n,0),e.setPosition(ie(e,n+j.x*q,o+j.y*m)),e.setSize(q,m)):"top"===f?(r=l(o+m-p.y,0),o=o+m-r,e.setPosition(ie(e,n+j.x*k,o+j.y*r)),e.setSize(k,r)):"bottom"===f&&(r=l(p.y-o,0),e.setPosition(ie(e,n+j.x*k,o+j.y*r)),e.setSize(k,r))},checkEditInfo:function(a){var b=this,d=b._graphView,e=d._interactionState,f=d.lp(a),g=d._zoom,h=b._node,i=b._resizePoints,j=b._shapePoints,k=b._edgeRect;if(b._editInfo=c,b.cursor="",delete e.editing,h){var l=he(h,f.x,f.y);if(j)for(var m=j.length-1;m>=0;m--)if($a(f,j[m])*g<=6)return b._editInfo={node:h,type:"shape",index:m},b.cursor="crosshair",void(e.editing=!0);for(var m=i.length-1;m>=0;m--)if($a(f,i[m])*g<=6)return b._editInfo={node:h,type:"resize",index:m},b.cursor="crosshair",void(e.editing=!0);if($a(f,h.position)*g<=8)return b._editInfo={node:h,type:"anchor"},b.cursor="move",void(e.editing=!0);if($a(f,b._rotationPoint)*g<=6)return b._editInfo={node:h,type:"rotation"},b.cursor="crosshair",void(e.editing=!0);if(n(l.x-k.x)*g<3&&l.y>=k.y&&l.y<=k.y+k.height)return b._editInfo={node:h,type:"left"},b.cursor="crosshair",void(e.editing=!0);if(n(l.x-k.x-k.width)*g<3&&l.y>=k.y&&l.y<=k.y+k.height)return b._editInfo={node:h,type:"right"},b.cursor="crosshair",void(e.editing=!0);if(n(l.y-k.y)*g<3&&l.x>=k.x&&l.x<=k.x+k.width)return b._editInfo={node:h,type:"top"},b.cursor="crosshair",void(e.editing=!0);if(n(l.y-k.y-k.height)*g<3&&l.x>=k.x&&l.x<=k.x+k.width)return b._editInfo={node:h,type:"bottom"},b.cursor="crosshair",void(e.editing=!0)}},validate:function(){var a=this,b=a._graphView,c=a._canvas,d=b.clientWidth,e=b.clientHeight;(d!==c.clientWidth||e!==c.clientHeight)&&ra(c,d,e),a.clear();var f=Rb(c,0,0,1,{x:0,y:0,width:d,height:e}),g=b._zoom,h=b.translateX,i=b.translateY,j=b.selectionModel.lastData;if(fe(j)){a._node=j,b.getDataUI(j).selectWidthVisible=!1,b._dirtyMap[j.uuid]=j,a._edgeRect={x:-j.width*j._anchor.x,y:-j.height*j._anchor.y,width:j.width,height:j.height};var k=a._resizePoints=je(j);f.strokeStyle="#8175D5",f.beginPath(),k.forEach(function(a,b){0===b?f.moveTo(a.x*g+h,a.y*g+i):f.lineTo(a.x*g+h,a.y*g+i)}),f.closePath(),f.stroke(),f.fillStyle="#5052F9",f.strokeStyle="#F5F4FF",f.lineWidth=1,k.forEach(function(a){f.beginPath(),f.arc(a.x*g+h,a.y*g+i,5,0,r,!0),f.fill(),f.stroke()});var l=j.position;f.beginPath(),f.arc(l.x*g+h,l.y*g+i,6,0,r,!0),f.strokeStyle="#F5F4FF",f.lineWidth=6,f.stroke(),f.strokeStyle="#5052F9",f.lineWidth=4,f.stroke();var m=j.rotation,n=30;if(f.strokeStyle="#8175D5",f.lineWidth=1,f.beginPath(),f.moveTo(l.x*g+h,l.y*g+i),f.lineTo(l.x*g+h+n*o(m),l.y*g+i+n*p(m)),f.stroke(),a._rotationPoint={x:l.x+n*o(m)/g,y:l.y+n*p(m)/g},f.beginPath(),f.arc(l.x*g+h+n*o(m),l.y*g+i+n*p(m),5,0,r,!0),f.fillStyle="#5052F9",f.strokeStyle="#F5F4FF",f.lineWidth=1,f.fill(),f.stroke(),j instanceof ne){var l=j._position,q=j._scale,s=new Ca(j._rotation);a._shapePoints=[],j._points.forEach(function(b){b=s.tf((b.x-l.x)*q.x,(b.y-l.y)*q.y),b.x+=l.x,b.y+=l.y,a._shapePoints.push(b)}),f.fillStyle="#F80827",f.strokeStyle="#F5F4FF",f.lineWidth=1,a._shapePoints.forEach(function(a){f.beginPath(),f.arc(a.x*g+h,a.y*g+i,5,0,r,!0),f.fill(),f.stroke()})}}f.restore()}}),ye=_("qc.widget.graph.SelectInteractor",ue,function(a){ye["super"].constructor.call(this,a)},{handle_mousedown:function(a){this.handle_touchstart(a)},handle_touchstart:function(a){var b=this,c=b._graphView,d=c._interactionState;if(delete b._pendingCS,!(Ka(a)>1||d.editing||d.scrolling)){var e=c.getDataAt(a),f=c.selectionModel;e?Db(a)?f.isSelected(e)?f.removeSelection(e):f.appendSelection(e):f.isSelected(e)||(f.selection=e):Db(a)||!c.pannable?Cb(a)&&(Db(a)||f.clearSelection(),c.rectSelectable&&(b.startDragging(a),d.selecting=!0)):b._pendingCS=va(a)}},handle_mouseup:function(a){this.handle_touchend(a)},handle_touchend:function(a){var b=this,c=b._pendingCS;c&&($a(c,va(a))<=1&&b._graphView.selectionModel.clearSelection(),delete b._pendingCS)},handleWindowMouseUp:function(a){this.handleWindowTouchEnd(a)},handleWindowTouchEnd:function(a){this.clear(a)},handleWindowMouseMove:function(a){this.handleWindowTouchMove(a)},handleWindowTouchMove:function(a){var b=this,c=b._graphView,d=b._mask;d?(b.emit({kind:"betweenRectSelect",event:a}),b.autoScroll(a)):b.emit({kind:"beginRectSelect",event:a}),d||(d=b._mask=pa(!1,c._contentDiv)),b._logicalPoint=c.lp(a);var e=d.rect=bb(b._lastLogicalPoint,b._logicalPoint),f=c.zoom,g=d.style;ua(d,{x:e.x*f+c.translateX,y:e.y*f+c.translateY,width:e.width*f,height:e.height*f}),b.intersects()?(g.border="",g.background=c.rectSelectBackground):(g.background="",g.border="1px solid "+c.rectSelectBorderColor)},intersects:function(){var a=this,b=a._lastLogicalPoint,c=a._logicalPoint;return b.x>c.x||b.y>c.y},clear:function(a){var b=this,c=b._graphView,d=b._mask;if(delete b._pendingCS,b._lastLogicalPoint){if(d){var e=c.getDatasInRect(d.rect,b.intersects());if(e.length){var f=c.selectionModel,g=Da(f.selection);e.forEach(function(a){f.isSelected(a)?Ta(g,a):g.push(a)}),f.selection=g}za(d),delete b._mask,b.emit({kind:"endRectSelect",event:a})}b.clearDragging(),delete c._interactionState.selecting}}}),ze=_("qc.widget.graph.MoveInteractor",ue,function(a){ze["super"].constructor.call(this,a)},{handle_mousedown:function(a){this.handle_touchstart(a)},handle_touchstart:function(a){var b=this,c=b._graphView,d=c._interactionState;if(!(Ka(a)>1||!Cb(a)||d.editing||d.scrolling)){var e=c.getSelectedDataAt(a);e&&c.isMovable(e)&&(b.startDragging(a),d.moving=!0)}},handleWindowMouseUp:function(a){this.handleWindowTouchEnd(a)},handleWindowTouchEnd:function(a){var b=this;b._lastLogicalPoint&&(delete b._graphView._interactionState.moving,b._logicalPoint&&b.emit({kind:"endMove",event:a}),b.clearDragging())},handleWindowMouseMove:function(a){this.handleWindowTouchMove(a)},handleWindowTouchMove:function(a){var b=this,c=b._graphView,d={kind:b._logicalPoint?"betweenMove":"beginMove",event:a},e=b._logicalPoint=c.lp(a);c.moveSelection(e.x-b._lastLogicalPoint.x,e.y-b._lastLogicalPoint.y),b._lastLogicalPoint=e,b.autoScroll(a),b.emit(d)}}),Ae=_("qc.widget.graph.PinchInteractor",ue,function(a){Ae["super"].constructor.call(this,a)},{handle_touchstart:function(a){var b=this,c=b._graphView;if(2===Ka(a)){K(a),c.requestFocus(),b.startDragging(a);var d=c.zoom,e=c._interactionDiv.getBoundingClientRect(),f=a.touches[0],g=a.touches[1],h={x:(f.clientX+g.clientX)/2-e.left,y:(f.clientY+g.clientY)/2-e.top};h.x-=c.translateX,h.y-=c.translateY,h.x/=d,h.y/=d,b._point=h,b._dist=La(a)}},handleWindowTouchEnd:function(a){var b=this,d=b._graphView,e=d._interactionState;e.pinching&&(b.emit({kind:"endPinch",event:a}),delete e.pinching),b._point=b._dist=c},handleWindowTouchMove:function(a){var b=this,c=b._graphView,d=c._interactionState;if(2===Ka(a)){var e=La(a);c.handlePinch(b._point,b._dist,e),b._dist=e,b.emit({kind:d.pinching?"betweenPinch":"beginPinch",event:a}),d.pinching=!0}}});G(w,{hideToolTip:ka,showToolTip:la,initContext:Rb,initDash:Sb,restoreDash:Tb,gTranslate:Ub,gRotate:Vb,drawImage:da,drawShape:nb,fillShape:ob,fillPattern:pb,fillRect:qb,drawBorder:rb,draw3dBorder:vb,drawArc:sb,drawRoundRect:tb,draw3dRect:ub,drawPoints:wb,getImageWidth:Zb,getImageHeight:$b,getVectorValue:_b,toCurvePoints:Wa,getLineOffsetInfo:Xa,getLineCacheInfo:Ya,inflate:tc,setPropertyValue:Ic,getPropertyValue:Hc},!0)}(this,Object,null);